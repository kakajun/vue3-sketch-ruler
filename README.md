# vue3-sketch-ruler

> In using vue3, the zoom operation used for page presentation

[![](https://camo.githubusercontent.com/28479a7a834310a667f36760a27283f7389e864a/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f6c2f76322d646174657069636b65722e737667)](https://camo.githubusercontent.com/28479a7a834310a667f36760a27283f7389e864a/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f6c2f76322d646174657069636b65722e737667) [![build status](https://github.com/kakajun/vue3-sketch-ruler/actions/workflows/gh-pages.yml/badge.svg?branch=master)](https://github.com/kakajun/vue3-sketch-ruler/actions/workflows/gh-pages.yml)

## ğŸš€ Features

- ğŸ’ª Vue 3 Composition API
- ğŸ”¥ Written in TypeScript
- ğŸ’¡ ä»¥é¼ æ ‡ä¸ºä¸­å¿ƒç¼©æ”¾é¡µé¢, å¯ä»¥ä½¿ç”¨pazoomçš„ç‰¹æ€§
- ğŸ“¦ å‡åŒ–é…ç½®
- ğŸ’ æä¾›è¿˜åŸ, æ”¾å¤§, ç¼©å°çš„åŠŸèƒ½
- ğŸ“¦ å¹³å°ä¸ä¸šåŠ¡ä»£ç é€šè¿‡æ’æ§½çš„æ–¹å¼è¿›è¡Œåˆ†ç¦», ä¹Ÿå°±æ˜¯ä½ åªéœ€è¦ä¸“æ³¨ä½ çš„ä¸šåŠ¡ä»£ç , å…¶ä»–äº¤ç»™å¹³å°

## ğŸŒˆ åº”ç”¨æ¡ˆä¾‹:

<!-- [avueå¤§å±å¯è§†åŒ–å·¥å…·](https://data.avuejs.com/build/1) ![image](https://github.com/kakajun/vue3-sketch-ruler/blob/1x/example/v2/assets/dp.png) -->

[GoView é«˜æ•ˆæ‹–æ‹½å¼ä½ä»£ç æ•°æ®å¯è§†åŒ–å¼€å‘å¹³å°](https://vue.mtruning.club/#/project/items)

[GoView 2X åº”ç”¨æºç åœ°å€](https://gitee.com/majun2232/go-view)

## âœ¨ å‡çº§ç‰¹æ€§(åŒ1Xæ¯”è¾ƒ)

1. åœ¨åŸæ¥1Xç‰ˆæœ¬ä¸­æ»¡è¶³åŸºæœ¬çš„ç¼©æ”¾å’Œæ ‡æ³¨è¾…åŠ©çº¿çš„åŠŸèƒ½, ä½†æ˜¯ç¼©æ”¾æ—¶, æ˜¯å›ºå®šä»¥ç”»é¢å·¦ä¸Šè§’ä½ç¼©æ”¾ç‚¹, è¿™æ ·å­åœ¨å®é™…æ“ä½œä¸­ä¼šå¾ˆä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥è¿™é‡Œå¯¹ç¼©æ”¾åŠŸèƒ½è¿›è¡Œäº†æ”¹è¿›ï¼Œä»¥é¼ æ ‡ä¸ºä¸­å¿ƒç¼©æ”¾é¡µé¢ï¼Œè¿™æ ·åœ¨æ“ä½œä¸­ä¼šæ›´æ–¹ä¾¿ã€‚ç¼©æ”¾é‡‡ç”¨æ”¹é€ è¿‡çš„pazoomæ’ä»¶,åŠ äº†äº›æ–¹æ³•ä½¿å¾—æ›´é€‚é…æˆ‘çš„æ’ä»¶, è¯¦æƒ…è§[pazoom](https://github.com/kakajun/simple-panzoom.git)
2. å¯¹è¾…åŠ©çº¿åšäº†è°ƒæ•´, å‡å°‘äº†ç»†åˆ»åº¦çš„ç»˜åˆ¶, å› ä¸ºå·²ç»æœ‰åˆ»åº¦æ˜¾ç¤º, åˆ é™¤åç”»é¢æ›´åŠ ç®€æ´
3. è¾…åŠ©çº¿ä½ç½®æ˜¾ç¤ºè·Ÿéšé¼ æ ‡ç§»åŠ¨
4. åˆ é™¤è¾…åŠ©çº¿æ˜¯ä»¥æ‹–æ‹½çº¿æ¡åˆ°ç¼–è¾‘æ¡†å¤–å³å¯
5. æ–°å¢è¿˜åŸ, æ”¾å¤§, ç¼©å°çš„APIï¼Œè‡ªåŠ¨å±…ä¸­å¯¹é½
6. ä¿®æ”¹å¼•ç”¨æ–¹å¼, å‡å°‘ç¹ççš„é…ç½®
7. å¯¹æ ‡å¢¨åˆ€, ä¿®æ”¹æ–°å¢å’Œåˆ é™¤å‚è€ƒçº¿
8. åˆå§‹åŒ–è‡ªåŠ¨å±…ä¸­å¯¹é½
9. æ–°å¢è¾…åŠ©çº¿å¯¹åˆ»åº¦æœ‰å¸é™„æ•ˆæœ

å‡çº§è¿‡ç¨‹ç®€å•å†™äº†ä¸€ç¯‡æ˜é‡‘æ–‡ç« , åŒè¡Œæˆ–æ„Ÿå…´è¶£çš„å¯ä»¥ç•™è¨€äº¤æµ

[æ˜é‡‘:1X å¤§å±é¡µé¢ç¼©æ”¾æ’ä»¶---å‡çº§æ”¹é€ ](https://juejin.cn/post/7025195450080690212)

[æ˜é‡‘:2X `vue3-sketch-ruler`æ’ä»¶çš„èœ•å˜ä¸å‡çº§](https://juejin.cn/post/7390134326871228428)

## ğŸ”‘ è¯´æ˜

1. æ’ä»¶åº”ç”¨èŒƒå›´: é€‚åˆä½œä¸ºä½ä»£ç å¹³å°æ“ä½œé¡µé¢ç¼©æ”¾å·¥å…·,æ¯”å¦‚åšå›¾å·¥å…·å¦‚, å¤§å±å¯è§†åŒ–, åšå›¾å·¥å…·å›¾æ€ªå…½ç­‰,ç±»ä¼¼psçš„ç¼©æ”¾æ•ˆæœ.
2. ç”±1X ç‰ˆæœ¬å‡çº§2Xå¯ä»¥å‚è€ƒ[GoView 2X åº”ç”¨æºç åœ°å€](https://gitee.com/majun2232/go-view) çš„æäº¤ä¿®æ”¹è®°å½•è¿›è¡Œ
3. æ­¤masteræœ€æ–°2Xç‰ˆæœ¬åªåœ¨vue3ä¸­ä½¿ç”¨, å¦‚æœéœ€è¦å­¦ä¹ vue-demiå…³äºvue2/vue3é€šç”¨ç»„ä»¶çš„,æˆ–è€…å¸Œæœ›ç”¨åˆ°åŸæ¥é£æ ¼çš„, è¯·åˆ‡æ¢åˆ°1xåˆ†æ”¯, ä½¿ç”¨1Xç‰ˆæœ¬ã€‚
4. æ³¨æ„2Xç‰ˆæœ¬ä½œä¸ºåŠ å¼ºç‰ˆï¼Œé‡æ„äº†å†…æ ¸ä¸1Xç‰ˆæœ¬ä½¿ç”¨æ–¹æ³•æœ‰è¾ƒå¤§çš„å˜é©ï¼Œä¸å…¼å®¹ï¼Œè¯·è°¨æ…å‡çº§ï¼ç»§ç»­ä½¿ç”¨1Xç‰ˆæœ¬çš„åŒå­¦ï¼Œè¯·åˆ‡æ¢åˆ°1xåˆ†æ”¯é˜…è¯»ä½¿ç”¨æ–‡æ¡£[1x](https://github.com/kakajun/vue3-sketch-ruler/tree/1x)

## ğŸ¦„ demo

æ¡ˆä¾‹æµè§ˆ: [https://kakajun.github.io/vue3-sketch-ruler](https://kakajun.github.io/vue3-sketch-ruler) ![image](https://github.com/kakajun/vue3-sketch-ruler/blob/master/example/assets/1.png)

## å®‰è£…

> æ”¯æŒå…¨å±€å¯¼å…¥å’Œæ¨¡å—å¯¼å…¥

```js
npm install --save vue3-sketch-ruler

yarn add vue3-sketch-ruler  -S
```

## å¼•å…¥æ–¹å¼

å°†æ‰“åŒ…åçš„diståŒ…æ‹·è´ï¼Œç”¨importå¯¼å…¥ï¼Œæ”¯æŒä¸‹é¢ä¸¤ç§å¼•ç”¨æ–¹å¼

```
import SketchRule from 'vue3-sketch-ruler'
import 'vue3-sketch-ruler/lib/style.css'
```

## æ”¯æŒçš„åŠŸèƒ½

- [x] æ ‡å°ºæ¸²æŸ“
- [x] ç¼©æ”¾å†…å®¹ï¼Œé‡ç»˜æ ‡å°º
- [x] æŒ‰Ctrl+é¼ æ ‡æ»šè½®ç¼©æ”¾, æ ¹æ®é¼ æ ‡ä½ç½®å‘ç”Ÿå˜åŒ–
- [x] æŒ‰ç©ºæ ¼æ‹–åŠ¨ç”»å¸ƒ
- [x] åˆ‡æ¢æ ‡å°ºçŠ¶æ€ï¼Œæ˜¾ç¤ºæˆ–éšè—
- [x] å‚è€ƒçº¿ç®¡ç†ï¼ˆå¢åŠ åˆ é™¤ï¼‰
- [x] æ”¯æŒå‚è€ƒçº¿ä»»æ„åœ°æ–¹æ‹–æ‹½
- [x] å·¦ä¸Šè§’çš„çœ¼ç›ï¼Œç‚¹å‡»èƒ½æ§åˆ¶çº¢çº¿æ˜¾å½±
- [x] åˆå§‹åŒ–è‡ªåŠ¨å±…ä¸­
- [x] æä¾›å³ä¸‹è§’æŒ‰é’®ç¼©æ”¾,è¿˜åŸæ‰€éœ€API
- [x] åˆ»åº¦å¸é™„æ•ˆæœ
- [x] é€‰ä¸­é˜´å½±é˜´å½±å“åº”

## æœªæ¥è®¡åˆ’

- [] åŠ å…¥å•å…ƒæµ‹è¯•åŠŸèƒ½

è¿™æ˜¯ä¸ªå¼€æºä¸šä½™åšçš„åŠŸèƒ½ï¼Œæœ‰å…´è¶£åŠ å¼ºè¯¥æ’ä»¶çš„å°ä¼™ä¼´æ¬¢è¿åŠ å…¥

## ä½¿ç”¨

```
<SketchRule
  :thick="state.thick"
  v-model:scale="state.scale"
  :width="rectWidth"
  :height="rectHeight"
  :canvasWidth="canvasWidth"
  :canvasHeight="canvasHeight"
  ref="sketchrule"
  :isShowReferLine="state.isShowReferLine"
  @onCornerClick="handleCornerClick"
  :lines="state.lines"
>
  <template #default>
    <div data-type="page" :style="canvasStyle">
      <img class="img-style" :src="bgImg" alt="" />>
    </div>
  </template>
  <template #btn="{ resetMethod, zoomInMethod, zoomOutMethod }">
    <div class="btns">
      <button class="btn reset-btn" @click="resetMethod">è¿˜åŸ</button>
      <button class="btn zoomin-btn" @click="zoomInMethod">æ”¾å¤§</button>
      <button class="btn zoomout-btn" @click="zoomOutMethod">ç¼©å°</button>
    </div>
  </template>
</SketchRule>

import Vue from 'vue';
import {SketchRule} from "vue-sketch-ruler";
import 'vue3-sketch-ruler/lib/style.css'
const rectWidth = 1600
const rectHeight = 800
const canvasWidth = 1000
const canvasHeight = 500

```

å‚è€ƒä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œ[ç‚¹å‡»è¿™é‡Œ](https://github.com/kakajun/vue3-sketch-ruler/blob/master/example/components/user-rulerts.vue)

## api

### å±æ€§

| å±æ€§åç§° | æè¿° | ç±»å‹ | é»˜è®¤å€¼ |
| --- | --- | --- | --- |
| scale | åˆå§‹åŒ–æ ‡å°ºçš„ç¼©æ”¾åŠç”»å¸ƒ | Number | 1 |
| rate | åˆå§‹åŒ–æ ‡å°ºçš„ç¼©æ”¾ | Number | 1 |
| thick | æ ‡å°ºçš„åšåº¦ | Number | 16 |
| width | æ”¾ç½®æ ‡å°ºçª—å£çš„å®½åº¦ | Number | 1400 |
| height | æ”¾ç½®æ ‡å°ºçª—å£çš„é«˜åº¦ | Number | 900 |
| paddingRatio | ç”»å¸ƒä¸å¤–æ¡†é—´éš” | Number | 20% (åŸºäºå¤–æ¡†å®½é«˜æœ€å°é•¿åº¦) |
| autoCenter | è‡ªåŠ¨å±…ä¸­å¯¹é½ | Boolean | true (è®¾ä¸ºfalse,é‚£ä¹ˆéœ€è¦åœ¨panzoomOptionä¸­ä¼ å…¥startX,startY) |
| eyeIcon | ççœ¼å›¾æ ‡ | String | - |
| closeEyeIcon | é—­çœ¼å›¾æ ‡ | String | - |
| canvasWidth | ç”»å¸ƒå®½ | Number | 1000 |
| canvasHeight | ç”»å¸ƒé«˜ | Number | 700 |
| isShowReferLine | æ˜¯å¦æ˜¾ç¤ºæ ‡çº¿ | Boolean | true |
| showRuler | æ˜¯å¦æ˜¾ç¤ºå°ºè§„ | Boolean | true |
| lines | åˆå§‹åŒ–æ°´å¹³æ ‡å°ºä¸Šçš„å‚è€ƒçº¿ | object<Array> | {h:[],v:[]} |
| snapsObj | å¸é™„åˆ»åº¦é›†åˆ | object<Array> | {h:[],v:[]} |
| snapThreshold | å¸é™„è·ç¦» | Number | 5 |
| shadow | é˜´å½±é…ç½® | object<Number> | {x: 0,y: 0, width: 0, height: 0} |
| gridRatio | åˆ»åº¦åˆ†æ•£æ¯”ä¾‹ | Number | 1 |
| selfHandle | è‡ªå·±å¤„ç†ç›‘å¬ç§»åŠ¨å’Œç¼©æ”¾ | Boolean | false |
| panzoomOption | panzoomç›¸å…³çš„æ‰©å±•å‚æ•° | object | - |
| palette | æ ‡å°ºçš„æ ·å¼é…ç½®å‚æ•° | Object | å¦‚ä¸‹è¡¨ |

| å±æ€§åç§°      | æè¿°           | é»˜è®¤å€¼                         |
| ------------- | -------------- | ------------------------------ |
| bgColor       | ç”»å¸ƒèƒŒæ™¯       | #f6f7f9                        |
| longfgColor   | åˆ»åº¦èƒŒæ™¯       | #BABBBC                        |
| fontColor     | åˆ»åº¦å­—ä½“é¢œè‰²   | #7D8694                        |
| shadowColor   | æ¿€æ´»é˜´å½±èƒŒæ™¯   | #E8E8E8                        |
| lineColor     | å¯¹å‡†çº¿é¢œè‰²     | #51d6a9                        |
| lineType      | å¯¹å‡†çº¿ç±»å‹     | solid (solid \dashed \ dotted) |
| lockLineColor | é”å®šå¯¹å‡†çº¿é¢œè‰² | #d4d7dc                        |
| hoverColor    | æ ‡ç­¾é¢œè‰²å­—ä½“   | #fff                           |
| hoverBg       | æ ‡ç­¾é¢œè‰²èƒŒæ™¯   | #000                           |
| borderColor   | å°ºå­å¤–è¾¹æ¡†é¢œè‰² | #eeeeef                        |

> æ›´å¤špazoomæ’ä»¶çš„é…ç½®çš„panzoomOptionå‚æ•°ï¼Œå¯ä»¥å‚è€ƒ[pazoom document](https://github.com/timmywil/panzoom)

### æ›´æ–°è¯´æ˜

### Event

| äº‹ä»¶åç§°      | æè¿°              | å›è°ƒå‚æ•°                                                    |
| ------------- | ----------------- | ----------------------------------------------------------- |
| onCornerClick | å·¦ä¸Šè§’ç‚¹å‡»äº‹ä»¶    |                                                             |
| zoomchange    | ç”»å¸ƒç§»åŠ¨,ç¼©æ”¾äº‹ä»¶ | {dimsOut:{elem: {}, parent: {}},originalEvent:{},scale,x,y} |

### ä½¿ç”¨è¯´æ˜

1. åŒæ—¶æŒ‰Ctrl+é¼ æ ‡æ»šè½®ç¼©æ”¾, æ ¹æ®é¼ æ ‡ä½ç½®å‘ç”Ÿé¡µé¢ç¼©æ”¾
2. åŒæ—¶æŒ‰ç©ºæ ¼+é¼ æ ‡å·¦é”®, æ‹–åŠ¨ç”»å¸ƒ
3. æœ‰äº›éœ€è¦è‡ªå·±å®šä¹‰ç›‘å¬ç§»åŠ¨å’Œç¼©æ”¾ï¼Œä¸æƒ³æŒ‰ç©ºæ ¼ç§»åŠ¨, æˆ–è€…ä¸æƒ³Ctrl+weel ç§»åŠ¨, é‚£ä¹ˆå¯ä»¥è®¾ç½®selfHandleä¸ºtrueï¼Œç„¶åé€šè¿‡refè·å–åˆ°ç»„ä»¶å®ä¾‹ï¼Œç„¶åé€šè¿‡å®ä¾‹è°ƒç”¨ç»„ä»¶çš„æ–¹æ³•, è‡ªå®šä¹‰ç›‘å¬æŒ‰é”®
4. å…·ä½“æ“ä½œå‚è§æˆ‘æ’ä»¶é‡Œé¢çš„ç›‘å¬ç§»åŠ¨å’Œç¼©æ”¾æ–¹æ³•

```js
const panzoomInstance = sketchruleRef.value.panzoomInstance

document.addEventListener('wheel', function (e) {
  if (e.ctrlKey || e.metaKey) {
    panzoomInstance.value?.zoomWithWheel(e)
  }
})

// è®©æŒ‰ä¸‹ç©ºæ ¼é”®æ‰èƒ½ç§»åŠ¨ç”»å¸ƒ
document.addEventListener('keydown', function (e) {
  if (e.key === ' ') {
    panzoomInstance.value?.bind()
    e.preventDefault()
  }
})

document.addEventListener('keyup', function (e) {
  if (e.key === ' ') {
    panzoomInstance.value?.destroy()
  }
})
```

### æ’æ§½æä¾›æ–¹æ³•

| äº‹ä»¶åç§° | æè¿°         | å›è°ƒå‚æ•° |
| -------- | ------------ | -------- |
| reset    | ç”»å¸ƒé‡ç½®ä½ç½® |          |
| zoomIn   | ç”»å¸ƒæ”¾å¤§     |          |
| zoomIn   | ç”»å¸ƒç¼©å°     |          |

## å¼•ç”¨

vueæ ‡å°ºç»„ä»¶ [vue-sketch-ruler](https://github.com/chuxiaoguo/vue-sketch-ruler.git)
