import{d as V,h as H,r as h,a as p,i as T,c,b as W,e as t,t as u,g as r,j as Z,k as A,w as f,m as U,u as m,l as F,n as g,o as k}from"./index-BWrXYicV.js";import{f as J}from"./style-Ds2vJKWl.js";import{b as q}from"./bg-ByMLKr0n.js";const G={class:"demo"},K={class:"top font16"},Q={class:"scale mr10"},X={class:"scale mr10"},Y={class:"top font16"},ee=["value"],te=["value"],se=["value"],oe=["src"],ne={class:"btns"},ae=["onClick"],le=["onClick"],re=["onClick"],he=V({__name:"comprehensive",setup(ie){const v=H(),b=h(0),a=h(),i=p({canvas:!0,maxScale:3,minScale:.3,disablePan:!1,disableZoom:!1,contain:"none",handleStartEvent:s=>{s.preventDefault(),console.log("handleStartEvent",s)}}),d=h(!1),C=()=>{a.value&&a.value.zoomOut()};T(()=>{window.addEventListener("resize",w)});const w=()=>{a.value&&a.value.initPanzoom()},x=()=>{a.value&&a.value.reset()},l=p({scale:1}),y=c(()=>v.isLight?{bgColor:"transparent",lineColor:"#51d6a9",lineType:"dashed"}:{bgColor:"transparent",hoverBg:"#fff",bb:"#fff",hoverColor:"#000",longfgColor:"#BABBBC",fontColor:"#DEDEDE",shadowColor:"#525252",lineColor:"#51d6a9",borderColor:"#B5B5B5"}),o=p({thick:20,width:1470,height:750,showShadowText:!1,canvasWidth:1920,canvasHeight:1080,showRuler:!0,snapsObj:{h:[0,100,200],v:[130]},shadow:{x:0,y:0,width:300,height:300},panzoomOption:i,isShowReferLine:!0,lines:{h:[0,250],v:[0,500]}}),S=c(()=>({width:`${o.width}px`,height:`${o.height}px`})),z=c(()=>Number(l.scale).toFixed(1)),B=c(()=>({width:`${o.canvasWidth}px`,height:`${o.canvasHeight}px`})),M=s=>{const e=s.target;e&&(l.scale=Number(e.value),a.value&&a.value.panzoomInstance.zoom(l.scale))},R=s=>{console.log("handleCornerClick",s)},_=s=>{console.log("zoomchange",s)},O=s=>{const e=s.target.value.split(",");o.snapsObj.h=e.map(n=>Number(n))},L=s=>{const e=s.target.value.split(",");o.snapsObj.v=e.map(n=>Number(n))},j=s=>{const e=s.target;e&&(i.disableZoom=e.checked)},D=s=>{const e=s.target;e&&(i.disablePan=e.checked)},E=s=>{const e=s.target;e&&(i.contain=e.checked?"inside":"none")},I=()=>{o.shadow.x=Math.random()*o.canvasWidth,o.shadow.y=Math.random()*o.canvasHeight},N=s=>{console.log("handleMouseDown",s)};return(s,e)=>(k(),W("div",G,[t("div",K,[e[5]||(e[5]=t("div",{class:"mr10"}," Ctrl+鼠标滚轮缩放画布 ",-1)),e[6]||(e[6]=t("div",{class:"mr10"}," 空白键+鼠标左键键移动画布 ",-1)),t("div",Q," 缩放比:"+u(z.value),1),t("div",X," 参考线:"+u(JSON.stringify(o.lines)),1)]),t("div",Y,[t("button",{class:"mr10 font16",onClick:e[0]||(e[0]=n=>o.showRuler=!o.showRuler)},u((o.showRuler?"隐藏":"显示")+"规尺"),1),t("button",{class:"mr10 font16",onClick:e[1]||(e[1]=n=>o.isShowReferLine=!o.isShowReferLine)},u((o.isShowReferLine?"隐藏":"显示")+"参考线"),1),t("button",{class:"mr10 font16",onClick:e[2]||(e[2]=n=>d.value=!0)},"锁定参考线"),t("button",{class:"mr10 font16",onClick:I},"模拟阴影切换"),t("button",{class:"mr10 font16",onClick:r(x,["stop"])},"还原"),t("button",{class:"mr10 font16",onClick:r(C,["stop"])},"缩小"),e[7]||(e[7]=t("span",null,"禁止缩放",-1)),t("input",{type:"checkbox",class:"switch",onChange:j},null,32),e[8]||(e[8]=t("span",null,"禁止移动",-1)),t("input",{type:"checkbox",class:"switch mr10",onChange:D},null,32),e[9]||(e[9]=t("span",null,"框内移动",-1)),t("input",{type:"checkbox",class:"switch mr10",onChange:E},null,32),t("input",{class:"mr10 font16",value:l.scale,type:"range",min:"0.3",max:"3",step:"0.1",defaultValue:"1",onInput:M},null,40,ee),e[10]||(e[10]=t("div",{class:"mr10"}," 吸附横线: ",-1)),t("input",{class:"mr10",style:{width:"90px"},value:o.snapsObj.h,onBlur:O},null,40,te),e[11]||(e[11]=t("div",{class:"mr10"}," 吸附纵线: ",-1)),t("input",{class:"mr10",style:{width:"90px"},value:o.snapsObj.v,onBlur:L},null,40,se),e[12]||(e[12]=t("a",{href:"https://github.com/kakajun/vue3-sketch-ruler",target:"_blank",rel:"noopener noreferrer"},[t("i",{class:"fas fa-external-link-alt"}),Z(" git源码 ")],-1))]),t("div",{class:F(["wrapper",[m(v).isLight?"whitewrapper":"blackwrapper"]]),style:g(S.value)},[(k(),A(m(J),U({ref_key:"sketchruleRef",ref:a,key:b.value,scale:l.scale,"onUpdate:scale":e[3]||(e[3]=n=>l.scale=n),"lock-line":d.value,"onUpdate:lockLine":e[4]||(e[4]=n=>d.value=n)},o,{palette:y.value,onOnCornerClick:R,onZoomchange:_}),{default:f(()=>[t("div",{"data-type":"page",style:g(B.value),onMousedown:N},[t("img",{class:"img-style",src:m(q),alt:""},null,8,oe)],36)]),btn:f(({reset:n,zoomIn:$,zoomOut:P})=>[t("div",ne,[t("button",{onClick:r(n,["stop"])},"还原",8,ae),t("button",{onClick:r($,["stop"])},"放大",8,le),t("button",{onClick:r(P,["stop"])},"缩小",8,re)])]),_:1},16,["scale","lock-line","palette"]))],6)]))}});export{he as default};
