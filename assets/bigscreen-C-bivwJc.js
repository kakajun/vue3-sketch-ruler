import{p as X}from"./panzoom-PrllC8h6.js";import{d as B,r as n,c as R,p as O,G as Y,b as D,e as s,n as W,u as f,k as K,o as M,_ as T}from"./index-C5FnI5jC.js";const q=""+new URL("left-TebUF-QO.png",import.meta.url).href,F=""+new URL("middle-S_IB64_J.png",import.meta.url).href,G=""+new URL("right-CoXavwZ9.png",import.meta.url).href,J={class:"screen-item left"},N=["src"],Q={class:"screen-item center"},V=["src"],Z={class:"screen-item right"},j=["src"],A=B({__name:"bigscreen",setup($){const a=n(null),o=n(null),x=n(1),t=n(null),r=n(null),c=n(window.innerWidth-280),i=n(window.innerHeight-120),w=n(3600),g=n(1080),_=n(.1),v=n("");let d=0,m=0;const C=R(()=>({background:"#f6f7f9",width:c.value+"px",height:i.value+"px",overflow:"hidden"})),I=R(()=>({width:w.value+"px",height:g.value+"px"})),E=e=>{const{scale:l,dimsOut:u}=e.detail;u&&(x.value=l)},p=e=>{e.ctrlKey&&a.value&&(e.preventDefault(),a.value.zoomWithWheel(e))},y=e=>{e.code==="Space"&&!e.repeat&&a.value&&(e.preventDefault(),v.value="grab",a.value.setOptions({disablePan:!1,cursor:"grab"}))},S=e=>{e.code==="Space"&&a.value&&(v.value="",a.value.setOptions({disablePan:!0,cursor:"default"}))},z=()=>{const e=c.value,l=i.value,u=w.value,k=g.value,P=e*(1-_.value)/u,U=l*(1-_.value)/k,h=Math.min(P,U);return d=(e-u)/2/h,m=(l-k)/2/h,h},L=()=>{r.value?(c.value=r.value.clientWidth,i.value=r.value.clientHeight):(c.value=window.innerWidth,i.value=window.innerHeight)},H=()=>{if(o.value&&(o.value.removeEventListener("panzoomchange",E),o.value.parentElement&&o.value.parentElement.removeEventListener("wheel",p)),a.value?.destroy(),t.value=document.querySelector(".canvasedit"),t.value){L();let e=z();console.log(e,"scale"),a.value=X(t.value,{startScale:e,smoothScroll:!0,canvas:!0,disablePan:!0,cursor:"default",startX:d,startY:m}),t.value.addEventListener("panzoomchange",E),t.value.parentElement&&t.value.parentElement.addEventListener("wheel",p,{passive:!1}),o.value=t.value}},b=()=>{if(L(),a.value){const e=z();a.value.reset({startScale:e,startX:d,startY:m,animate:!1})}};return O(()=>{H(),window.addEventListener("resize",b),window.addEventListener("keydown",y),window.addEventListener("keyup",S)}),Y(()=>{window.removeEventListener("resize",b),window.removeEventListener("keydown",y),window.removeEventListener("keyup",S),t.value&&t.value.parentElement&&t.value.parentElement.removeEventListener("wheel",p)}),(e,l)=>(M(),D("div",{class:"wrapper",ref_key:"wrapperRef",ref:r},[l[0]||(l[0]=s("div",{class:"description"},"说明: 该案例展示了如何在大屏(3600*1080)上使用simple-panzoom插件, 实现大屏的缩放(Ctrl + 鼠标滚轮)功能, 拖动(空白键+鼠标拖动)功能.方便前端分组件开发",-1)),s("div",{class:K(["canvasedit-parent",v.value]),style:W(C.value)},[s("div",{class:"canvasedit big-screen-demo",style:W(I.value),ref_key:"elem",ref:t},[s("div",J,[s("img",{src:f(q),alt:"Left Screen"},null,8,N)]),s("div",Q,[s("img",{src:f(F),alt:"Center Screen"},null,8,V)]),s("div",Z,[s("img",{src:f(G),alt:"Right Screen"},null,8,j)])],4)],6)],512))}}),ne=T(A,[["__scopeId","data-v-568c86b9"]]);export{ne as default};
