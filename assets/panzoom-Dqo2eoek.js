function K(t,e){let r=t.length;for(;r--;)if(t[r].pointerId===e.pointerId)return r;return-1}function j(t,e){const r=K(t,e);r>-1&&t.splice(r,1),t.push(e)}function lt(t,e){const r=K(t,e);r>-1&&t.splice(r,1)}function G(t){const e=t.slice(0);let r=e.pop(),s;for(;s=e.pop();)r={clientX:(s.clientX-r.clientX)/2+r.clientX,clientY:(s.clientY-r.clientY)/2+r.clientY};return r}var Q={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"};function Z(t,e,r,s){Q[t].split(" ").forEach(p=>{e.addEventListener(p,r,s)})}function q(t,e,r){Q[t].split(" ").forEach(s=>{e.removeEventListener(s,r)})}var J=["webkit","moz","ms"],E={};function dt(){return document.createElement("div").style}function tt(t){if(E[t])return E[t];const e=dt();if(t in e)return E[t]=t;const r=t[0].toUpperCase()+t.slice(1);for(let s=J.length-1;s>=0;s--){const p=`${J[s]}${r}`;if(p in e)return E[t]=p}return t}function v(t,e,r){t.style[tt(e)]=r}function ft(t,e){const r=tt("transform");v(t,"transition",`${r} ${e.duration}ms ${e.easing}`)}function ut(t,{x:e,y:r,scale:s},p){v(t,"transform",`scale(${s}) translate(${e}px, ${r}px)`)}function z(t,e,r=window.getComputedStyle(t)){const s=e==="border"?"Width":"";return{left:parseFloat(r[`${e}Left${s}`])||0,right:parseFloat(r[`${e}Right${s}`])||0,top:parseFloat(r[`${e}Top${s}`])||0,bottom:parseFloat(r[`${e}Bottom${s}`])||0}}function ht(t){const e=t.parentNode,r=t.getBoundingClientRect(),s=e.getBoundingClientRect();return{elem:{width:r.width,height:r.height,left:r.left,top:r.top},parent:{width:s.width,height:s.height,left:s.left,top:s.top}}}function C(t){const e=t.parentNode,r=window.getComputedStyle(t),s=window.getComputedStyle(e),p=t.getBoundingClientRect(),f=e.getBoundingClientRect();return{elem:{width:p.width,height:p.height,left:p.left,top:p.top,margin:z(t,"margin",r),border:z(t,"border",r)},parent:{width:f.width,height:f.height,left:f.left,top:f.top,padding:z(e,"padding",s),border:z(e,"border",s)}}}function pt(t){let e=t;for(;e&&e.parentNode;){if(e.parentNode===document)return!0;e=e.parentNode instanceof ShadowRoot?e.parentNode.host:e.parentNode}return!1}function gt(t){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}var et={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,duration:200,easing:"ease-in-out",handleStartEvent:t=>{t.preventDefault(),t.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",setTransform:ut,startX:0,startY:0,startScale:1,step:.3,touchAction:"none",origin:"50% 50%"};function nt(t,e){if(!t||t.nodeType!==1)throw new Error("Panzoom requires an element");if(!pt(t))throw new Error("Panzoom should be called on attached elements");e={...et,...e};const r=t.parentNode;r.style.overflow=e.overflow,r.style.userSelect="none",r.style.touchAction=e.touchAction,(e.canvas?r:t).style.cursor=e.cursor,t.style.userSelect="none",t.style.touchAction=e.touchAction,v(t,"transformOrigin",typeof e.origin=="string"?e.origin:"50% 50%");function s(){r.style.overflow="",r.style.userSelect="",r.style.touchAction="",r.style.cursor="",t.style.cursor="",t.style.userSelect="",t.style.touchAction="",v(t,"transformOrigin","")}function p(n={}){for(const c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c]);(n.hasOwnProperty("cursor")||n.hasOwnProperty("canvas"))&&(r.style.cursor=t.style.cursor="",(e.canvas?r:t).style.cursor=e.cursor),n.hasOwnProperty("overflow")&&(r.style.overflow=n.overflow),n.hasOwnProperty("touchAction")&&(r.style.touchAction=n.touchAction,t.style.touchAction=n.touchAction)}let f=0,h=0,d=1,X=!1;Y(e.startScale,{animate:!1,force:!0}),setTimeout(()=>{W(e.startX,e.startY,{animate:!1,force:!0})});function rt(n,c){if(c.silent)return;const a=new CustomEvent("panzoomchange",{detail:n});t.dispatchEvent(a)}function N(n,c){const a={x:f,y:h,scale:d};typeof n.animate=="boolean"&&(n.animate?ft(t,n):v(t,"transition","none")),n.setTransform(t,a,n);const u=()=>{const o=n.contain&&n.contain!=="none"?C(t):ht(t);rt({x:f,y:h,scale:d,dimsOut:o,originalEvent:c},n)};return n.animate?setTimeout(u,n.duration+50):requestAnimationFrame(u),a}function S(n,c,a,u){const o={...e,...u},l={x:f,y:h,opts:o};if(!o.force&&o.disablePan===!0)return l;if(n=parseFloat(n),c=parseFloat(c),l.x=n,l.y=c,o.contain&&o.contain!=="none"){const i=C(t),m=i.elem.width/d,g=i.elem.height/d,x=m*a,P=g*a,y=(x-m)/2,w=(P-g)/2;if(o.contain==="inside"){const D=(-i.elem.margin.left-i.parent.padding.left+y)/a,I=(i.parent.width-x-i.parent.padding.left-i.elem.margin.left-i.parent.border.left-i.parent.border.right+y)/a;l.x=Math.max(Math.min(l.x,I),D);const L=(-i.elem.margin.top-i.parent.padding.top+w)/a,k=(i.parent.height-P-i.parent.padding.top-i.elem.margin.top-i.parent.border.top-i.parent.border.bottom+w)/a;l.y=Math.max(Math.min(l.y,k),L)}else if(o.contain==="outside"){const D=(-(x-i.parent.width)-i.parent.padding.left-i.parent.border.left-i.parent.border.right+y)/a,I=(y-i.parent.padding.left)/a;l.x=Math.max(Math.min(l.x,I),D);const L=(-(P-i.parent.height)-i.parent.padding.top-i.parent.border.top-i.parent.border.bottom+w)/a,k=(w-i.parent.padding.top)/a;l.y=Math.max(Math.min(l.y,k),L)}}return l}function T(n,c){const a={...e,...c},u={scale:d,opts:a};if(!a.force&&a.disableZoom)return u;let o=e.minScale,l=e.maxScale;if(a.contain&&a.contain!=="none"){const i=C(t),m=i.elem.width/d,g=i.elem.height/d;if(m>1&&g>1){const x=i.parent.width-i.parent.border.left-i.parent.border.right,P=i.parent.height-i.parent.border.top-i.parent.border.bottom,y=x/m,w=P/g;e.contain==="inside"?l=Math.min(l,y,w):e.contain==="outside"&&(o=Math.max(o,y,w))}}return u.scale=Math.min(Math.max(n,o),l),u}function W(n,c,a,u){const o=S(n,c,d,a);return f!==o.x||h!==o.y?(f=o.x,h=o.y,N(o.opts,u)):{x:f,y:h,scale:d}}function Y(n,c,a){const u=T(n,c),o=u.opts;if(!o.force&&o.disableZoom)return{x:f,y:h,scale:d};n=u.scale;let l=f,i=h;if(o.focal){const g=o.focal;l=(g.x/n-g.x/d+f*n)/n,i=(g.y/n-g.y/d+h*n)/n}const m=S(l,i,n,{relative:!1,force:!0});return f=m.x,h=m.y,d=n,N(o,a)}function U(n,c){const a={...e,animate:!0,...c};return Y(d*Math.exp((n?1:-1)*a.step),a)}function ot(n){return U(!0,n)}function it(n){return U(!1,n)}function _(n,c,a,u){const o=C(t),l={width:o.parent.width-o.parent.padding.left-o.parent.padding.right-o.parent.border.left-o.parent.border.right,height:o.parent.height-o.parent.padding.top-o.parent.padding.bottom-o.parent.border.top-o.parent.border.bottom};let i=c.clientX-o.parent.left-o.parent.padding.left-o.parent.border.left-o.elem.margin.left,m=c.clientY-o.parent.top-o.parent.padding.top-o.parent.border.top-o.elem.margin.top;e.origin!=="0 0"&&(i-=o.elem.width/d/2,m-=o.elem.height/d/2);const g={x:i/l.width*(l.width*n),y:m/l.height*(l.height*n)};return Y(n,{...a,animate:!1,focal:g},u)}function at(n,c){n.preventDefault();const a={...e,...c,animate:!1},o=(n.deltaY===0&&n.deltaX?n.deltaX:n.deltaY)<0?1:-1,l=T(d*Math.exp(o*a.step/3),a).scale;return _(l,n,a,n)}function ct(n){const c={...e,animate:!0,force:!0,...n};d=T(c.startScale,c).scale;const a=S(c.startX,c.startY,d,c);return f=a.x,h=a.y,N(c)}let O,M,$,A;const b=[];function F(n){j(b,n),X=!0,e.handleStartEvent(n),O=f,M=h;const c=G(b);$=c.clientX,A=c.clientY}function R(n){if(!X||O===void 0||M===void 0||$===void 0||A===void 0)return;j(b,n);const c=G(b),a=d;W(O+(c.clientX-$)/a,M+(c.clientY-A)/a,{animate:!1},n)}function B(n){lt(b,n),X&&(X=!1,O=M=$=A=void 0)}let H=!1;function V(){H||(H=!0,Z("down",e.canvas?r:t,F),Z("move",document,R,{passive:!0}),Z("up",document,B,{passive:!0}))}function st(){H=!1,q("down",e.canvas?r:t,F),q("move",document,R),q("up",document,B)}return e.noBind||V(),{bind:V,destroy:st,getPan:()=>({x:f,y:h}),getScale:()=>d,getOptions:()=>gt(e),handleDown:F,handleMove:R,handleUp:B,pan:W,reset:ct,resetStyle:s,setOptions:p,setStyle:(n,c)=>v(t,n,c),zoom:Y,zoomIn:ot,zoomOut:it,zoomToPoint:_,zoomWithWheel:at}}nt.defaultOptions=et;var mt=nt;export{mt as p};
