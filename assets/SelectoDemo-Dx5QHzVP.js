import{r as Z,i as se,a as le,b as J,E as Pe,s as Ae,D as ze,g as U,c as Ge,d as He,e as de,f as K,h as re,j as he,k as H,l as $e,m as qe,G as Ue,n as ge,o as Ve,p as Ze,q as Je,t as pe,u as Qe,v as oe,P as et,w as tt,x as nt,y as me,z as rt,M as ot}from"./moveable-BxZYyiLM.js";import{d as it,_ as Me,o as Q,b as ee,r as ie,a as ye,i as at,c as st,e as T,f as Se,F as Ce,q as lt,v as ke}from"./index-C4pOqaU6.js";import{f as ct}from"./style-CQ-uSkv8.js";var ce=function(s,r){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])},ce(s,r)};function ut(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");ce(s,r);function i(){this.constructor=s}s.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}function ft(s,r){return r={exports:{}},s(r,r.exports),r.exports}var q=ft(function(s,r){function i(l){if(l&&typeof l=="object"){var a=l.which||l.keyCode||l.charCode;a&&(l=a)}if(typeof l=="number")return u[l];var c=String(l),f=t[c.toLowerCase()];if(f)return f;var f=e[c.toLowerCase()];if(f)return f;if(c.length===1)return c.charCodeAt(0)}i.isEventKey=function(a,c){if(a&&typeof a=="object"){var f=a.which||a.keyCode||a.charCode;if(f==null)return!1;if(typeof c=="string"){var d=t[c.toLowerCase()];if(d)return d===f;var d=e[c.toLowerCase()];if(d)return d===f}else if(typeof c=="number")return c===f;return!1}},r=s.exports=i;var t=r.code=r.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=r.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(n=97;n<123;n++)t[String.fromCharCode(n)]=n-32;for(var n=48;n<58;n++)t[n-48]=n;for(n=1;n<13;n++)t["f"+n]=n+111;for(n=0;n<10;n++)t["numpad "+n]=n+96;var u=r.names=r.title={};for(n in t)u[t[n]]=n;for(var o in e)t[o]=e[o]});q.code;q.codes;q.aliases;var vt=q.names;q.title;var be={"+":"plus","left command":"meta","right command":"meta"},Ee={shift:1,ctrl:2,alt:3,meta:4};function Be(s,r){var i=(vt[s]||r||"").toLowerCase();for(var t in be)i=i.replace(t,be[t]);return i.replace(/\s/g,"")}function Re(s,r){r===void 0&&(r=Be(s.keyCode,s.key));var i=dt(s);return i.indexOf(r)===-1&&i.push(r),i.filter(Boolean)}function dt(s){var r=[s.shiftKey&&"shift",s.ctrlKey&&"ctrl",s.altKey&&"alt",s.metaKey&&"meta"];return r.filter(Boolean)}function _e(s){var r=s.slice();return r.sort(function(i,t){var e=Ee[i]||5,n=Ee[t]||5;return e-n}),r}var we,ht=function(s){ut(r,s);function r(t){t===void 0&&(t=window);var e=s.call(this)||this;return e.container=t,e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e.clear=function(){return e.ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e},e.keydownEvent=function(n){e.triggerEvent("keydown",n)},e.keyupEvent=function(n){e.triggerEvent("keyup",n)},e.blur=function(){e.clear(),e.trigger("blur")},J(t,"blur",e.blur),J(t,"keydown",e.keydownEvent),J(t,"keyup",e.keyupEvent),e}var i=r.prototype;return Object.defineProperty(r,"global",{get:function(){return we||(we=new r)},enumerable:!1,configurable:!0}),r.setGlobal=function(){return this.global},i.destroy=function(){var t=this.container;this.clear(),this.off(),Z(t,"blur",this.blur),Z(t,"keydown",this.keydownEvent),Z(t,"keyup",this.keyupEvent)},i.keydown=function(t,e){return this.addEvent("keydown",t,e)},i.offKeydown=function(t,e){return this.removeEvent("keydown",t,e)},i.offKeyup=function(t,e){return this.removeEvent("keyup",t,e)},i.keyup=function(t,e){return this.addEvent("keyup",t,e)},i.addEvent=function(t,e,n){return se(e)?this.on("".concat(t,".").concat(_e(e).join(".")),n):le(e)?this.on("".concat(t,".").concat(e),n):this.on(t,e),this},i.removeEvent=function(t,e,n){return se(e)?this.off("".concat(t,".").concat(_e(e).join(".")),n):le(e)?this.off("".concat(t,".").concat(e),n):this.off(t,e),this},i.triggerEvent=function(t,e){this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.altKey=e.altKey,this.metaKey=e.metaKey;var n=Be(e.keyCode,e.key),u=n==="ctrl"||n==="shift"||n==="meta"||n==="alt",o={key:n,isToggle:u,inputEvent:e,keyCode:e.keyCode,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey};this.trigger(t,o),this.trigger("".concat(t,".").concat(n),o);var l=Re(e,n);l.length>1&&this.trigger("".concat(t,".").concat(l.join(".")),o)},r}(Pe),ue=function(s,r){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])},ue(s,r)};function We(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");ue(s,r);function i(){this.constructor=s}s.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var k=function(){return k=Object.assign||function(r){for(var i,t=1,e=arguments.length;t<e;t++){i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])}return r},k.apply(this,arguments)};function gt(s,r){var i={};for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&r.indexOf(t)<0&&(i[t]=s[t]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,t=Object.getOwnPropertySymbols(s);e<t.length;e++)r.indexOf(t[e])<0&&Object.prototype.propertyIsEnumerable.call(s,t[e])&&(i[t[e]]=s[t[e]]);return i}function pt(s,r,i,t){var e=arguments.length,n=e<3?r:t===null?t=Object.getOwnPropertyDescriptor(r,i):t,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,i,t);else for(var o=s.length-1;o>=0;o--)(u=s[o])&&(n=(e<3?u(n):e>3?u(r,i,n):u(r,i))||n);return e>3&&n&&Object.defineProperty(r,i,n),n}function $(s,r,i){for(var t=0,e=r.length,n;t<e;t++)(n||!(t in r))&&(n||(n=Array.prototype.slice.call(r,0,t)),n[t]=r[t]);return s.concat(n||Array.prototype.slice.call(r))}function mt(s){if("touches"in s){var r=s.touches[0]||s.changedTouches[0];return{clientX:r.clientX,clientY:r.clientY}}else return{clientX:s.clientX,clientY:s.clientY}}function yt(s){if(typeof Map>"u")return s.filter(function(i,t){return s.indexOf(i)===t});var r=new Map;return s.filter(function(i){return r.has(i)?!1:(r.set(i,!0),!0)})}function St(s,r,i){var t=K(s);return t.elementFromPoint&&t.elementFromPoint(r,i)||null}function Ie(s,r,i){var t=s.tag,e=s.children,n=s.attributes,u=s.className,o=s.style,l=r||K(i).createElement(t);for(var a in n)l.setAttribute(a,n[a]);var c=l.children;if(e.forEach(function(d,v){Ie(d,c[v],l)}),u&&u.split(/\s+/g).forEach(function(d){d&&!Ve(l,d)&&Ze(l,d)}),o){var f=l.style;for(var a in o)f[a]=o[a]}return!r&&i&&i.appendChild(l),l}function Ct(s,r){for(var i=[],t=2;t<arguments.length;t++)i[t-2]=arguments[t];var e=r||{},n=e.className,u=n===void 0?"":n,o=e.style,l=o===void 0?{}:o,a=gt(e,["className","style"]);return{tag:s,className:u,style:l,attributes:a,children:i}}function ae(s,r,i){s!==r&&i(s,r)}function De(s,r,i){var t;i===void 0&&(i=s.data.boundArea);var e=s.distX,n=e===void 0?0:e,u=s.distY,o=u===void 0?0:u,l=s.data,a=l.startX,c=l.startY;if(r>0){var f=Math.sqrt((n*n+o*o)/(1+r*r)),d=r*f;n=(n>=0?1:-1)*d,o=(o>=0?1:-1)*f}var v=Math.abs(n),p=Math.abs(o),m=n<0?a-i.left:i.right-a,y=o<0?c-i.top:i.bottom-c;t=Je([v,p],[0,0],[m,y],!!r),v=t[0],p=t[1],n=(n>=0?1:-1)*v,o=(o>=0?1:-1)*p;var g=Math.min(0,n),S=Math.min(0,o),C=a+g,h=c+S;return{left:C,top:h,right:C+v,bottom:h+p,width:v,height:p}}function V(s){var r=s.getBoundingClientRect(),i=r.left,t=r.top,e=r.width,n=r.height;return{pos1:[i,t],pos2:[i+e,t],pos3:[i,t+n],pos4:[i+e,t+n]}}function Te(s,r,i){var t=H(s,r),e=t.list,n=t.prevList,u=t.added,o=t.removed,l=t.maintained;return $($($([],u.map(function(a){return e[a]}),!0),o.map(function(a){return n[a]}),!0),i?l.map(function(a){var c=a[1];return e[c]}):[])}function Oe(s){for(var r=0,i=s.length,t=1;t<i;++t)r=Math.max(tt(s[t],s[t-1]),r);return r}var Fe=Ae(`
:host {
    position: fixed;
    display: none;
    border: 1px solid #4af;
    background: rgba(68, 170, 255, 0.5);
    pointer-events: none;
    will-change: transform;
    z-index: 100;
}
`),xe="selecto-selection ".concat(Fe.className),fe=["className","boundContainer","selectableTargets","selectByClick","selectFromInside","continueSelect","continueSelectWithoutDeselect","toggleContinueSelect","toggleContinueSelectWithoutDeselect","keyContainer","hitRate","scrollOptions","checkInput","preventDefault","ratio","getElementRect","preventDragFromInside","rootContainer","dragCondition","clickBySelectEnd","checkOverflow","innerScrollOptions"],Ke=$(["dragContainer","cspNonce","preventClickEventOnDrag","preventClickEventOnDragStart","preventRightClick"],fe),kt=["dragStart","drag","dragEnd","selectStart","select","selectEnd","keydown","keyup","scroll","innerScroll"],bt=["clickTarget","getSelectableElements","setSelectedTargets","getElementPoints","getSelectedTargets","findSelectableTargets","triggerDragStart","checkScroll","selectTargetsByPoints","setSelectedTargetsByPoints"],Et=function(s){We(r,s);function r(t){t===void 0&&(t={});var e=s.call(this)||this;e.selectedTargets=[],e.dragScroll=new ze,e._onDragStart=function(o,l){var a=o.data,c=o.clientX,f=o.clientY,d=o.inputEvent,v=e.options,p=v.selectFromInside,m=v.selectByClick,y=v.rootContainer,g=v.boundContainer,S=v.preventDragFromInside,C=S===void 0?!0:S,h=v.clickBySelectEnd,b=v.dragCondition;if(b&&!b(o)){o.stop();return}a.data={};var _=U(e.container);a.innerWidth=_.innerWidth,a.innerHeight=_.innerHeight,e.findSelectableTargets(a),a.startSelectedTargets=e.selectedTargets,a.scaleMatrix=Ge(),a.containerX=0,a.containerY=0;var E=e.container,O={left:-1/0,top:-1/0,right:1/0,bottom:1/0};if(y){var L=e.container.getBoundingClientRect();a.containerX=L.left,a.containerY=L.top,a.scaleMatrix=He(e.container,y)}if(g){var P=de(g)&&"element"in g?k({left:!0,top:!0,bottom:!0,right:!0},g):{element:g,left:!0,top:!0,bottom:!0,right:!0},M=P.element,W=void 0;if(M){le(M)?W=K(E).querySelector(M):M===!0?W=e.container:W=M;var I=W.getBoundingClientRect();P.left&&(O.left=I.left),P.top&&(O.top=I.top),P.right&&(O.right=I.right),P.bottom&&(O.bottom=I.bottom)}}a.boundArea=O;var F={left:c,top:f,right:c,bottom:f,width:0,height:0},B=[],X=m&&!h,A=!1;if(!p||X){var w=e._findElement(l||d.target,a.selectableTargets);A=!!w,X&&(B=w?[w]:[])}var D=!p&&A;if(D&&!m)return o.stop(),!1;var x=d.type,Y=x==="mousedown"||x==="touchstart",z=!o.isClick&&Y?e.emit("dragStart",k(k({},o),{data:a.data})):!0;if(!z)return o.stop(),!1;if(e.continueSelect?(B=Te(e.selectedTargets,B,e.continueSelectWithoutDeselect),a.startPassedTargets=e.selectedTargets):a.startPassedTargets=[],e._select(B,F,o,!0,D&&m&&!h&&C),a.startX=c,a.startY=f,a.selectFlag=!1,a.preventDragFromInside=!1,d.target){var R=re(a.scaleMatrix,[c-a.containerX,f-a.containerY]);e.target.style.cssText+="position: ".concat(y?"absolute":"fixed",";")+"left:0px;top:0px;"+"transform: translate(".concat(R[0],"px, ").concat(R[1],"px)")}if(D&&m&&!h)d.preventDefault(),C&&(e._selectEnd(a.startSelectedTargets,a.startPassedTargets,F,o,!0),a.preventDragFromInside=!0);else{a.selectFlag=!0;var j=e.options,G=j.scrollOptions,te=j.innerScrollOptions,ve=!1;if(te){for(var je=o.inputEvent,Ne=je.target,ne=null,N=Ne;N&&N!==K(E).body;){var Le=getComputedStyle(N).overflow!=="visible";if(Le){ne=N;break}N=N.parentElement}ne&&(a.innerScrollOptions=k({container:ne,checkScrollEvent:!0},te===!0?{}:te),e.dragScroll.dragStart(o,a.innerScrollOptions),ve=!0)}!ve&&G&&G.container&&e.dragScroll.dragStart(o,G),D&&m&&h&&(a.selectFlag=!1,o.preventDrag())}return!0},e._onDrag=function(o){if(o.data.selectFlag){var l=e.scrollOptions,a=o.data.innerScrollOptions,c=a||(l==null?void 0:l.container);if(c&&!o.isScroll&&e.dragScroll.drag(o,a||l))return}e._checkSelected(o)},e._onDragEnd=function(o){var l=o.data,a=o.inputEvent,c=De(o,e.options.ratio),f=l.selectFlag,d=e.container;if(a&&e.emit("dragEnd",k(k({isDouble:!!o.isDouble,isClick:!!o.isClick,isDrag:!1,isSelect:f},o),{data:l.data,rect:c})),e.target.style.cssText+="display: none;",f)l.selectFlag=!1,e.dragScroll.dragEnd();else if(e.selectByClick&&e.clickBySelectEnd){var v=e._findElement((a==null?void 0:a.target)||St(d,o.clientX,o.clientY),l.selectableTargets);e._select(v?[v]:[],c,o)}l.preventDragFromInside||e._selectEnd(l.startSelectedTargets,l.startPassedTargets,c,o)},e._onKeyDown=function(o){var l=e.options,a=!1;if(!e._keydownContinueSelect){var c=e._sameCombiKey(o,l.toggleContinueSelect);e._keydownContinueSelect=c,a||(a=c)}if(!e._keydownContinueSelectWithoutDeselection){var c=e._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect);e._keydownContinueSelectWithoutDeselection=c,a||(a=c)}a&&e.emit("keydown",{keydownContinueSelect:e._keydownContinueSelect,keydownContinueSelectWithoutDeselection:e._keydownContinueSelectWithoutDeselection})},e._onKeyUp=function(o){var l=e.options,a=!1;if(e._keydownContinueSelect){var c=e._sameCombiKey(o,l.toggleContinueSelect,!0);e._keydownContinueSelect=!c,a||(a=c)}if(e._keydownContinueSelectWithoutDeselection){var c=e._sameCombiKey(o,l.toggleContinueSelectWithoutDeselect,!0);e._keydownContinueSelectWithoutDeselection=!c,a||(a=c)}a&&e.emit("keyup",{keydownContinueSelect:e._keydownContinueSelect,keydownContinueSelectWithoutDeselection:e._keydownContinueSelectWithoutDeselection})},e._onBlur=function(){(e._keydownContinueSelect||e._keydownContinueSelectWithoutDeselection)&&(e._keydownContinueSelect=!1,e._keydownContinueSelectWithoutDeselection=!1,e.emit("keyup",{keydownContinueSelect:e._keydownContinueSelect,keydownContinueSelectWithoutDeselection:e._keydownContinueSelectWithoutDeselection}))},e._onDocumentSelectStart=function(o){var l=K(e.container);if(e.gesto.isFlag()){var a=e.dragContainer;a===U(e.container)&&(a=l.documentElement);var c=he(a)?[a]:[].slice.call(a),f=o.target;c.some(function(d){if(d===f||d.contains(f))return o.preventDefault(),!0})}},e.target=t.portalContainer;var n=t.container;e.options=k({className:"",portalContainer:null,container:null,dragContainer:null,selectableTargets:[],selectByClick:!0,selectFromInside:!0,clickBySelectEnd:!1,hitRate:100,continueSelect:!1,continueSelectWithoutDeselect:!1,toggleContinueSelect:null,toggleContinueSelectWithoutDeselect:null,keyContainer:null,scrollOptions:null,checkInput:!1,preventDefault:!1,boundContainer:!1,preventDragFromInside:!0,dragCondition:null,rootContainer:null,checkOverflow:!1,innerScrollOptions:!1,getElementRect:V,cspNonce:"",ratio:0},t);var u=e.options.portalContainer;return u&&(n=u.parentElement),e.container=n||document.body,e.initElement(),e.initDragScroll(),e.setKeyController(),e}var i=r.prototype;return i.setSelectedTargets=function(t){var e=this.selectedTargets,n=H(e,t),u=n.added,o=n.removed,l=n.prevList,a=n.list;return this.selectedTargets=t,{added:u.map(function(c){return a[c]}),removed:o.map(function(c){return l[c]}),beforeSelected:e,selected:t}},i.setSelectedTargetsByPoints=function(t,e){var n=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),a={left:n,top:u,right:o,bottom:l,width:o-n,height:l-u},c={ignoreClick:!0};this.findSelectableTargets(c);var f=this.hitTest(a,c,!0,null),d=this.setSelectedTargets(f);return k(k({},d),{rect:a})},i.selectTargetsByPoints=function(t,e){var n=new MouseEvent("mousedown",{clientX:t[0],clientY:t[1],cancelable:!0,bubbles:!0}),u=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),o=new MouseEvent("mousemove",{clientX:e[0],clientY:e[1],cancelable:!0,bubbles:!0}),l=this.gesto,a=l.onDragStart(n);a!==!1&&(l.onDrag(u),l.onDragEnd(o))},i.getSelectedTargets=function(){return this.selectedTargets},i.triggerDragStart=function(t){return this.gesto.triggerDragStart(t),this},i.destroy=function(){var t;this.off(),this.keycon&&this.keycon.destroy(),this.gesto.unset(),this.injectResult.destroy(),this.dragScroll.dragEnd(),Z(document,"selectstart",this._onDocumentSelectStart),this.options.portalContainer||(t=this.target.parentElement)===null||t===void 0||t.removeChild(this.target),this.keycon=null,this.gesto=null,this.injectResult=null,this.target=null,this.container=null,this.options=null},i.getElementPoints=function(t){var e=this.getElementRect||V,n=e(t),u=[n.pos1,n.pos2,n.pos4,n.pos3];if(e!==V){var o=t.getBoundingClientRect();return $e(u,o)}return u},i.getSelectableElements=function(){var t=this.container,e=[];return this.options.selectableTargets.forEach(function(n){if(qe(n)){var u=n();u&&e.push.apply(e,[].slice.call(u))}else if(he(n))e.push(n);else if(de(n))e.push(n.value||n.current);else{var o=[].slice.call(K(t).querySelectorAll(n));e.push.apply(e,o)}}),e},i.checkScroll=function(){if(this.gesto.isFlag()){var t=this.scrollOptions,e=this.gesto.getEventData().innerScrollOptions,n=e||(t==null?void 0:t.container);n&&this.dragScroll.checkScroll(k({inputEvent:this.gesto.getCurrentEvent()},e||t))}},i.findSelectableTargets=function(t){var e=this;t===void 0&&(t=this.gesto.getEventData());var n=this.getSelectableElements(),u=n.map(function(f){return e.getElementPoints(f)});t.selectableTargets=n,t.selectablePoints=u,t.selectableParentMap=null;var o=this.options,l=o.checkOverflow||o.innerScrollOptions,a=K(this.container);if(l){var c=new Map;t.selectableInnerScrollParentMap=c,t.selectableInnerScrollPathsList=n.map(function(f,d){for(var v=f.parentElement,p=[],m=[],y=function(){var g=c.get(v);if(!g){var S=getComputedStyle(v).overflow!=="visible";if(S){var C=V(v);g={parentElement:v,indexes:[],points:[C.pos1,C.pos2,C.pos4,C.pos3],paths:$([],m)},p.push(v),p.forEach(function(h){c.set(h,g)}),p=[]}}g?(v=g.parentElement,c.get(v).indexes.push(d),m.push(v)):p.push(v),v=v.parentElement};v&&v!==a.body;)y();return m})}return o.checkOverflow||(t.selectableInners=n.map(function(){return!0})),this._refreshGroups(t),n},i.clickTarget=function(t,e){var n=mt(t),u=n.clientX,o=n.clientY,l={data:{selectFlag:!1},clientX:u,clientY:o,inputEvent:t,isClick:!0,isTrusted:!1,stop:function(){return!1}};return this._onDragStart(l,e)&&this._onDragEnd(l),this},i.setKeyController=function(){var t=this.options,e=t.keyContainer,n=t.toggleContinueSelect,u=t.toggleContinueSelectWithoutDeselect;this.keycon&&(this.keycon.destroy(),this.keycon=null),(n||u)&&(this.keycon=new ht(e||U(this.container)),this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on("blur",this._onBlur))},i.setClassName=function(t){this.options.className=t,this.target.setAttribute("class","".concat(xe," ").concat(t||""))},i.setKeyEvent=function(){var t=this.options,e=t.toggleContinueSelect,n=t.toggleContinueSelectWithoutDeselect;!e&&!n||this.keycon||this.setKeyController()},i.setKeyContainer=function(t){var e=this,n=this.options;ae(n.keyContainer,t,function(){n.keyContainer=t,e.setKeyController()})},i.getContinueSelect=function(){var t=this.options,e=t.continueSelect,n=t.toggleContinueSelect;return!n||!this._keydownContinueSelect?e:!e},i.getContinueSelectWithoutDeselect=function(){var t=this.options,e=t.continueSelectWithoutDeselect,n=t.toggleContinueSelectWithoutDeselect;return!n||!this._keydownContinueSelectWithoutDeselection?e:!e},i.setToggleContinueSelect=function(t){var e=this,n=this.options;ae(n.toggleContinueSelect,t,function(){n.toggleContinueSelect=t,e.setKeyEvent()})},i.setToggleContinueSelectWithoutDeselect=function(t){var e=this,n=this.options;ae(n.toggleContinueSelectWithoutDeselect,t,function(){n.toggleContinueSelectWithoutDeselect=t,e.setKeyEvent()})},i.setPreventDefault=function(t){this.gesto.options.preventDefault=t},i.setCheckInput=function(t){this.gesto.options.checkInput=t},i.initElement=function(){var t=this.options,e=t.dragContainer,n=t.checkInput,u=t.preventDefault,o=t.preventClickEventOnDragStart,l=t.preventClickEventOnDrag,a=t.preventClickEventByCondition,c=t.preventRightClick,f=c===void 0?!0:c,d=t.className,v=this.container;this.target=Ie(Ct("div",{className:"".concat(xe," ").concat(d||"")}),this.target,v);var p=this.target;this.dragContainer=typeof e=="string"?[].slice.call(K(v).querySelectorAll(e)):e||this.target.parentNode,this.gesto=new Ue(this.dragContainer,{checkWindowBlur:!0,container:U(v),checkInput:n,preventDefault:u,preventClickEventOnDragStart:o,preventClickEventOnDrag:l,preventClickEventByCondition:a,preventRightClick:f}).on({dragStart:this._onDragStart,drag:this._onDrag,dragEnd:this._onDragEnd}),J(document,"selectstart",this._onDocumentSelectStart),this.injectResult=Fe.inject(p,{nonce:this.options.cspNonce})},i.hitTest=function(t,e,n,u){var o=this.options,l=o.hitRate,a=o.selectByClick,c=t.left,f=t.top,d=t.right,v=t.bottom,p=e.innerGroups,m=e.innerWidth,y=e.innerHeight,g=u==null?void 0:u.clientX,S=u==null?void 0:u.clientY,C=e.ignoreClick,h=[[c,f],[d,f],[d,v],[c,v]],b=function(w,D){var x=typeof l=="function"?pe("".concat(l(D))):pe("".concat(l)),Y=C?!1:Qe([g,S],w);if(!n&&a&&Y)return!0;var z=ge(h,w);if(!z.length)return!1;var R=oe(z),j=0;if(R===0&&oe(w)===0?(j=Oe(w),R=Oe(z)):j=oe(w),x.unit==="px")return R>=x.value;var G=nt(Math.round(R/j*100),0,100);return G>=Math.min(100,x.value)},_=e.selectableTargets,E=e.selectablePoints,O=e.selectableInners;if(!p)return _.filter(function(w,D){return O[D]?b(E[D],_[D]):!1});for(var L=[],P=Math.floor(c/m),M=Math.floor(d/m),W=Math.floor(f/y),I=Math.floor(v/y),F=P;F<=M;++F){var B=p[F];if(B)for(var X=W;X<=I;++X){var A=B[X];A&&A.forEach(function(w){var D=E[w],x=O[w],Y=_[w];x&&b(D,Y)&&L.push(Y)})}}return yt(L)},i.initDragScroll=function(){var t=this;this.dragScroll.on("scrollDrag",function(e){var n=e.next;n(t.gesto.getCurrentEvent())}).on("scroll",function(e){var n=e.container,u=e.direction,o=t.gesto.getEventData().innerScrollOptions;o?t.emit("innerScroll",{container:n,direction:u}):t.emit("scroll",{container:n,direction:u})}).on("move",function(e){var n=e.offsetX,u=e.offsetY,o=e.inputEvent,l=t.gesto;if(!(!l||!l.isFlag())){var a=t.gesto.getEventData(),c=a.boundArea;a.startX-=n,a.startY-=u;var f=t.gesto.getEventData().innerScrollOptions,d=f==null?void 0:f.container,v=!1;if(d){var p=a.selectableInnerScrollParentMap,m=p.get(d);m&&(m.paths.forEach(function(y){var g=p.get(y);g.points.forEach(function(S){S[0]-=n,S[1]-=u})}),m.indexes.forEach(function(y){a.selectablePoints[y].forEach(function(g){g[0]-=n,g[1]-=u})}),v=!0)}v||a.selectablePoints.forEach(function(y){y.forEach(function(g){g[0]-=n,g[1]-=u})}),t._refreshGroups(a),c.left-=n,c.right-=n,c.top-=u,c.bottom-=u,t.gesto.scrollBy(n,u,o.inputEvent),t._checkSelected(t.gesto.getCurrentEvent())}})},i._select=function(t,e,n,u,o){o===void 0&&(o=!1);var l=n.inputEvent,a=n.data,c=this.setSelectedTargets(t),f=H(a.startSelectedTargets,t),d=f.added,v=f.removed,p=f.prevList,m=f.list,y={startSelected:p,startAdded:d.map(function(g){return m[g]}),startRemoved:v.map(function(g){return p[g]})};u&&this.emit("selectStart",k(k(k({},c),y),{rect:e,inputEvent:l,data:a.data,isTrusted:n.isTrusted,isDragStartEnd:o})),(c.added.length||c.removed.length)&&this.emit("select",k(k(k({},c),y),{rect:e,inputEvent:l,data:a.data,isTrusted:n.isTrusted,isDragStartEnd:o}))},i._selectEnd=function(t,e,n,u,o){o===void 0&&(o=!1);var l=u.inputEvent,a=u.isDouble,c=u.data,f=l&&l.type,d=f==="mousedown"||f==="touchstart",v=H(t,this.selectedTargets),p=v.added,m=v.removed,y=v.prevList,g=v.list,S=H(e,this.selectedTargets),C=S.added,h=S.removed,b=S.prevList,_=S.list;this.emit("selectEnd",{startSelected:t,beforeSelected:e,selected:this.selectedTargets,added:p.map(function(E){return g[E]}),removed:m.map(function(E){return y[E]}),afterAdded:C.map(function(E){return _[E]}),afterRemoved:h.map(function(E){return b[E]}),isDragStart:d&&o,isDragStartEnd:d&&o,isClick:!!u.isClick,isDouble:!!a,rect:n,inputEvent:l,data:c.data,isTrusted:u.isTrusted})},i._checkSelected=function(t,e){e===void 0&&(e=De(t,this.options.ratio));var n=t.data,u=e.top,o=e.left,l=e.width,a=e.height,c=n.selectFlag,f=n.containerX,d=n.containerY,v=n.scaleMatrix,p=re(v,[o-f,u-d]),m=re(v,[l,a]),y=[];if(c){this.target.style.cssText+="display: block;left:0px;top:0px;"+"transform: translate(".concat(p[0],"px, ").concat(p[1],"px);")+"width:".concat(m[0],"px;height:").concat(m[1],"px;");var g=this.hitTest(e,n,!0,t);y=Te(n.startPassedTargets,g,this.continueSelect&&this.continueSelectWithoutDeselect)}var S=this.emit("drag",k(k({},t),{data:n.data,isSelect:c,rect:e}));if(S===!1){this.target.style.cssText+="display: none;",t.stop();return}c&&this._select(y,e,t)},i._sameCombiKey=function(t,e,n){if(!e)return!1;var u=Re(t.inputEvent,t.key),o=[].concat(e),l=se(o[0])?o:[o];if(n){var a=t.key;return l.some(function(c){return c.some(function(f){return f===a})})}return l.some(function(c){return c.every(function(f){return u.indexOf(f)>-1})})},i._findElement=function(t,e){for(var n=t;n&&!(e.indexOf(n)>-1);)n=n.parentElement;return n},i._refreshGroups=function(t){var e,n=t.innerWidth,u=t.innerHeight,o=t.selectablePoints;if(this.options.checkOverflow){var l=(e=this.gesto.getEventData().innerScrollOptions)===null||e===void 0?void 0:e.container,a=t.selectableInnerScrollParentMap,c=t.selectableInnerScrollPathsList;t.selectableInners=c.map(function(v,p){var m=!1;return v.every(function(y){if(m)return!0;if(y===l)return m=!0,!0;var g=a.get(y);if(g){var S=o[p],C=g.points,h=ge(S,C);if(!h.length)return!1}return!0})})}if(!n||!u)t.innerGroups=null;else{var f=t.selectablePoints,d={};f.forEach(function(v,p){var m=1/0,y=-1/0,g=1/0,S=-1/0;v.forEach(function(b){var _=Math.floor(b[0]/n),E=Math.floor(b[1]/u);m=Math.min(_,m),y=Math.max(_,y),g=Math.min(E,g),S=Math.max(E,S)});for(var C=m;C<=y;++C)for(var h=g;h<=S;++h)d[C]=d[C]||{},d[C][h]=d[C][h]||[],d[C][h].push(p)}),t.innerGroups=d}},r=pt([et(fe,function(t,e){var n={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},u=me("get ".concat(e));t[u]?n.get=function(){return this[u]()}:n.get=function(){return this.options[e]};var o=me("set ".concat(e));t[o]?n.set=function(l){this[o](l)}:n.set=function(l){this.options[e]=l},Object.defineProperty(t,e,n)})],r),r}(Pe),_t=function(s){We(r,s);function r(){return s!==null&&s.apply(this,arguments)||this}return r}(Et);const Xe={};bt.forEach(s=>{Xe[s]=function(...r){return this.$_selecto[s](...r)}});const Ye={};fe.forEach(s=>{Ye[s]=function(r){return this.$_selecto[s]=r}});const wt=it({name:"Selecto",props:Ke,watch:Ye,mounted(){const s=this.$props,r={};Ke.forEach(t=>{const e=s[t];rt(e)||(r[t]=e)});const i=new _t({...r,portalContainer:this.$refs.selectoElement});this.$_selecto=i,kt.forEach(t=>{i.on(t,e=>{this.$emit(t,{...e})})})},beforeUnmount(){this.$_selecto.destroy()},methods:Xe}),Dt={ref:"selectoElement"};function Tt(s,r,i,t,e,n){return Q(),ee("div",Dt,null,512)}const Ot=Me(wt,[["render",Tt]]);/*!simple-panzoom v1.0.72024年8月Sat Aug 10 2024 16:04:04 GMT+0800 (中国标准时间)制作*/typeof window<"u"&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window.CustomEvent!="function"&&(window.CustomEvent=function(s,r){r=r||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(s,r.bubbles,r.cancelable,r.detail),i}));const xt={components:{Moveable:ot,Selecto:Ot,SketchRule:ct},setup(){const t=["shift"],n=[];for(let h=0;h<30;++h)n.push(h);const u=ie([]),o=ie(null),l=ie(null),a=ye({scale:1,isBlack:!1}),c={noBind:!0,maxScale:3,minScale:.3,disablePan:!0,disableZoom:!1,contain:"none",handleStartEvent:h=>{h.preventDefault(),console.log("handleStartEvent",h)}};let f;at(()=>{});const d=()=>{console.log("444"),f.zoomIn()},v=st(()=>a.isBlack?{bgColor:"transparent",hoverBg:"#fff",hoverColor:"#000",longfgColor:"#BABBBC",fontColor:"#DEDEDE",shadowColor:"#525252",lineColor:"#51d6a9",borderColor:"#B5B5B5"}:{bgColor:"transparent",lineColor:"#51d6a9",lineType:"dashed"}),p=h=>{l.value.clickTarget(h.inputEvent,h.inputTarget)},m=h=>{h.target.style.cssText+=h.cssText},y=h=>{h.events.forEach(b=>{b.target.style.cssText+=b.cssText})},g=h=>{const b=h.inputEvent.target;(o.value.isMoveableElement(b)||u.value.some(_=>_===b||_.contains(b)))&&h.stop()},S=h=>{h.isDragStartEnd&&(h.inputEvent.preventDefault(),o.value.waitToChangeTarget().then(()=>{o.value.dragStart(h.inputEvent)})),u.value=h.selected},C=ye({thick:20,width:770,height:400,canvasWidth:600,canvasHeight:400,showRuler:!0,palette:v.value,snapsObj:{h:[],v:[]},shadow:{x:0,y:0,width:0,height:0},panzoomOption:c,isShowReferLine:!0,lines:{h:[0,250],v:[0,500]}});return{zoom:d,moveableRef:o,post:C,state:a,targets:u,onClickGroup:p,onRender:m,onRenderGroup:y,selectoRef:l,hitRate:0,selectByClick:!0,selectFromInside:!1,toggleContinueSelect:t,ratio:0,window,onDragStart:g,onSelectEnd:S,cubes:n}}},Kt={class:"moveable app"},Pt={class:"container",style:{transform:"scale(1)"}},Mt={ref:"elem",class:"elements selecto-area"};function Bt(s,r,i,t,e,n){const u=ke("Moveable"),o=ke("Selecto");return Q(),ee(Ce,null,[T("button",{onClick:r[0]||(r[0]=(...l)=>t.zoom&&t.zoom(...l))},"缩小"),T("div",Kt,[T("div",Pt,[r[1]||(r[1]=T("div",{id:"logo",class:"logo logos"},[T("a",null,[T("img",{src:"https://daybrush.com/selecto/images/256x256.png",class:"selecto"})]),T("a",null,[T("img",{src:"https://daybrush.com/moveable/images/256x256.png"})])],-1)),r[2]||(r[2]=T("h1",null,"Change the Moveable targets by selecting it.",-1)),r[3]||(r[3]=T("p",{class:"description"},'此例子存在意义是,Selecto不能和pzoom共存, 这到不是pazoom的问题,问题出在, Select的定位是fixed,如果父级标签有transform, 那么fixed就会相对于它, 目前看上去是正常的, 但只要把我注释的style="transform: scale(1)",加入到下面 container中,那么马上Slectro选择框定位就不准了',-1)),Se(u,{ref:"moveableRef",target:t.targets,draggable:!0,onClickGroup:t.onClickGroup,onRender:t.onRender,onRenderGroup:t.onRenderGroup},null,8,["target","onClickGroup","onRender","onRenderGroup"]),Se(o,{ref:"selectoRef","drag-container":".elements","selectable-targets":[".target"],"hit-rate":t.hitRate,"select-by-click":t.selectByClick,"select-from-inside":t.selectFromInside,"toggle-continue-select":t.toggleContinueSelect,ratio:t.ratio,"key-container":t.window,onDragStart:t.onDragStart,onSelectEnd:t.onSelectEnd},null,8,["hit-rate","select-by-click","select-from-inside","toggle-continue-select","ratio","key-container","onDragStart","onSelectEnd"]),T("div",Mt,[(Q(!0),ee(Ce,null,lt(t.cubes,l=>(Q(),ee("div",{key:l,class:"cube target"}))),128))],512)])])],64)}const Ft=Me(xt,[["render",Bt],["__scopeId","data-v-a9dc125e"]]);export{Ft as default};
