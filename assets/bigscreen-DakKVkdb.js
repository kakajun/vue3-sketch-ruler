import{p as B}from"./panzoom-PrllC8h6.js";import{d as H,r as a,c as R,p as O,G as Y,b as D,f as s,n as x,u as h,k as K,o as M,_ as T}from"./index-CbjPKQf3.js";const q=""+new URL("left-TebUF-QO.png",import.meta.url).href,F=""+new URL("middle-S_IB64_J.png",import.meta.url).href,G=""+new URL("right-CoXavwZ9.png",import.meta.url).href,J={class:"screen-item left"},N=["src"],Q={class:"screen-item center"},V=["src"],Z={class:"screen-item right"},j=["src"],A=H({__name:"bigscreen",setup($){const n=a(null),o=a(null),C=a(1),t=a(null),r=a(null),c=a(0),i=a(0),w=a(3600),g=a(1080),_=a(.1),v=a("");let d=0,m=0;const W=R(()=>({background:"#f6f7f9",width:c.value+"px",height:i.value+"px",overflow:"hidden"})),I=R(()=>({width:w.value+"px",height:g.value+"px"})),E=e=>{const{scale:l,dimsOut:u}=e.detail;u&&(C.value=l)},p=e=>{e.ctrlKey&&n.value&&(e.preventDefault(),n.value.zoomWithWheel(e))},y=e=>{e.code==="Space"&&!e.repeat&&n.value&&(e.preventDefault(),v.value="grab",n.value.setOptions({disablePan:!1,cursor:"grab"}))},S=e=>{e.code==="Space"&&n.value&&(v.value="",n.value.setOptions({disablePan:!0,cursor:"default"}))},z=()=>{const e=c.value,l=i.value,u=w.value,k=g.value,U=e*(1-_.value)/u,X=l*(1-_.value)/k,f=Math.min(U,X);return d=(e-u)/2/f,m=(l-k)/2/f,f},L=()=>{r.value?(c.value=r.value.clientWidth,i.value=r.value.clientHeight):(c.value=window.innerWidth,i.value=window.innerHeight)},P=()=>{if(o.value&&(o.value.removeEventListener("panzoomchange",E),o.value.parentElement&&o.value.parentElement.removeEventListener("wheel",p)),n.value?.destroy(),t.value=document.querySelector(".canvasedit"),t.value){L();let e=z();console.log(e,"scale"),n.value=B(t.value,{startScale:e,smoothScroll:!0,canvas:!0,disablePan:!0,cursor:"default",startX:d,startY:m}),t.value.addEventListener("panzoomchange",E),t.value.parentElement&&t.value.parentElement.addEventListener("wheel",p,{passive:!1}),o.value=t.value}},b=()=>{if(L(),n.value){const e=z();n.value.reset({startScale:e,startX:d,startY:m,animate:!1})}};return O(()=>{P(),window.addEventListener("resize",b),window.addEventListener("keydown",y),window.addEventListener("keyup",S)}),Y(()=>{window.removeEventListener("resize",b),window.removeEventListener("keydown",y),window.removeEventListener("keyup",S),t.value&&t.value.parentElement&&t.value.parentElement.removeEventListener("wheel",p)}),(e,l)=>(M(),D("div",{class:"wrapper",ref_key:"wrapperRef",ref:r},[l[0]||(l[0]=s("div",{class:"description"},"说明: 该案例展示了如何在大屏(3600*1080)上使用simple-panzoom插件, 实现大屏的缩放(Ctrl + 鼠标滚轮)功能, 拖动(空白键+鼠标拖动)功能.方便前端分组件开发",-1)),s("div",{class:K(["canvasedit-parent",v.value]),style:x(W.value)},[s("div",{class:"canvasedit big-screen-demo",style:x(I.value),ref_key:"elem",ref:t},[s("div",J,[s("img",{src:h(q),alt:"Left Screen"},null,8,N)]),s("div",Q,[s("img",{src:h(F),alt:"Center Screen"},null,8,V)]),s("div",Z,[s("img",{src:h(G),alt:"Right Screen"},null,8,j)])],4)],6)],512))}}),ae=T(A,[["__scopeId","data-v-ac49de37"]]);export{ae as default};
