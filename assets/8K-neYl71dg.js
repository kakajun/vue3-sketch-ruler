import{d as O,r as a,c as N,p as D,G as X,b as Y,f as i,H as B,h as M,I as T,n as R,u as U,k as V,o as J,_ as q}from"./index-CKAW7_m8.js";import{l as F}from"./8k-DnEl78rB.js";import{p as G}from"./panzoom-PrllC8h6.js";const j={class:"control-panel"},A={style:{cursor:"pointer"}},Q=["src"],Z=O({__name:"8K",setup($){const l=a(null),u=a(null),C=a(1),n=a(null),d=a(null),m=a(0),p=a(0),y=a(8800),b=a(5097),z=a(.2),f=a(""),o=a(!1);let h=0,w=0;const W=N(()=>({background:"#f6f7f9",width:m.value+"px",height:p.value+"px",overflow:"hidden"})),K=N(()=>({width:y.value+"px",height:b.value+"px"})),E=e=>{const{scale:t,dimsOut:s,x:v,y:c}=e.detail;console.log("e.detail",e.detail),s&&(C.value=t),o.value&&localStorage.setItem("simple-panzoom-8k-state",JSON.stringify({scale:t,x:v,y:c}))},P=()=>{localStorage.setItem("simple-panzoom-8k-remember",String(o.value)),o.value||localStorage.removeItem("simple-panzoom-8k-state")},g=e=>{e.ctrlKey&&l.value&&(e.preventDefault(),l.value.zoomWithWheel(e))},k=e=>{e.target.tagName!=="INPUT"&&e.code==="Space"&&!e.repeat&&l.value&&(e.preventDefault(),f.value="grab",l.value.setOptions({disablePan:!1,cursor:"grab"}))},_=e=>{e.code==="Space"&&l.value&&(f.value="",l.value.setOptions({disablePan:!0,cursor:"default"}))},x=()=>{const e=m.value,t=p.value,s=y.value,v=b.value,c=e*(1-z.value)/s,r=t*(1-z.value)/v,S=Math.min(c,r);return h=(e-s)/2/S,w=(t-v)/2/S,S},L=()=>{d.value?(m.value=d.value.clientWidth,p.value=d.value.clientHeight):(m.value=window.innerWidth,p.value=window.innerHeight)},H=()=>{if(u.value&&(u.value.removeEventListener("panzoomchange",E),u.value.parentElement&&u.value.parentElement.removeEventListener("wheel",g)),l.value?.destroy(),n.value=document.querySelector(".canvasedit"),n.value){L();let e=x(),t=h,s=w;if(localStorage.getItem("simple-panzoom-8k-remember")==="true"){o.value=!0;const c=localStorage.getItem("simple-panzoom-8k-state");if(c)try{const r=JSON.parse(c);e=Number(r.scale),t=Number(r.x),s=Number(r.y)}catch(r){console.error("Failed to parse saved state",r)}}console.log(e,"scale"),l.value=G(n.value,{startScale:e,smoothScroll:!0,canvas:!0,maxScale:3,minScale:.01,disablePan:!0,cursor:"default",startX:t,startY:s}),n.value.addEventListener("panzoomchange",E),n.value.parentElement&&n.value.parentElement.addEventListener("wheel",g,{passive:!1}),u.value=n.value}},I=()=>{if(L(),l.value&&!o.value){const e=x();l.value.reset({startScale:e,startX:h,startY:w,animate:!1})}};return D(()=>{H(),window.addEventListener("resize",I),window.addEventListener("keydown",k),window.addEventListener("keyup",_)}),X(()=>{window.removeEventListener("resize",I),window.removeEventListener("keydown",k),window.removeEventListener("keyup",_),n.value&&n.value.parentElement&&n.value.parentElement.removeEventListener("wheel",g)}),(e,t)=>(J(),Y("div",{class:"wrapper",ref_key:"wrapperRef",ref:d},[t[2]||(t[2]=i("div",{class:"description"}," 说明: 该案例展示了大分辨率8K大屏(8800*5097)上使用simple-panzoom插件, 依然能做到上下左右居中正确 ",-1)),i("div",j,[i("label",A,[B(i("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s),onChange:P},null,544),[[T,o.value]]),t[1]||(t[1]=M(" 记住位置 (刷新页面后保持位置) ",-1))])]),i("div",{class:V(["canvasedit-parent",f.value]),style:R(W.value)},[i("div",{class:"canvasedit big-screen-demo",style:R(K.value),ref_key:"elem",ref:n},[i("img",{style:{width:"100%",height:"100%"},src:U(F),alt:"Left Screen"},null,8,Q)],4)],6)],512))}}),ne=q(Z,[["__scopeId","data-v-e9e4f1d7"]]);export{ne as default};
