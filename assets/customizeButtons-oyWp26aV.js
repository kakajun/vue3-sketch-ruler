import{d as N,r as p,a as h,l as W,c as u,b as P,e as t,t as m,g as i,i as V,j as H,w as f,m as T,u as g,k as Z,n as k,o as C}from"./index-upp76D7z.js";import{b as K}from"./bg-ByMLKr0n.js";import{f as U}from"./style-BHKo2RDO.js";const A={class:"demo"},F={class:"top font16"},q={class:"scale mr10"},G=["value"],J=["value"],Q=["value"],X=["src"],Y={class:"btns"},ee=["onClick"],te=["onClick"],ne=["onClick"],re=N({__name:"customizeButtons",setup(se){const v=p(0),l=p(),c=h({maxScale:3,minScale:.3,disablePan:!1,disableZoom:!1,contain:"none",handleStartEvent:n=>{n.preventDefault(),console.log("handleStartEvent",n)}}),d=p(!1),b=()=>{l.value&&l.value.zoomOut()};W(()=>{const n=l.value.panzoomInstance,e=document.getElementsByClassName("canvasedit-parent");if(e[0]){const o=e[0];o&&o.addEventListener("wheel",function(a){(a.ctrlKey||a.metaKey)&&n.zoomWithWheel(a)}),document.addEventListener("pointerdown",function(a){a.button===1&&(l.value.cursorClass="grabCursor",n.bind(),n.handleDown(a),a.preventDefault())}),document.addEventListener("pointerup",function(a){a.button===1&&(n.destroy(),console.log("放开了"),l.value.cursorClass="defaultCursor")})}});const w=()=>{l.value&&l.value.reset()},y=()=>{r.isBlack=!r.isBlack,v.value++},r=h({scale:1,isBlack:!1}),B=u(()=>r.isBlack?{bgColor:"transparent",hoverBg:"#fff",hoverColor:"#000",longfgColor:"#BABBBC",fontColor:"#DEDEDE",shadowColor:"#525252",lineColor:"#51d6a9",borderColor:"#B5B5B5"}:{bgColor:"transparent",lineColor:"#51d6a9",lineType:"dashed"}),s=h({thick:20,width:1470,height:800,canvasWidth:1e3,canvasHeight:500,showRuler:!0,palette:B.value,snapsObj:{h:[0,100,200],v:[130]},shadow:{x:0,y:0,width:300,height:300},panzoomOption:c,isShowReferLine:!0,lines:{h:[0,250],v:[0,500]}}),x=u(()=>({width:`${s.width}px`,height:`${s.height}px`})),S=u(()=>Number(r.scale).toFixed(1)),z=u(()=>({width:`${s.canvasWidth}px`,height:`${s.canvasHeight}px`})),E=n=>{r.scale=n.target.value*1,l.value&&l.value.panzoomInstance.zoom(r.scale)},R=n=>{console.log("handleCornerClick",n)},I=n=>{},L=n=>{const e=n.target.value.split(",");s.snapsObj.h=e.map(o=>Number(o))},O=n=>{const e=n.target.value.split(",");s.snapsObj.v=e.map(o=>Number(o))},_=n=>{c.disableZoom=n.target.checked},D=n=>{c.disablePan=n.target.checked},M=n=>{c.contain=n.target.checked?"inside":"none"},j=()=>{s.shadow.x=Math.random()*s.canvasWidth,s.shadow.y=Math.random()*s.canvasHeight};return(n,e)=>(C(),P("div",A,[t("div",F,[e[5]||(e[5]=t("div",{class:"mr10"},"鼠标中键移动画布 ",-1)),t("div",q,m(S.value),1),t("button",{class:"mr10 font16",onClick:e[0]||(e[0]=o=>s.showRuler=!s.showRuler)},m((s.showRuler?"隐藏":"显示")+"规尺"),1),t("button",{class:"mr10 font16",onClick:e[1]||(e[1]=o=>s.isShowReferLine=!s.isShowReferLine)},m((s.isShowReferLine?"隐藏":"显示")+"参考线"),1),t("button",{class:"mr10 font16",onClick:e[2]||(e[2]=o=>d.value=!0)},"锁定参考线"),t("button",{class:"mr10 font16",onClick:j},"模拟阴影切换"),t("button",{class:"mr10 font16",onClick:y},"主题切换"),t("button",{class:"mr10 font16",onClick:i(w,["stop"])},"还原"),t("button",{class:"mr10 font16",onClick:i(b,["stop"])},"缩小"),e[6]||(e[6]=t("span",null,"禁止缩放",-1)),t("input",{type:"checkbox",class:"switch",onChange:_},null,32),e[7]||(e[7]=t("span",null,"禁止移动",-1)),t("input",{type:"checkbox",class:"switch mr10",onChange:D},null,32),e[8]||(e[8]=t("span",null,"框内移动",-1)),t("input",{type:"checkbox",class:"switch mr10",onChange:M},null,32),t("input",{class:"mr10 font16",value:r.scale,type:"range",min:"0.3",max:"3",step:"0.1",defaultValue:"1",onInput:E},null,40,G),e[9]||(e[9]=t("div",{class:"mr10"}," 吸附横线: ",-1)),t("input",{class:"mr10",style:{width:"90px"},value:s.snapsObj.h,onBlur:L},null,40,J),e[10]||(e[10]=t("div",{class:"mr10"}," 吸附纵线: ",-1)),t("input",{class:"mr10",style:{width:"90px"},value:s.snapsObj.v,onBlur:O},null,40,Q),e[11]||(e[11]=t("a",{href:"https://github.com/kakajun/vue3-sketch-ruler",target:"_blank",rel:"noopener noreferrer"},[t("i",{class:"fas fa-external-link-alt"}),V(" git源码 ")],-1))]),t("div",{class:Z(["wrapper",[r.isBlack?"balckwrapper":"whitewrapper"]]),style:k(x.value)},[(C(),H(g(U),T({ref_key:"sketchruleRef",ref:l,key:v.value,scale:r.scale,"onUpdate:scale":e[3]||(e[3]=o=>r.scale=o),"lock-line":d.value,"onUpdate:lockLine":e[4]||(e[4]=o=>d.value=o)},s,{"self-handle":!0,onOnCornerClick:R,onZoomchange:I}),{default:f(()=>[t("div",{"data-type":"page",style:k(z.value)},[t("img",{class:"img-style",src:g(K),alt:""},null,8,X)],4)]),btn:f(({reset:o,zoomIn:a,zoomOut:$})=>[t("div",Y,[t("button",{onClick:i(o,["stop"])},"还原",8,ee),t("button",{onClick:i(a,["stop"])},"放大",8,te),t("button",{onClick:i($,["stop"])},"缩小",8,ne)])]),_:1},16,["scale","lock-line"]))],6)]))}});export{re as default};
