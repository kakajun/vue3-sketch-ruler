import{d as P,r as p,a as h,i as W,c as u,o as f,b as V,e as t,t as m,g as i,j as H,k as T,w as g,n as k,u as C,m as Z,l as K}from"./index-DicYKX8b.js";import{b as U}from"./bg-ByMLKr0n.js";import{_ as A}from"./style-CLsRPear.js";const F={class:"demo"},q={class:"top font16"},G={class:"scale mr10"},J=["value"],Q=["value"],X=["value"],Y=["src"],ee={class:"btns"},te=["onClick"],ne=["onClick"],se=["onClick"],ie=P({__name:"customizeButtons",setup(oe){const v=p(0),a=p(),c=h({maxScale:3,minScale:.3,disablePan:!1,disableZoom:!1,contain:"none",handleStartEvent:n=>{n.preventDefault(),console.log("handleStartEvent",n)}}),d=p(!1),b=()=>{a.value&&a.value.zoomOut()};W(()=>{window.addEventListener("resize",w);const n=a.value.panzoomInstance,e=document.getElementsByClassName("canvasedit-parent");if(e[0]){const o=e[0];o&&o.addEventListener("wheel",function(l){(l.ctrlKey||l.metaKey)&&n.zoomWithWheel(l)}),document.addEventListener("pointerdown",function(l){l.button===1&&(a.value.cursorClass="grabCursor",n.bind(),n.handleDown(l),l.preventDefault())}),document.addEventListener("pointerup",function(l){l.button===1&&(n.destroy(),console.log("放开了"),a.value.cursorClass="defaultCursor")})}});const w=()=>{a.value&&a.value.initPanzoom()},y=()=>{a.value&&a.value.reset()},B=()=>{r.isBlack=!r.isBlack,v.value++},r=h({scale:1,isBlack:!1}),x=u(()=>r.isBlack?{bgColor:"transparent",hoverBg:"#fff",hoverColor:"#000",longfgColor:"#BABBBC",fontColor:"#DEDEDE",shadowColor:"#525252",lineColor:"#51d6a9",borderColor:"#B5B5B5"}:{bgColor:"transparent",lineColor:"#51d6a9",lineType:"dashed"}),s=h({thick:20,width:1470,height:800,canvasWidth:1e3,canvasHeight:500,showRuler:!0,palette:x.value,snapsObj:{h:[0,100,200],v:[130]},shadow:{x:0,y:0,width:300,height:300},panzoomOption:c,isShowReferLine:!0,lines:{h:[0,250],v:[0,500]}}),z=u(()=>({width:`${s.width}px`,height:`${s.height}px`})),S=u(()=>Number(r.scale).toFixed(1)),_=u(()=>({width:`${s.canvasWidth}px`,height:`${s.canvasHeight}px`})),E=n=>{r.scale=n.target.value*1,a.value&&a.value.panzoomInstance.zoom(r.scale)},R=n=>{console.log("handleCornerClick",n)},L=n=>{},I=n=>{const e=n.target.value.split(",");s.snapsObj.h=e.map(o=>Number(o))},O=n=>{const e=n.target.value.split(",");s.snapsObj.v=e.map(o=>Number(o))},D=n=>{c.disableZoom=n.target.checked},M=n=>{c.disablePan=n.target.checked},$=n=>{c.contain=n.target.checked?"inside":"none"},j=()=>{s.shadow.x=Math.random()*s.canvasWidth,s.shadow.y=Math.random()*s.canvasHeight};return(n,e)=>(f(),V("div",F,[t("div",q,[e[5]||(e[5]=t("div",{class:"mr10"},"鼠标中键移动画布 ",-1)),t("div",G,m(S.value),1),t("button",{class:"mr10 font16",onClick:e[0]||(e[0]=o=>s.showRuler=!s.showRuler)},m((s.showRuler?"隐藏":"显示")+"规尺"),1),t("button",{class:"mr10 font16",onClick:e[1]||(e[1]=o=>s.isShowReferLine=!s.isShowReferLine)},m((s.isShowReferLine?"隐藏":"显示")+"参考线"),1),t("button",{class:"mr10 font16",onClick:e[2]||(e[2]=o=>d.value=!0)},"锁定参考线"),t("button",{class:"mr10 font16",onClick:j},"模拟阴影切换"),t("button",{class:"mr10 font16",onClick:B},"主题切换"),t("button",{class:"mr10 font16",onClick:i(y,["stop"])},"还原"),t("button",{class:"mr10 font16",onClick:i(b,["stop"])},"缩小"),e[6]||(e[6]=t("span",null,"禁止缩放",-1)),t("input",{type:"checkbox",class:"switch",onChange:D},null,32),e[7]||(e[7]=t("span",null,"禁止移动",-1)),t("input",{type:"checkbox",class:"switch mr10",onChange:M},null,32),e[8]||(e[8]=t("span",null,"框内移动",-1)),t("input",{type:"checkbox",class:"switch mr10",onChange:$},null,32),t("input",{class:"mr10 font16",value:r.scale,type:"range",min:"0.3",max:"3",step:"0.1",defaultValue:"1",onInput:E},null,40,J),e[9]||(e[9]=t("div",{class:"mr10"}," 吸附横线: ",-1)),t("input",{class:"mr10",style:{width:"90px"},value:s.snapsObj.h,onBlur:I},null,40,Q),e[10]||(e[10]=t("div",{class:"mr10"}," 吸附纵线: ",-1)),t("input",{class:"mr10",style:{width:"90px"},value:s.snapsObj.v,onBlur:O},null,40,X),e[11]||(e[11]=t("a",{href:"https://github.com/kakajun/vue3-sketch-ruler",target:"_blank",rel:"noopener noreferrer"},[t("i",{class:"fas fa-external-link-alt"}),H(" git源码 ")],-1))]),t("div",{class:K(["wrapper",[r.isBlack?"balckwrapper":"whitewrapper"]]),style:k(z.value)},[(f(),T(C(A),Z({ref_key:"sketchruleRef",ref:a,key:v.value,scale:r.scale,"onUpdate:scale":e[3]||(e[3]=o=>r.scale=o),"lock-line":d.value,"onUpdate:lockLine":e[4]||(e[4]=o=>d.value=o)},s,{"self-handle":!0,onOnCornerClick:R,onZoomchange:L}),{default:g(()=>[t("div",{"data-type":"page",style:k(_.value)},[t("img",{class:"img-style",src:C(U),alt:""},null,8,Y)],4)]),btn:g(({reset:o,zoomIn:l,zoomOut:N})=>[t("div",ee,[t("button",{onClick:i(o,["stop"])},"还原",8,te),t("button",{onClick:i(l,["stop"])},"放大",8,ne),t("button",{onClick:i(N,["stop"])},"缩小",8,se)])]),_:1},16,["scale","lock-line"]))],6)]))}});export{ie as default};
