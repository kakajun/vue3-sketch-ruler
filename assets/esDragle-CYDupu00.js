import{r as E,c as X,d as j,l as se,p as D,y as _,b as H,o as P,g as K,n as W,u as M,e as O,A as J,t as be,z as ee,a as Ne,B as Ze,k as ne,f as de,m as he,F as ke,q as Le,j as te,x as Q,C as _e,w as F,D as Je,E as et,G as xe,H as tt,s as Pe,I as Oe,J as Ue,i as at,h as ot}from"./index-DbqzDxNv.js";import{C as nt}from"./panzoom-BtVYCOBo.js";/* empty css              */const st=a=>a<=.25?40:a<=.5?20:a<=1?10:a<=2?5:a<=4?2:1;function lt(a,o,e,t,n,l){l?n.moveTo(a,0):n.moveTo(0,a),n.save(),l?n.translate(a+5,t*.2):n.translate(e*.1,a+32),l||n.rotate(-Math.PI/2),n.fillText(Math.round(o).toString(),4,7),n.restore(),l?n.lineTo(a,t):n.lineTo(e,a),n.stroke(),n.closePath(),n.setTransform(1,0,0,1,0,0)}function ie(a,o,e,t,n,l){t.fillStyle=n.fontShadowColor,t.strokeStyle=n.longfgColor,t.save(),t.translate(a,o),l||t.rotate(-Math.PI/2),t.font="bold 12px  Aria",t.fillText(String(e),0,0),t.restore()}const rt=(a,o,e,t,n,l)=>{const{scale:d,width:s,height:h,ratio:v,palette:m,gridRatio:r,showShadowText:y}=n,{bgColor:p,fontColor:c,shadowColor:u,longfgColor:b}=m,g=l?n.canvasWidth:n.canvasHeight;a.setTransform(1,0,0,1,0,0),a.scale(v,v),a.clearRect(0,0,s,h),a.fillStyle=p,a.fillRect(0,0,s,h);const w=st(d)*r*10,f=w*d,k=Math.floor(o/w)*w,R=(k-o)/w*f,B=o+Math.ceil((l?s:h)/d);if(t){const A=(e-o)*d,Y=t*d;if(a.fillStyle=u,l?a.fillRect(A,0,Y,h):a.fillRect(0,A,s,Y),y)if(l){ie(A,h*.4,Math.round(e),a,m,l);const C=(e+t-o)*d;ie(C,h*.4,Math.round(e+t),a,m,l)}else{ie(s*.4,A,Math.round(e),a,m,l);const C=(e+t-o)*d;ie(s*.4,C,Math.round(e+t),a,m,l)}}a.beginPath(),a.fillStyle=c,a.strokeStyle=b;for(let A=k,Y=0;A<B;A+=w,Y++){const C=R+Y*f+.5;if(A-w<g&&A>g||A==g){const z=R+Y*f+.5+(g-A)*d;lt(z,g,s,h,a,l);return}A>=0&&A<=g&&(A==0?l?(a.moveTo(C,0),a.lineTo(C,h)):(a.moveTo(0,C),a.lineTo(s,C)):l?(a.moveTo(C,20),a.lineTo(C,h/1.3)):(a.moveTo(20,C),a.lineTo(s/1.3,C)),a.save(),A==0?l?a.translate(C-15,h*.01):a.translate(s*.3,C-5):l?a.translate(C-12,h*.05):a.translate(s*.05,C+12),l||a.rotate(-Math.PI/2),g-A>w/2&&(!y||t==0||Math.abs(A-e)>w/2&&Math.abs(A-(e+t))>w/2)&&a.fillText(A.toString(),4,9),a.restore())}a.stroke(),a.closePath()};function we(a,o=100){let e=null;const t=function(...n){e!==null&&clearTimeout(e),e=setTimeout(()=>{a(...n)},o)};return t.cancel=function(){e!==null&&(clearTimeout(e),e=null)},t}function Ve(a,o){const e=E(0),t=E(0),n=E(!1),l=X(()=>({backgroundColor:a.palette.hoverBg,color:a.palette.hoverColor,[o?"top":"left"]:"-8px",[o?"left":"top"]:`${e.value+10}px`})),d=({offsetX:u,offsetY:b})=>{e.value=o?u:b},s=(u,b)=>new Promise(g=>{if(a.lockLine)return;const L=o?u.clientY:u.clientX;d(u);const w=b||t.value;let f=w;const k=B=>{let C=((o?B.clientY:B.clientX)-L)/a.scale+w,z=C;const U=(o?a.snapsObj.h:a.snapsObj.v).slice().sort((q,G)=>Math.abs(z-q)-Math.abs(z-G));U.length&&Math.abs(U[0]-C)<a.snapThreshold/a.scale&&(z=U[0],C=z),f=Math.round(C),t.value=f},R=()=>{document.removeEventListener("mousemove",k),h(f,a.index),g()};document.addEventListener("mousemove",k),document.addEventListener("mouseup",R,{once:!0})}),h=(u,b)=>{var w,f;const g=o?(w=a.lines)==null?void 0:w.h:(f=a.lines)==null?void 0:f.v,L=v(u);if(g)if(L)if(typeof b=="number")g.splice(b,1);else return;else typeof b!="number"?g.push(u):g[b]=u},v=u=>{const b=o?a.canvasHeight:a.canvasWidth;return u<0||u>b},m=X(()=>v(t.value)?"放开删除":`${o?"Y":"X"}：${t.value*a.rate}`),r=we(()=>{n.value=!1},200),y=we(()=>{n.value=!0},200);return{showLabel:n,startValue:t,actionStyle:l,labelContent:m,handleMouseDown:s,handleMouseenter:u=>{a.lockLine||(d(u),y(),r.cancel())},handleMouseLeave:()=>{r()}}}const it={key:0,class:"value"},ut=j({__name:"ruler-line",props:{scale:{},palette:{},index:{},start:{},vertical:{type:Boolean},value:{},canvasWidth:{},canvasHeight:{},lines:{},isShowReferLine:{type:Boolean},rate:{},snapThreshold:{},snapsObj:{},lockLine:{type:Boolean}},setup(a){const o=a,e=E(!1),{actionStyle:t,handleMouseDown:n,labelContent:l,startValue:d,showLabel:s,handleMouseenter:h,handleMouseLeave:v}=Ve(o,o.vertical),m=X(()=>d.value>=o.start),r=X(()=>{const{lineType:p,lockLineColor:c,lineColor:u}=o.palette,b=o.lockLine?c:u??"black",g=o.lockLine||e.value?"none":"auto",L=o.isShowReferLine&&!o.lockLine?o.vertical?"ns-resize":"ew-resize":"default",w=o.vertical?"borderTop":"borderLeft",f=(d.value-o.start)*o.scale;return{[w]:`1px ${p} ${b}`,pointerEvents:g,cursor:L,[o.vertical?"top":"left"]:`${f}px`}});se(()=>{d.value=o.value??0});const y=we(()=>{e.value=!1},1e3);return D([()=>o.scale],()=>{e.value=!0,y()}),(p,c)=>_((P(),H("div",{class:"line",style:W(r.value),onMouseenter:c[0]||(c[0]=K((...u)=>M(h)&&M(h)(...u),["stop"])),onMouseleave:c[1]||(c[1]=K((...u)=>M(v)&&M(v)(...u),["stop"])),onMousedown:c[2]||(c[2]=K((...u)=>M(n)&&M(n)(...u),["stop"]))},[O("div",{class:"action",style:W(M(t))},[M(s)?(P(),H("span",it,be(M(l)),1)):J("",!0)],4)],36)),[[ee,m.value]])}}),dt=j({__name:"index",props:{scale:{},palette:{},vertical:{type:Boolean},showShadowText:{type:Boolean},start:{},width:{},height:{},selectStart:{},selectLength:{},canvasWidth:{},canvasHeight:{},rate:{},gridRatio:{}},emits:["handleDragStart"],setup(a,{emit:o}){const e=a,t=o,n=Ne({isDragging:!1,canvasContext:null});let l=window.devicePixelRatio;const d=E(null);se(()=>{window.addEventListener("resize",s),h(),m(l),r(l)});const s=()=>{l=window.devicePixelRatio,m(l),r(l)},h=()=>{var p;n.canvasContext=((p=d.value)==null?void 0:p.getContext("2d"))||null},v=X(()=>({width:e.width+"px",height:e.height+"px",cursor:e.vertical?"ew-resize":"ns-resize",[e.vertical?"borderRight":"borderBottom"]:`1px solid ${e.palette.borderColor||"#eeeeef"} `}));Ze(()=>{window.removeEventListener("resize",s)});const m=p=>{if(d.value){d.value.width=Math.round(e.width*p),d.value.height=Math.round(e.height*p);const c=n.canvasContext;c&&(c.font=`11px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,c.lineWidth=1,c.textBaseline="middle")}},r=p=>{const c={scale:e.scale,width:e.width,height:e.height,palette:e.palette,canvasWidth:e.canvasWidth,canvasHeight:e.canvasHeight,ratio:p,rate:e.rate,gridRatio:e.gridRatio,showShadowText:e.showShadowText};c.scale=e.scale/e.rate,c.canvasWidth=e.canvasWidth*e.rate,c.canvasHeight=e.canvasHeight*e.rate,n.canvasContext&&rt(n.canvasContext,e.start*e.rate,e.selectStart,e.selectLength,c,!e.vertical)};D([()=>e.width,()=>e.height,()=>e.start,()=>e.palette,()=>e.selectStart,()=>e.selectLength],()=>{r(l)}),D([()=>e.width,()=>e.height],()=>{m(l)});const y=p=>{t("handleDragStart",p)};return(p,c)=>(P(),H("canvas",{ref_key:"canvas",ref:d,class:"ruler",style:W(v.value),onMousedown:K(y,["stop"])},null,36))}}),ht={class:"lines"},ct={key:0,class:"value"},Ee=j({__name:"ruler-wrapper",props:{scale:{},thick:{},canvasWidth:{},canvasHeight:{},palette:{},vertical:{type:Boolean},width:{},height:{},start:{},startOther:{},lines:{},selectStart:{},selectLength:{},isShowReferLine:{type:Boolean},rate:{},snapThreshold:{},snapsObj:{},gridRatio:{},lockLine:{type:Boolean},showShadowText:{type:Boolean}},emits:["changeLineState"],setup(a,{emit:o}){const e=a,{showLabel:t,actionStyle:n,handleMouseenter:l,handleMouseLeave:d,handleMouseDown:s,labelContent:h,startValue:v}=Ve(e,!e.vertical),m=E(!1),r=E(!1),y=X(()=>e.vertical?"v-container":"h-container"),p=o,c=X(()=>{var g,L;return e.vertical?(g=e.lines)==null?void 0:g.h:(L=e.lines)==null?void 0:L.v}),u=X(()=>{const g=e.palette.lineType;let L=e.vertical?"left":"top",w=e.vertical?"top":"left",f=e.vertical?"borderLeft":"borderBottom";const k=(v.value-e.startOther)*e.scale+e.thick;return{[L]:k+"px",[w]:-e.thick+"px",cursor:e.vertical?"ew-resize":"ns-resize",[f]:`1px ${g} ${e.palette.lineColor}`}}),b=async g=>{const{offsetX:L,offsetY:w}=g,{scale:f,vertical:k,thick:R,startOther:B}=e;r.value=!0,m.value=!1,p("changeLineState",!1);let A=Math.round(B-R/f+(k?L:w)/f);v.value=A,await s(g,A),r.value=!1};return D([()=>e.lockLine],()=>{m.value=e.lockLine}),(g,L)=>(P(),H("div",{class:ne(y.value)},[de(dt,he(g.$props,{onHandleDragStart:b}),null,16),_(O("div",ht,[(P(!0),H(ke,null,Le(c.value,(w,f)=>(P(),te(ut,he({key:w+f,index:f,value:w>>0,ref_for:!0},g.$props),null,16,["index","value"]))),128))],512),[[ee,g.isShowReferLine]]),g.isShowReferLine?_((P(),H("div",{key:0,class:"indicator",style:W(u.value),onMouseenter:L[0]||(L[0]=(...w)=>M(l)&&M(l)(...w)),onMouseleave:L[1]||(L[1]=(...w)=>M(d)&&M(d)(...w))},[O("div",{class:"action",style:W(M(n))},[M(t)?(P(),H("span",ct,be(M(h)),1)):J("",!0)],4)],36)),[[ee,r.value]]):J("",!0)],2))}}),pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAopJREFUOE/FlE9IVEEcx7+/N9ouds1Mu0QUSFZYdIgoUqQoKPBQHsKozpXE7jbTO/U8xLJvn6usBHWQ6hBFXupSkQeVbh0KJEPp0sH+eLGTsKs77xcj78m0ax0E8cHjzZv5zef3/c33xxA24KENYGJzoEEQbNNaN4Zh2OQ4znwYhr9c1/39vwrXVDo0NNS0tLR0GYB5D64BmAMwzMyvlFKz1es10Hw+f4mZ7wHYBeA9gNdENFepVOaEEM3M3OI4Thczn41gt6WUgQ3+C+r7/h0AWQD3mXnYqPA8L9nQ0HCemduIaFpKOWoAhUJhT6VSuQXgOjP3K6W8GLwKzeVyp4jonR0QBEErM48w8zFLyayUsjX+z+VyHhHdZebTSqkxM78CHRgYOKS1/ghgVErZY214RkQ7ADyRUj72ff8qgCtmXUrZGcf5vv8CwEUhxOF0Ov1pBRpla5dSdseBhUJhpznH6tIsZb1KqacW+BGArUaUXX63UuplHJTNZjuEEONSyhozfd/n6mQ1RkXZL2itz7mu+80EDA4ONi8vL/8AcM2UbikyR2BU9cSmmTU70YqKIAj2hWFo2uenlHK/BRg3Y2aeNO5GyU8S0ZbFxcUuz/NKEXAGQKPjOCcymcyX1dIi8DSAiWQyeaavr68cbSgCuBknYubnQoj+TCYzUywWE6VS6S2ADsdx2gxw1X3L7SNENMbMnwE8qK+vf5NKpRaMaeVyeW8ikfiaSqW+R7BuZr5BRMe11p2u607U9Gk8kc/ntzPzQwCmExYATDLzVBiGE0KIowAOADDf3QA+aK2VDaxRajto3K+rq+tl5nYAzQBamHmeiOYBTGmtR6ph/1Rqg9c73pz7dD1qN0TpHyNQRCUDJXrAAAAAAElFTkSuQmCC",ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAjtJREFUOE/NlD9oFEEUxn9v9ghC0hpRUogIAUmniGAT/5Q2FrETPSNRJILg7RwimI0ox85eQFCEBGIUO1PYpFM0jSConQoBEZGgGPsgl+w+2eM2bC57SopAFqYZ3v7m+977ZoQt+GQLmGxPaBiGgYiMWWvXBHZUGoZhH3BERPYC+4F+4Keq/urt7b1RLpf/ZEBVHa9Wq0HWyg3QKIoGVPU8cA7wgK/pUtXPQJ8xZk+pVBpuNBqXUoUiEvi+P56fzTpo6+SbwHNg1lo7WzTITGEKXFlZeeB53tVCpa3CK8AFa+1cBgvD8LKIXAQOJkkyICJDeYVBEJS6u7s/qeoLa+1o+l9TqXNuBLhmjDlbqVQ+5ICjInIfOBPH8W9jzGCR5YmJiRNxHM+papgqzqDvgSlr7VTernPuO3An3c9bBt74vv+yrdaKyLDv+/1Sq9UGPc97nY9EVuycU2AQOA7cAm4Dr4D5TvVxHB9rKo2iaEFVp621Ln96FEUngaOqGmSxabVqsh3a2h+x1h5qQjNrae/yE4+iaCwDJkky73neTuBZe129Xk+H+BS4l7ZqLVIZ2BhzuFKpvMsDVXXWGPMxFdAedOfcKeCRqj7MYrUhpz09PfXl5eXrectFWXXODQHpOq2qd/95o/JXr6ura3J1dXU6SZIfwKKIHAD2tVYMPBGRx77vN10UXtO85fTkmZmZHUtLSzUR2QXsBhaAL6r6DXhbrVYXi1yss59GqOgub/bN3Z7v6X/tb9Zmp/q/kN8s+lJb8oEAAAAASUVORK5CYII=",vt={class:"sketch-ruler"},gt=j({__name:"index",props:{showRuler:{type:Boolean,default:!0},eyeIcon:{},closeEyeIcon:{},scale:{default:1},rate:{default:1},thick:{default:16},palette:{},width:{default:1400},height:{default:800},paddingRatio:{default:.2},autoCenter:{type:Boolean,default:!0},shadow:{default:()=>({x:0,y:0,width:0,height:0})},lines:{default:()=>({h:[],v:[]})},isShowReferLine:{type:Boolean,default:!0},canvasWidth:{default:700},canvasHeight:{default:700},snapsObj:{default:()=>({h:[],v:[]})},snapThreshold:{default:5},gridRatio:{default:1},lockLine:{type:Boolean,default:!1},selfHandle:{type:Boolean,default:!1},showShadowText:{type:Boolean,default:!0},panzoomOption:{}},emits:["onCornerClick","update:scale","zoomchange","update:lockLine"],setup(a,{expose:o,emit:e}){_e(i=>({"1d45d285":I.value}));const t=a,n=e,l=E(null),d=E(0),s=E(0);let h=0,v=0;const m=E(1),r=E(t.isShowReferLine),y=E(null),p=E("defaultCursor"),c=X(()=>({bgColor:"#f6f7f9",longfgColor:"#BABBBC",fontColor:"#7D8694",fontShadowColor:"#106ebe",shadowColor:"#e9f7fe",lineColor:"#51d6a9",lineType:"solid",lockLineColor:"#d4d7dc",hoverBg:"#000",hoverColor:"#fff",borderColor:"#eeeeef",...t.palette})),u=X(()=>({backgroundImage:r.value?`url(${t.eyeIcon??pt})`:`url(${t.closeEyeIcon??ft})`,width:t.thick+"px",height:t.thick+"px",borderRight:`1px solid ${c.value.borderColor}`,borderBottom:`1px solid ${c.value.borderColor}`})),b=X(()=>({background:c.value.bgColor,width:g.value+"px",height:L.value+"px"})),g=X(()=>t.width-t.thick),L=X(()=>t.height-t.thick),w=i=>{var S;(i.ctrlKey||i.metaKey)&&((S=y.value)==null||S.zoomWithWheel(i))},f=i=>{var T;const S=document.activeElement;S!=null&&S.closest(".monaco-editor")||(S==null?void 0:S.tagName)==="INPUT"||(S==null?void 0:S.tagName)==="TEXTAREA"||(S==null?void 0:S.getAttribute("contenteditable"))==="true"||i.key===" "&&(p.value="grabCursor",(T=y.value)==null||T.bind(),i.preventDefault())},k=i=>{var T;const S=document.activeElement;S!=null&&S.closest(".monaco-editor")||(S==null?void 0:S.tagName)==="INPUT"||(S==null?void 0:S.tagName)==="TEXTAREA"||(S==null?void 0:S.getAttribute("contenteditable"))==="true"||i.key===" "&&((T=y.value)==null||T.destroy(),p.value="defaultCursor")};se(()=>{if(A(),!t.selfHandle&&l.value){const i=l.value.parentElement;if(!i)return;i.addEventListener("wheel",w),document.addEventListener("keydown",f),document.addEventListener("keyup",k)}});const R=i=>({noBind:!0,startScale:i,startX:h,startY:v,smoothScroll:!0,canvas:!0,...t.panzoomOption}),B=i=>{const{scale:S,dimsOut:T}=i.detail;if(T){n("update:scale",S),m.value=S;const ae=(T.parent.left-T.elem.left)/S,fe=(T.parent.top-T.elem.top)/S;d.value=ae,n("zoomchange",i.detail),s.value=fe}},A=()=>{if(l.value=document.querySelector(".canvasedit"),l.value){let i=t.scale;t.autoCenter&&(i=Y()),y.value=nt(l.value,R(i)),l.value&&l.value.addEventListener("panzoomchange",B)}},Y=()=>{const i=g.value*(1-t.paddingRatio)/t.canvasWidth,S=L.value*(1-t.paddingRatio)/t.canvasHeight,T=Math.min(i,S);return h=g.value/2-t.canvasWidth/2,T<1?v=(t.canvasHeight*T/2-t.canvasHeight/2)/T-(t.canvasHeight*T-L.value)/T/2:T>1?v=(t.canvasHeight*T-t.canvasHeight)/2/T+(L.value-t.canvasHeight*T)/T/2:v=0,T},C=()=>{var i;return(i=y.value)==null?void 0:i.reset()},z=()=>{var i;return(i=y.value)==null?void 0:i.zoomIn()},V=()=>{var i;return(i=y.value)==null?void 0:i.zoomOut()},U=()=>{var i;(i=y.value)==null||i.setOptions(R(t.scale))},q=()=>{r.value=!r.value,n("onCornerClick",r.value)},G=i=>{n("update:lockLine",i)},I=X(()=>t.thick+"px");return D([()=>t.isShowReferLine],()=>{r.value=t.isShowReferLine}),D([()=>t.canvasWidth,()=>t.canvasHeight,()=>t.width,()=>t.height],()=>{A()}),D(()=>t.panzoomOption,()=>{U()},{deep:!0}),o({initPanzoom:A,panzoomInstance:y,reset:C,zoomIn:z,zoomOut:V,cursorClass:p}),(i,S)=>(P(),H("div",vt,[Q(i.$slots,"btn",{reset:C,zoomIn:z,zoomOut:V}),O("div",{class:ne(["canvasedit-parent",p.value]),style:W(b.value)},[O("div",{class:ne(["canvasedit",p.value])},[Q(i.$slots,"default")],2)],6),_(de(Ee,{style:W({marginLeft:i.thick+"px",width:g.value+"px"}),vertical:!1,width:i.width,height:i.thick,"is-show-refer-line":r.value,thick:i.thick,start:d.value,"start-other":s.value,lines:i.lines,"select-start":i.shadow.x,"snap-threshold":i.snapThreshold,"snaps-obj":i.snapsObj,"select-length":i.shadow.width,scale:m.value,palette:c.value,"canvas-width":i.canvasWidth,"show-shadow-text":i.showShadowText,"canvas-height":i.canvasHeight,rate:i.rate,"grid-ratio":i.gridRatio,"lock-line":i.lockLine,onChangeLineState:G},null,8,["style","width","height","is-show-refer-line","thick","start","start-other","lines","select-start","snap-threshold","snaps-obj","select-length","scale","palette","canvas-width","show-shadow-text","canvas-height","rate","grid-ratio","lock-line"]),[[ee,i.showRuler]]),_(de(Ee,{style:W({marginTop:i.thick+"px",top:0,height:L.value+"px"}),vertical:!0,width:i.thick,height:i.height,"is-show-refer-line":r.value,thick:i.thick,start:s.value,"start-other":d.value,lines:i.lines,"select-start":i.shadow.y,"select-length":i.shadow.height,"snap-threshold":i.snapThreshold,"snaps-obj":i.snapsObj,scale:m.value,palette:c.value,"canvas-width":i.canvasWidth,"canvas-height":i.canvasHeight,"show-shadow-text":i.showShadowText,rate:i.rate,"grid-ratio":i.gridRatio,"lock-line":i.lockLine,onChangeLineState:G},null,8,["style","width","height","is-show-refer-line","thick","start","start-other","lines","select-start","select-length","snap-threshold","snaps-obj","scale","palette","canvas-width","canvas-height","show-shadow-text","rate","grid-ratio","lock-line"]),[[ee,i.showRuler]]),_(O("a",{class:"corner",style:W(u.value),onClick:q},null,4),[[ee,i.showRuler]])]))}}),mt={type:{type:String,default:"rect"},tag:{type:[String,Object],default:"div"},resizable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!1},skewable:{type:Boolean,default:!1},boundary:{type:Boolean},disabled:Boolean,width:{type:Number,default:0},height:{type:Number,default:0},left:{type:Number,default:0},top:{type:Number,default:0},zIndex:{type:Number,default:0},angle:{type:Number,default:0},color:{type:String,default:"#3a7afe"},minWidth:{type:Number,default:-1/0},minHeight:{type:Number,default:-1/0},maxWidth:{type:Number,default:0},maxHeight:{type:Number,default:0},aspectRatio:{type:Number},selected:Boolean,snapToGrid:Boolean,gridX:{type:Number,default:50},gridY:{type:Number,default:50},scaleRatio:{type:Number,default:1},disabledKeyEvent:Boolean,border:{type:Boolean,default:!0},resizeList:{type:Array},equalProportion:{type:Boolean},checkCollision:{type:Boolean},snap:Boolean,snapThreshold:{type:Number,default:10},markline:[Boolean,Function],extraLines:Function};function pe(a,o){const e=t=>{o&&o(t),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",e),document.removeEventListener("mouseleave",e),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",e)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",e),document.addEventListener("mouseleave",e),document.addEventListener("touchmove",a),document.addEventListener("touchend",e)}function Z(a){let o=0,e=0;if(wt(a)){const t=a.targetTouches[0];o=t.pageX,e=t.pageY}else o=a.clientX,e=a.clientY;return{clientX:o,clientY:e}}function wt(a){const o=Object.prototype.toString.call(a);return o.substring(8,o.length-1)==="TouchEvent"}const ue=(a=0)=>parseInt(a+"")+"px",ve={n:"top",s:"bottom",e:"right",w:"left",ne:"top-right",nw:"top-left",se:"bottom-right",sw:"bottom-left"},ye=["n","ne","e","se","s","sw","w","nw"],yt={n:0,ne:1,e:2,se:3,s:4,sw:5,w:6,nw:7},bt={0:0,1:1,2:2,3:2,4:3,5:4,6:4,7:5,8:6,9:6,10:7,11:8},kt=(a,o)=>{const e=bt[Math.floor(a/30)],t=(yt[o]+e)%8;return ye[t]},Xe=(a=0,o)=>{let e=[];for(let t=0;t<ye.length;t++){const n=ye[t],[l,d]=ve[n].split("-"),s=kt(a,n),h={[l]:"0%",cursor:s+"-resize",side:ve[n]};if(d)h[d]="0%";else{const v=["top","bottom"].includes(l)?"left":"top";h[v]="50%"}o?o.includes(ve[n])&&e.push(h):e.push(h)}return e},Ae=a=>a*Math.PI/180,Lt=(a,o)=>Math.sqrt(a*a+o*o),N=a=>Math.cos(Ae(a)),x=a=>Math.sin(Ae(a)),At=(a,o,e,t,n,l,d)=>{let{width:s,height:h,centerX:v,centerY:m,rotateAngle:r}=o;const y=s<0?-1:1,p=h<0?-1:1;if(s=Math.abs(s),h=Math.abs(h),["top-left","top-right","bottom-left","bottom-right"].includes(a)){a==="top-right"?t=-t:a==="bottom-left"?e=-e:a==="top-left"&&(e=-e,t=-t);const c=me(s,e,l);s=c.width,e=c.deltaW;const u=ge(h,t,d);h=u.height,t=u.deltaH,n&&(t=e/n,h=s/n)}switch(a){case"right":{const c=me(s,e,l);s=c.width,e=c.deltaW,n?(t=e/n,h=s/n,v+=e/2*N(r)-t/2*x(r),m+=e/2*x(r)+t/2*N(r)):(v+=e/2*N(r),m+=e/2*x(r));break}case"top-right":{v+=e/2*N(r)+t/2*x(r),m+=e/2*x(r)-t/2*N(r);break}case"bottom-right":{v+=e/2*N(r)-t/2*x(r),m+=e/2*x(r)+t/2*N(r);break}case"bottom":{const c=ge(h,t,d);h=c.height,t=c.deltaH,n?(e=t*n,s=h*n,v+=e/2*N(r)-t/2*x(r),m+=e/2*x(r)+t/2*N(r)):(v-=t/2*x(r),m+=t/2*N(r));break}case"bottom-left":{v-=e/2*N(r)+t/2*x(r),m-=e/2*x(r)-t/2*N(r);break}case"left":{e=-e;const c=me(s,e,l);s=c.width,e=c.deltaW,n?(h=s/n,t=e/n,v-=e/2*N(r)+t/2*x(r),m-=e/2*x(r)-t/2*N(r)):(v-=e/2*N(r),m-=e/2*x(r));break}case"top-left":{v-=e/2*N(r)-t/2*x(r),m-=e/2*x(r)+t/2*N(r);break}case"top":{t=-t;const c=ge(h,t,d);h=c.height,t=c.deltaH,n?(s=h*n,e=t*n,v+=e/2*N(r)+t/2*x(r),m+=e/2*x(r)-t/2*N(r)):(v+=t/2*x(r),m-=t/2*N(r));break}}return{position:{centerX:v,centerY:m},size:{width:s*y,height:h*p}}},ge=(a,o,e)=>{const t=a+o;return t>e?a=t:(o=e-a,a=e),{height:a,deltaH:o}},me=(a,o,e)=>{const t=a+o;return t>e?a=t:(o=e-a,a=e),{width:a,deltaW:o}},Ct=({centerX:a,centerY:o,width:e,height:t,angle:n})=>({top:o-t/2,left:a-e/2,width:e,height:t,angle:n}),St=(a,o,e)=>{const{width:t,height:n}=a;return{width:Math.abs(t),height:Math.abs(n),left:o-Math.abs(t)/2,top:e-Math.abs(n)/2}};function ce(a,o){const e=Math.abs(a)%o,t=a>0?o:-o;let n=0;return e>o/2?n=t*Math.ceil(Math.abs(a)/o):n=t*Math.floor(Math.abs(a)/o),n}function Rt(a,o,e){if(!a||!o)return!1;const t=$(a,e),n=$(o,e);return t.left<n.left+n.width&&t.left+t.width>n.left&&t.top<n.top+n.height&&t.top+t.height>n.top}const $=(a,o)=>{var e=a.getBoundingClientRect();return{...e,left:e.left/o,top:e.top/o,right:e.right/o,bottom:e.bottom/o,width:e.width/o,height:e.height/o}},ze=a=>typeof a=="function";function Mt(a,o){let e=null,t=null;const n=X(()=>a.value.offsetParent||document.body),l=X(()=>$(n.value,o.scaleRatio)),d=E({x:[],y:[]}),s=()=>{o.markline&&!ze(o.markline)&&(e||(e=document.querySelector(".es-drager-markline-x")||Ye("x",n.value,o.color)),t||(t=document.querySelector(".es-drager-markline-y")||Ye("y",n.value,o.color)))},h=(p={})=>{if(o.markline){if(ze(o.markline))return o.markline(p);p.left===null?e.style.display="none":(e.style.left=p.left+"px",e.style.backgroundColor=o.color,e.style.display="block"),p.top===null?t.style.display="none":(t.style.top=p.top+"px",t.style.backgroundColor=o.color,t.style.display="block")}},v=()=>{const p=$(a.value,o.scaleRatio),c=Array.from(document.querySelectorAll(".es-drager"));if(o.extraLines){const L=o.extraLines(p)||[];c.push(...L)}const u=[],b=[],g=[];for(let L=0;L<c.length;L++){const w=c[L];w.nodeType===1?w!==a.value&&u.push($(w,o.scaleRatio)):w.showTop||w.showTop===0?g.push(w):(w.showLeft||w.showLeft===0)&&b.push(w)}d.value=Bt(u,p),d.value.x.push(...b),d.value.y.push(...g)},m=()=>{const p={top:null,left:null,diffX:0,diffY:0},c=$(a.value,o.scaleRatio);for(let u=0;u<d.value.y.length;u++){const{top:b,showTop:g}=d.value.y[u];if(Math.abs(b-c.top)<o.snapThreshold){p.diffY=b-c.top,p.top=g-l.value.top;break}}for(let u=0;u<d.value.x.length;u++){const{left:b,showLeft:g}=d.value.x[u];if(Math.abs(b-c.left)<o.snapThreshold){p.diffX=b-c.left,p.left=g-l.value.left;break}}return h(p),p},r=()=>{h({left:null,top:null})},y=p=>{if(!(!o.snap&&!o.markline))switch(p){case"drag-start":v();break;case"drag":return m();case"drag-end":r();break}};return se(()=>{s()}),{marklineEmit:y}}function Ye(a="x",o,e=""){const t=document.createElement("div");return t.classList.add(`es-drager-markline-${a}`),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex="9999",t.style.backgroundColor=e,t.style.display="none",a==="x"?(t.style.height="100%",t.style.width="1px"):(t.style.height="1px",t.style.width="100%"),o.appendChild(t),t}function Bt(a,o){const e={x:[],y:[]},{width:t=0,height:n=0}=o;return a.forEach(l=>{const{top:d,left:s,width:h,height:v}=l;e.y.push({showTop:d,top:d}),e.y.push({showTop:d,top:d-n}),e.y.push({showTop:d+v/2,top:d+v/2-n/2}),e.y.push({showTop:d+v,top:d+v}),e.y.push({showTop:d+v,top:d+v-n}),e.x.push({showLeft:s,left:s}),e.x.push({showLeft:s+h,left:s+h}),e.x.push({showLeft:s+h/2,left:s+h/2-t/2}),e.x.push({showLeft:s+h,left:s+h-t}),e.x.push({showLeft:s,left:s-t})}),e}function Tt(a,o,e,{getBoundary:t,fixBoundary:n,checkDragerCollision:l,emit:d}){let s=0,h=0;return{onKeydown:v=>{let{left:m,top:r}=o.value;if(s||(s=m),h||(h=r),["ArrowRight","ArrowLeft"].includes(v.key)){const y=v.key==="ArrowRight";let p=y?1:-1;a.snapToGrid&&(p=y?a.gridX:-a.gridX),m=m+p}else if(["ArrowUp","ArrowDown"].includes(v.key)){const y=v.key==="ArrowDown";let p=y?1:-1;a.snapToGrid&&(p=y?a.gridY:-a.gridY),r=r+p}if(a.boundary){const[y,p,c,u]=t();[m,r]=n(m,r,y,p,c,u)}o.value.left=m,o.value.top=r},onKeyup:v=>{["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"].includes(v.key)&&a.checkCollision&&l()&&(o.value.left=s,o.value.top=h),s=0,h=0}}}function Et(a,o,e){const t=E(!1),n=E(!1),l=E({width:o.width,height:o.height,left:o.left,top:o.top,angle:o.angle}),{marklineEmit:d}=Mt(a,o),s=new Set;function h(u){if(s.add(u.button),o.disabled)return;t.value=!0,n.value=!0;let{clientX:b,clientY:g}=Z(u);const{left:L,top:w}=l.value;let f=0,k=0,R=0,B=0;o.boundary&&([f,k,R,B]=v()),d("drag-start"),e&&e("drag-start",l.value),pe(A=>{if(s.size>1)return;const{clientX:Y,clientY:C}=Z(A);let z=(Y-b)/o.scaleRatio+L,V=(C-g)/o.scaleRatio+w;if(o.snapToGrid){let{left:U,top:q}=l.value;const G=z-U,I=V-q;z=U+ce(G,o.gridX),V=q+ce(I,o.gridY)}o.boundary&&([z,V]=m(z,V,f,k,R,B)),l.value.left=z,l.value.top=V,e&&e("drag",l.value),Pe(()=>{const U=d("drag");o.snap&&(U.diffX&&(l.value.left+=U.diffX),U.diffY&&(l.value.top+=U.diffY))})},A=>{o.checkCollision&&r()&&(l.value.top=w,l.value.left=L),s.clear(),t.value=!1,d("drag-end"),e&&e("drag-end",l.value)})}const v=()=>{let u=0,b=0;const{left:g,top:L,height:w,width:f,angle:k}=l.value,R=a.value.offsetParent||document.body,B=$(R,o.scaleRatio);if(k){const C=$(a.value,o.scaleRatio);u=C.left-Math.floor(g-(C.width-f)+B.left),b=C.top-Math.floor(L-(C.height-w)+B.top)}const A=B.width-f,Y=B.height-w;return[u,A-u,b,Y-b,B.width,B.height]},m=(u,b,g,L,w,f)=>(u=u<g?g:u,u=u>L?L:u,b=b<w?w:b,b=b>f?f:b,[u,b]),r=()=>{const u=a.value.offsetParent||document.body,b=Array.from(u.children).filter(g=>g!==a.value&&g.classList.contains("es-drager"));for(let g=0;g<b.length;g++){const L=b[g];if(Rt(a.value,L,o.scaleRatio))return!0}},y=()=>{n.value=!1},{onKeydown:p,onKeyup:c}=Tt(o,l,n,{getBoundary:v,fixBoundary:m,checkDragerCollision:r,emit:e});return D(n,u=>{u?(e("focus",u),document.addEventListener("click",y,{once:!0})):e("blur",u),!o.disabledKeyEvent&&(u?(document.addEventListener("keydown",p),document.addEventListener("keyup",c)):(document.removeEventListener("keydown",p),document.removeEventListener("keyup",c)))}),se(()=>{if(a.value){if(!l.value.width&&!l.value.height){const{width:u,height:b}=$(a.value,o.scaleRatio);l.value={...l.value,width:u+2,height:b+2}}if(a.value.addEventListener("mousedown",h),a.value.addEventListener("touchstart",h,{passive:!0}),o.type==="text"){const u=window.getComputedStyle(a.value);l.value.height=parseInt(u.fontSize)}}}),tt(()=>{document.removeEventListener("click",y),document.removeEventListener("keydown",p),document.removeEventListener("keyup",c)}),{isMousedown:t,selected:n,dragData:l,getBoundary:v,checkDragerCollision:r}}const Xt=a=>(Oe("data-v-1b6d4877"),a=a(),Ue(),a),zt=Xt(()=>O("div",{class:"es-drager-rotate-handle"},[O("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[O("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})])],-1)),Yt=j({__name:"rotate",props:{modelValue:{type:Number,default:0},element:{type:Object}},emits:["update:modelValue","rotate","rotate-start","rotate-end"],setup(a,{emit:o}){const e=a,t=o,n=E(null),l=X({get:()=>e.modelValue,set:s=>{t("update:modelValue",s)}});function d(s){if(!e.element)return console.warn("[es-drager] rotate component need drag element property");s.stopPropagation();const{width:h,height:v,left:m,top:r}=e.element.getBoundingClientRect(),y=m+h/2,p=r+v/2;t("rotate-start",l.value),pe(c=>{const{clientX:u,clientY:b}=Z(c),g=y-u,L=p-b,w=Math.atan2(L,g)*180/Math.PI-90;l.value=(w+360)%360,t("rotate",l.value)},()=>{t("rotate-end",l.value)})}return(s,h)=>(P(),H("div",{ref_key:"rotateRef",ref:n,class:"es-drager-rotate",onMousedown:K(d,["stop"]),onTouchstartPassive:d},[Q(s.$slots,"default",{},()=>[zt],!0)],544))}}),He=(a,o)=>{const e=a.__vccOpts||a;for(const[t,n]of o)e[t]=n;return e},Nt=He(Yt,[["__scopeId","data-v-1b6d4877"]]),xt=a=>(Oe("data-v-68f41cf2"),a=a(),Ue(),a),Pt=xt(()=>O("div",{class:"es-drager-skew-handle"},[O("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[O("path",{fill:"currentColor",d:"M870.679273 271.378618L520.946036 65.489455a16.384 16.384 0 0 0-16.644654 0L154.568145 271.378618a16.290909 16.290909 0 0 0 0 28.094837l349.733237 205.889163a16.384 16.384 0 0 0 16.644654 0L870.679273 299.473455a16.290909 16.290909 0 0 0 0-28.094837zM512.623709 452.673164L228.528873 285.426036l284.094836-167.247127 284.094836 167.247127z m-22.574545 71.68L135.521745 322.615855a16.346764 16.346764 0 0 0-24.482909 14.270836l2.485528 405.820509a16.309527 16.309527 0 0 0 8.257163 14.075345l354.518109 201.728a16.346764 16.346764 0 0 0 24.482909-14.270836l-2.485527-405.820509a16.300218 16.300218 0 0 0-8.247854-14.093964z m-326.888728 198.842181l-2.020072-328.927418 287.529891 163.607273 2.020072 328.936727z m725.336437-400.607418L533.969455 524.325236a16.300218 16.300218 0 0 0-8.247855 14.066037l-2.485527 405.820509a16.365382 16.365382 0 0 0 24.4736 14.270836l354.546036-201.728a16.309527 16.309527 0 0 0 8.257164-14.075345l2.485527-405.820509a16.374691 16.374691 0 0 0-24.501527-14.270837z m-41.890909 373.462109L605.016436 838.683927v-57.902545l241.626764-142.671127v57.902545z m0-98.434327L605.016436 740.2496v-57.911855l241.626764-142.63389v57.911854z m0-98.443636L605.016436 641.833891v-57.902546l241.626764-142.63389v57.902545z"})])],-1)),Ot=j({__name:"skew",props:{modelValue:{type:Array,default:()=>[0,0]},element:{type:Object}},emits:["update:modelValue","skew","skew-start","skew-end"],setup(a,{emit:o}){const e=a,t=o,n=E(null),l=X({get:()=>e.modelValue,set:s=>{t("update:modelValue",s)}});function d(s){if(!e.element)return console.warn("[es-drager] skew component need drag element property");s.stopPropagation();const{width:h,height:v}=e.element.getBoundingClientRect(),{clientX:m,clientY:r}=Z(s),[y,p]=l.value;t("skew-start",l.value),pe(c=>{const{clientX:u,clientY:b}=Z(c),g=m-u,L=r-b,w=y+g/h*45,f=p+L/v*45;l.value=[+w.toFixed(2),+f.toFixed(2)],t("skew",l.value)},()=>{t("skew-end",l.value)})}return(s,h)=>(P(),H("div",{ref_key:"skewRef",ref:n,class:"es-drager-skew",onMousedown:d,onTouchstartPassive:d},[Q(s.$slots,"default",{},()=>[Pt],!0)],544))}}),Ut=He(Ot,[["__scopeId","data-v-68f41cf2"]]),Vt=["data-side","onMousedown","onTouchstartPassive"],Ht=O("div",{class:"es-drager-dot-handle"},null,-1),Ce=j({__name:"drager",props:mt,emits:["change","drag","drag-start","drag-end","resize","resize-start","resize-end","rotate","rotate-start","rotate-end","skew","skew-start","skew-end","focus","blur"],setup(a,{emit:o}){const e=a,t=o,n=(f,...k)=>{t(f,...k)},l=E(null),{selected:d,dragData:s,isMousedown:h,getBoundary:v,checkDragerCollision:m}=Et(l,e,n),r=E(Xe(0,e.resizeList)),y=X(()=>e.resizable&&!e.disabled),p=X(()=>e.rotatable&&!e.disabled&&d.value),c=X(()=>e.skewable&&!e.disabled&&d.value),u=X(()=>e.type!="text"?r.value:r.value.filter(f=>!["top","bottom"].includes(f.side))),b=X(()=>{const{width:f,height:k,left:R,top:B,angle:A,skew:Y}=s.value,C={};f&&(C.width=ue(f)),k&&(e.type==="text"?C.fontSize=k+"px":C.height=ue(k));let z=[`translateX(${ue(R)})`,`translateY(${ue(B)})`,`rotate(${A}deg)`];if(Y&&Y.length){let V=`skewX(${Y[0]}deg)`;Y[1]&&(V+=` skewY(${Y[1]}deg)`),z.push(V)}return{...C,zIndex:e.zIndex,transform:z.join(" "),"--es-drager-color":e.color}});function g(f){l.value||(l.value=f.$el||f)}function L(f){r.value=Xe(f,e.resizeList),n("rotate-end",s.value)}function w(f,k){if(e.disabled)return;k.stopPropagation();const{clientX:R,clientY:B}=Z(k),A=R,Y=B,{width:C,height:z,left:V,top:U}=s.value,q=V+C/2,G=U+z/2,I={width:C,height:z,centerX:q,centerY:G,rotateAngle:s.value.angle},i=f.side;let{minWidth:S,minHeight:T,aspectRatio:ae,equalProportion:fe}=e;n("resize-start",s.value,i),e.boundary&&v(),["text","image"].includes(e.type)&&i.includes("-")&&(ae=I.width/I.height),pe(Se=>{const{clientX:We,clientY:Ie}=Z(Se);let le=(We-A)/e.scaleRatio,re=(Ie-Y)/e.scaleRatio;e.snapToGrid&&(le=ce(le,e.gridX),re=ce(re,e.gridY));const De=Math.atan2(re,le),Re=Lt(le,re),Ke=Se.shiftKey,Me=De-Ae(I.rotateAngle),$e=Re*Math.cos(Me),qe=Re*Math.sin(Me),Ge=(fe||Ke)&&!ae?I.width/I.height:ae,{position:{centerX:Be,centerY:Te},size:{width:Qe,height:je}}=At(i,{...I,rotateAngle:I.rotateAngle},$e,qe,Ge,S,T),Fe=Ct({centerX:Be,centerY:Te,width:Qe,height:je,angle:s.value.angle});let oe={...s.value,...St(Fe,Be,Te)};e.maxWidth>0&&(oe.width=Math.min(oe.width,e.maxWidth)),e.maxHeight>0&&(oe.height=Math.min(oe.height,e.maxHeight)),s.value=oe,n("resize",s.value,i)},()=>{e.checkCollision&&m()&&(s.value={...s.value,width:C,height:z,left:V,top:U}),n("resize-end",s.value,i)})}return D(()=>[e.width,e.height,e.left,e.top,e.angle],([f,k,R,B,A],[Y,C,z,V,U])=>{f!==Y&&(s.value.width=f),k!==C&&(s.value.height=k),R!==z&&(s.value.left=R),B!==V&&(s.value.top=B),A!==U&&(s.value.angle=A)}),D(()=>s.value,f=>{t("change",{...f})},{deep:!0}),D(()=>e.selected,f=>{d.value=f},{immediate:!0}),(f,k)=>(P(),te(xe(f.tag),{ref:g,class:ne(["es-drager",`es-drager-${f.type}`,{disabled:f.disabled,dragging:M(h),selected:M(d),border:f.border}]),style:W(b.value),onClick:k[7]||(k[7]=K(()=>{},["stop"])),onMousedown:k[8]||(k[8]=K(()=>{},["stop"]))},{default:F(()=>[Q(f.$slots,"default"),y.value?(P(!0),H(ke,{key:0},Le(u.value,(R,B)=>(P(),H("div",{key:B,class:"es-drager-dot","data-side":R.side,style:W({...R}),onMousedown:A=>w(R,A),onTouchstartPassive:A=>w(R,A)},[Q(f.$slots,"resize",Je(et({side:R.side})),()=>[Ht])],44,Vt))),128)):J("",!0),p.value?(P(),te(Nt,{key:1,modelValue:M(s).angle,"onUpdate:modelValue":k[0]||(k[0]=R=>M(s).angle=R),element:l.value,onRotate:k[1]||(k[1]=R=>n("rotate",M(s))),onRotateStart:k[2]||(k[2]=R=>n("rotate-start",M(s))),onRotateEnd:L},{default:F(()=>[Q(f.$slots,"rotate")]),_:3},8,["modelValue","element"])):J("",!0),c.value?(P(),te(Ut,{key:2,modelValue:M(s).skew,"onUpdate:modelValue":k[3]||(k[3]=R=>M(s).skew=R),element:l.value,onSkew:k[4]||(k[4]=R=>n("skew",M(s))),onSkewStart:k[5]||(k[5]=R=>n("skew-start",M(s))),onSkewEnd:k[6]||(k[6]=R=>n("skew-end",M(s)))},{default:F(()=>[Q(f.$slots,"skew")]),_:3},8,["modelValue","element"])):J("",!0)]),_:3},40,["class","style"]))}}),Wt=a=>{a.component("es-drager",Ce)};Ce.install=Wt;const It={class:"btns"},Dt=["onClick"],Kt=["onClick"],$t=["onClick"],jt=j({__name:"esDragle",setup(a){const o=at(),e=E(),t=E(),n=Ne({scale:1,thick:20,width:1470,height:700,showShadowText:!0,canvasWidth:1e3,canvasHeight:500,showRuler:!0,palette:{bgColor:"transparent",lineType:"dashed"},isShowReferLine:!0,shadow:{x:0,y:0,width:0,height:0},lines:{h:[300],v:[400]}}),l=E({componentList:[{id:"div1",component:"div",text:"div1",width:100,height:100,left:0,top:0},{id:"div2",component:"div",text:"div2",width:100,height:100,top:100,left:100}]}),d=X(()=>({width:`${n.width}px`,height:`${n.height}px`})),s=X(()=>({width:`${n.canvasWidth}px`,height:`${n.canvasHeight}px`,position:"relative",background:o.isLight?"#eff2f5":"#333333"})),h=(m,r)=>{Pe(()=>{n.shadow={x:r.left,y:r.top,width:r.width,height:r.height}}),Object.keys(m).forEach(y=>{r[y]=m[y]})},v=m=>Array.from(document.querySelectorAll(".sketch-ruler .lines .line"));return(m,r)=>(P(),H("div",null,[O("div",{class:ne(["wrapper",[M(o).isLight?"whitewrapper":"blackwrapper"]]),style:W(d.value)},[de(M(gt),he({ref_key:"sketchruleRef",ref:e,scale:n.scale,"onUpdate:scale":r[0]||(r[0]=y=>n.scale=y)},n),{default:F(()=>[O("div",{ref_key:"dragParentRef",ref:t,"data-type":"page",style:W(s.value)},[(P(!0),H(ke,null,Le(l.value.componentList,y=>(P(),te(M(Ce),he({ref_for:!0},y,{key:y.id,snap:"","scale-ratio":n.scale,class:"dragerItem","snap-threshold":10,markline:"","extra-lines":v,onChange:p=>h(p,y)}),{default:F(()=>[(P(),te(xe(y.component),null,{default:F(()=>[ot(be(y.text),1)]),_:2},1024))]),_:2},1040,["scale-ratio","onChange"]))),128))],4)]),btn:F(({reset:y,zoomIn:p,zoomOut:c})=>[O("div",It,[O("button",{onClick:K(y,["stop"])},"还原",8,Dt),O("button",{onClick:K(p,["stop"])},"放大",8,Kt),O("button",{onClick:K(c,["stop"])},"缩小",8,$t)])]),_:1},16,["scale"])],6)]))}});export{jt as default};
