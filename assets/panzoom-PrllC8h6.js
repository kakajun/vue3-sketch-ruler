function K(t,e){let o=t.length;for(;o--;)if(t[o].pointerId===e.pointerId)return o;return-1}function j(t,e){const o=K(t,e);o>-1&&t.splice(o,1),t.push(e)}function lt(t,e){const o=K(t,e);o>-1&&t.splice(o,1)}function G(t){const e=t.slice(0);let o=e.pop(),l;for(;l=e.pop();)o={clientX:(l.clientX-o.clientX)/2+o.clientX,clientY:(l.clientY-o.clientY)/2+o.clientY};return o}var Q={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"};function q(t,e,o,l){Q[t].split(" ").forEach(h=>{e.addEventListener(h,o,l)})}function U(t,e,o){Q[t].split(" ").forEach(l=>{e.removeEventListener(l,o)})}var J=["webkit","moz","ms"],N={};function dt(){return document.createElement("div").style}function tt(t){if(N[t])return N[t];const e=dt();if(t in e)return N[t]=t;const o=t[0].toUpperCase()+t.slice(1);for(let l=J.length-1;l>=0;l--){const h=`${J[l]}${o}`;if(h in e)return N[t]=h}return t}function v(t,e,o){t.style[tt(e)]=o}function ft(t,e){const o=tt("transform");v(t,"transition",`${o} ${e.duration}ms ${e.easing}`)}function pt(t,{x:e,y:o,scale:l},h){v(t,"transform",`scale(${l}) translate(${e}px, ${o}px)`)}function S(t,e,o=window.getComputedStyle(t)){const l=e==="border"?"Width":"";return{left:parseFloat(o[`${e}Left${l}`])||0,right:parseFloat(o[`${e}Right${l}`])||0,top:parseFloat(o[`${e}Top${l}`])||0,bottom:parseFloat(o[`${e}Bottom${l}`])||0}}function ut(t){const e=t.parentNode,o=t.getBoundingClientRect(),l=e.getBoundingClientRect();return{elem:{width:o.width,height:o.height,left:o.left,top:o.top},parent:{width:l.width,height:l.height,left:l.left,top:l.top}}}function b(t){const e=t.parentNode,o=window.getComputedStyle(t),l=window.getComputedStyle(e),h=t.getBoundingClientRect(),p=e.getBoundingClientRect();return{elem:{width:h.width,height:h.height,left:h.left,top:h.top,margin:S(t,"margin",o),border:S(t,"border",o)},parent:{width:p.width,height:p.height,left:p.left,top:p.top,padding:S(e,"padding",l),border:S(e,"border",l)}}}function ht(t){let e=t;for(;e&&e.parentNode;){if(e.parentNode===document)return!0;e=e.parentNode instanceof ShadowRoot?e.parentNode.host:e.parentNode}return!1}function gt(t){const e={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}var et={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,duration:200,easing:"ease-in-out",handleStartEvent:t=>{t.preventDefault(),t.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",setTransform:pt,startX:0,startY:0,startScale:1,step:.3,touchAction:"none",origin:"50% 50%"};function nt(t,e){if(!t||t.nodeType!==1)throw new Error("Panzoom requires an element");if(!ht(t))throw new Error("Panzoom should be called on attached elements");e={...et,...e};const o=t.parentNode;o.style.overflow=e.overflow,o.style.userSelect="none",o.style.touchAction=e.touchAction,(e.canvas?o:t).style.cursor=e.cursor,t.style.userSelect="none",t.style.touchAction=e.touchAction,v(t,"transformOrigin",typeof e.origin=="string"?e.origin:"50% 50%");function l(){o.style.overflow="",o.style.userSelect="",o.style.touchAction="",o.style.cursor="",t.style.cursor="",t.style.userSelect="",t.style.touchAction="",v(t,"transformOrigin","")}function h(n={}){for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);(n.hasOwnProperty("cursor")||n.hasOwnProperty("canvas"))&&(o.style.cursor=t.style.cursor="",(e.canvas?o:t).style.cursor=e.cursor),n.hasOwnProperty("overflow")&&(o.style.overflow=n.overflow),n.hasOwnProperty("touchAction")&&(o.style.touchAction=n.touchAction,t.style.touchAction=n.touchAction)}let p=0,u=0,d=1,Y=!1;M(e.startScale,{animate:!1,force:!0}),setTimeout(()=>{F(e.startX,e.startY,{animate:!1,force:!0})});function rt(n,a){if(a.silent)return;const r=new CustomEvent("panzoomchange",{detail:n});t.dispatchEvent(r)}function z(n,a){const r={x:p,y:u,scale:d};typeof n.animate=="boolean"&&(n.animate?ft(t,n):v(t,"transition","none")),n.setTransform(t,r,n);const f=()=>{const i=n.contain&&n.contain!=="none"?b(t):ut(t);rt({x:p,y:u,scale:d,dimsOut:i,originalEvent:a},n)};return n.animate?setTimeout(f,n.duration+50):requestAnimationFrame(f),r}function W(n,a,r,f){const i={...e,...f},s={x:p,y:u,opts:i};if(!i.force&&i.disablePan===!0)return s;if(n=parseFloat(n),a=parseFloat(a),s.x=n,s.y=a,i.contain&&i.contain!=="none"){const c=b(t),m=c.elem.width/d,g=c.elem.height/d,P=m*r,X=g*r,y=(P-m)/2,w=(X-g)/2;if(i.contain==="inside"){const I=(-c.elem.margin.left-c.parent.padding.left+y)/r,L=(c.parent.width-P-c.parent.padding.left-c.elem.margin.left-c.parent.border.left-c.parent.border.right+y)/r;s.x=Math.max(Math.min(s.x,L),I);const k=(-c.elem.margin.top-c.parent.padding.top+w)/r,Z=(c.parent.height-X-c.parent.padding.top-c.elem.margin.top-c.parent.border.top-c.parent.border.bottom+w)/r;s.y=Math.max(Math.min(s.y,Z),k)}else if(i.contain==="outside"){const I=(-(P-c.parent.width)-c.parent.padding.left-c.parent.border.left-c.parent.border.right+y)/r,L=(y-c.parent.padding.left)/r;s.x=Math.max(Math.min(s.x,L),I);const k=(-(X-c.parent.height)-c.parent.padding.top-c.parent.border.top-c.parent.border.bottom+w)/r,Z=(w-c.parent.padding.top)/r;s.y=Math.max(Math.min(s.y,Z),k)}}return s}function T(n,a){const r={...e,...a},f={scale:d,opts:r};if(!r.force&&r.disableZoom)return f;let i=e.minScale,s=e.maxScale;if(r.contain&&r.contain!=="none"){const c=b(t),m=c.elem.width/d,g=c.elem.height/d;if(m>1&&g>1){const P=c.parent.width-c.parent.border.left-c.parent.border.right,X=c.parent.height-c.parent.border.top-c.parent.border.bottom,y=P/m,w=X/g;e.contain==="inside"?s=Math.min(s,y,w):e.contain==="outside"&&(i=Math.max(i,y,w))}}return f.scale=Math.min(Math.max(n,i),s),f}function F(n,a,r,f){const i=W(n,a,d,r);return p!==i.x||u!==i.y?(p=i.x,u=i.y,z(i.opts,f)):{x:p,y:u,scale:d}}function M(n,a,r){const f=T(n,a),i=f.opts;if(!i.force&&i.disableZoom)return{x:p,y:u,scale:d};n=f.scale;let s=p,c=u;if(i.focal){const g=i.focal;s=(g.x/n-g.x/d+p*n)/n,c=(g.y/n-g.y/d+u*n)/n}const m=W(s,c,n,{relative:!1,force:!0});return p=m.x,u=m.y,d=n,z(i,r)}function _(n,a){const r={...e,animate:!0,...a};return M(d*Math.exp((n?1:-1)*r.step),r)}function ot(n){const a={...e,animate:!0,...n};if(!a.focal){const r=b(t),f=r.parent.width-r.parent.border.left-r.parent.border.right,i=r.parent.height-r.parent.border.top-r.parent.border.bottom,s=r.parent.left+r.parent.border.left+r.parent.padding.left+f/2,c=r.parent.top+r.parent.border.top+r.parent.padding.top+i/2;return $(d*Math.exp(a.step),{clientX:s,clientY:c},a)}return _(!0,n)}function it(n){const a={...e,animate:!0,...n};if(!a.focal){const r=b(t),f=r.parent.width-r.parent.border.left-r.parent.border.right,i=r.parent.height-r.parent.border.top-r.parent.border.bottom,s=r.parent.left+r.parent.border.left+r.parent.padding.left+f/2,c=r.parent.top+r.parent.border.top+r.parent.padding.top+i/2;return $(d*Math.exp(-a.step),{clientX:s,clientY:c},a)}return _(!1,n)}function $(n,a,r,f){const i=b(t),s={width:i.parent.width-i.parent.padding.left-i.parent.padding.right-i.parent.border.left-i.parent.border.right,height:i.parent.height-i.parent.padding.top-i.parent.padding.bottom-i.parent.border.top-i.parent.border.bottom};let c=a.clientX-i.parent.left-i.parent.padding.left-i.parent.border.left-i.elem.margin.left,m=a.clientY-i.parent.top-i.parent.padding.top-i.parent.border.top-i.elem.margin.top;e.origin!=="0 0"&&(c-=i.elem.width/d/2,m-=i.elem.height/d/2);const g={x:c/s.width*(s.width*n),y:m/s.height*(s.height*n)};return M(n,{...r,animate:!1,focal:g},f)}function at(n,a){n.preventDefault();const r={...e,...a,animate:!1},i=(n.deltaY===0&&n.deltaX?n.deltaX:n.deltaY)<0?1:-1,s=T(d*Math.exp(i*r.step/3),r).scale;return $(s,n,r,n)}function ct(n){const a={...e,animate:!0,force:!0,...n};d=T(a.startScale,a).scale;const r=W(a.startX,a.startY,d,a);return p=r.x,u=r.y,z(a)}let A,E,O,C;const x=[];function H(n){j(x,n),Y=!0,e.handleStartEvent(n),A=p,E=u;const a=G(x);O=a.clientX,C=a.clientY}function R(n){if(!Y||A===void 0||E===void 0||O===void 0||C===void 0)return;j(x,n);const a=G(x),r=d;F(A+(a.clientX-O)/r,E+(a.clientY-C)/r,{animate:!1},n)}function B(n){lt(x,n),Y&&(Y=!1,A=E=O=C=void 0)}let D=!1;function V(){D||(D=!0,q("down",e.canvas?o:t,H),q("move",document,R,{passive:!0}),q("up",document,B,{passive:!0}))}function st(){D=!1,U("down",e.canvas?o:t,H),U("move",document,R),U("up",document,B)}return e.noBind||V(),{bind:V,destroy:st,getPan:()=>({x:p,y:u}),getScale:()=>d,getOptions:()=>gt(e),handleDown:H,handleMove:R,handleUp:B,pan:F,reset:ct,resetStyle:l,setOptions:h,setStyle:(n,a)=>v(t,n,a),zoom:M,zoomIn:ot,zoomOut:it,zoomToPoint:$,zoomWithWheel:at}}nt.defaultOptions=et;var mt=nt;export{mt as p};
