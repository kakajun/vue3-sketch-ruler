import{d as P,i as V,r as p,a as h,c,b as H,e as t,t as u,g as r,h as T,j as W,w as f,m as Z,u as m,n as g,k as A,o as k}from"./index-BUVo8PGg.js";import{f as U}from"./index-CSufgl_l.js";/* empty css              */import{b as F}from"./bg-ByMLKr0n.js";const J={class:"demo"},q={class:"top font16"},G={class:"scale mr10"},K={class:"scale mr10"},Q={class:"top font16"},X=["value"],Y=["value"],ee=["value"],te=["src"],se={class:"btns"},oe=["onClick"],ne=["onClick"],ae=["onClick"],de=P({__name:"comprehensive",setup(le){const v=V(),b=p(0),a=p(),i=h({canvas:!0,maxScale:3,minScale:.3,disablePan:!1,disableZoom:!1,contain:"none",handleStartEvent:s=>{s.preventDefault(),console.log("handleStartEvent",s)}}),d=p(!1),C=()=>{a.value&&a.value.zoomOut()},w=()=>{a.value&&a.value.reset()},l=h({scale:1}),x=c(()=>v.isLight?{bgColor:"transparent",lineColor:"#51d6a9",lineType:"dashed"}:{bgColor:"transparent",hoverBg:"#fff",bb:"#fff",hoverColor:"#000",longfgColor:"#BABBBC",fontColor:"#DEDEDE",shadowColor:"#525252",lineColor:"#51d6a9",borderColor:"#B5B5B5"}),o=h({thick:20,width:1470,height:750,showShadowText:!1,canvasWidth:1920,canvasHeight:1080,showRuler:!0,snapsObj:{h:[0,100,200],v:[130]},shadow:{x:0,y:0,width:300,height:300},panzoomOption:i,isShowReferLine:!0,lines:{h:[0,250],v:[0,500]}}),y=c(()=>({width:`${o.width}px`,height:`${o.height}px`})),S=c(()=>Number(l.scale).toFixed(1)),B=c(()=>({width:`${o.canvasWidth}px`,height:`${o.canvasHeight}px`})),_=s=>{const e=s.target;e&&(l.scale=Number(e.value),a.value&&a.value.panzoomInstance.zoom(l.scale))},z=s=>{console.log("handleCornerClick",s)},M=s=>{},O=s=>{const e=s.target.value.split(",");o.snapsObj.h=e.map(n=>Number(n))},R=s=>{const e=s.target.value.split(",");o.snapsObj.v=e.map(n=>Number(n))},L=s=>{const e=s.target;e&&(i.disableZoom=e.checked)},j=s=>{const e=s.target;e&&(i.disablePan=e.checked)},D=s=>{const e=s.target;e&&(i.contain=e.checked?"inside":"none")},I=()=>{o.shadow.x=Math.random()*o.canvasWidth,o.shadow.y=Math.random()*o.canvasHeight},N=s=>{console.log("handleMouseDown",s)};return(s,e)=>(k(),H("div",J,[t("div",q,[e[5]||(e[5]=t("div",{class:"mr10"}," Ctrl+鼠标滚轮缩放画布 ",-1)),e[6]||(e[6]=t("div",{class:"mr10"}," 空白键+鼠标左键键移动画布 ",-1)),t("div",G," 缩放比:"+u(S.value),1),t("div",K," 参考线:"+u(JSON.stringify(o.lines)),1)]),t("div",Q,[t("button",{class:"mr10 font16",onClick:e[0]||(e[0]=n=>o.showRuler=!o.showRuler)},u((o.showRuler?"隐藏":"显示")+"规尺"),1),t("button",{class:"mr10 font16",onClick:e[1]||(e[1]=n=>o.isShowReferLine=!o.isShowReferLine)},u((o.isShowReferLine?"隐藏":"显示")+"参考线"),1),t("button",{class:"mr10 font16",onClick:e[2]||(e[2]=n=>d.value=!0)},"锁定参考线"),t("button",{class:"mr10 font16",onClick:I},"模拟阴影切换"),t("button",{class:"mr10 font16",onClick:r(w,["stop"])},"还原"),t("button",{class:"mr10 font16",onClick:r(C,["stop"])},"缩小"),e[7]||(e[7]=t("span",null,"禁止缩放",-1)),t("input",{type:"checkbox",class:"switch",onChange:L},null,32),e[8]||(e[8]=t("span",null,"禁止移动",-1)),t("input",{type:"checkbox",class:"switch mr10",onChange:j},null,32),e[9]||(e[9]=t("span",null,"框内移动",-1)),t("input",{type:"checkbox",class:"switch mr10",onChange:D},null,32),t("input",{class:"mr10 font16",value:l.scale,type:"range",min:"0.3",max:"3",step:"0.1",defaultValue:"1",onInput:_},null,40,X),e[10]||(e[10]=t("div",{class:"mr10"}," 吸附横线: ",-1)),t("input",{class:"mr10",style:{width:"90px"},value:o.snapsObj.h,onBlur:O},null,40,Y),e[11]||(e[11]=t("div",{class:"mr10"}," 吸附纵线: ",-1)),t("input",{class:"mr10",style:{width:"90px"},value:o.snapsObj.v,onBlur:R},null,40,ee),e[12]||(e[12]=t("a",{href:"https://github.com/kakajun/vue3-sketch-ruler",target:"_blank",rel:"noopener noreferrer"},[t("i",{class:"fas fa-external-link-alt"}),T(" git源码 ")],-1))]),t("div",{class:A(["wrapper",[m(v).isLight?"whitewrapper":"blackwrapper"]]),style:g(y.value)},[(k(),W(m(U),Z({ref_key:"sketchruleRef",ref:a,key:b.value,scale:l.scale,"onUpdate:scale":e[3]||(e[3]=n=>l.scale=n),"lock-line":d.value,"onUpdate:lockLine":e[4]||(e[4]=n=>d.value=n)},o,{palette:x.value,onOnCornerClick:z,onZoomchange:M}),{default:f(()=>[t("div",{"data-type":"page",style:g(B.value),onMousedown:N},[t("img",{class:"img-style",src:m(F),alt:""},null,8,te)],36)]),btn:f(({reset:n,zoomIn:$,zoomOut:E})=>[t("div",se,[t("button",{onClick:r(n,["stop"])},"还原",8,oe),t("button",{onClick:r($,["stop"])},"放大",8,ne),t("button",{onClick:r(E,["stop"])},"缩小",8,ae)])]),_:1},16,["scale","lock-line","palette"]))],6)]))}});export{de as default};
