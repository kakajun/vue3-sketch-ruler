import{d as ee,r as N,c as A,j as U,q as O,o as T,w as V,x as I,b as W,y as le,F as ke,s as be,n as Z,z as De,A as We,f as S,u as R,k as xe,g as D,B as Le,p as Me,C as qe,v as _e,D as Ce,E as ze,i as je,a as Oe,e as Ue,m as ge,h as Fe,t as Ke}from"./index-D3Mk6K2d.js";import{o as Ge}from"./style-DRAfJ-Zt.js";const Qe={type:{type:String,default:"rect"},tag:{type:[String,Object],default:"div"},resizable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!1},skewable:{type:Boolean,default:!1},boundary:{type:Boolean},disabled:Boolean,width:{type:Number,default:0},height:{type:Number,default:0},left:{type:Number,default:0},top:{type:Number,default:0},zIndex:{type:Number,default:0},angle:{type:Number,default:0},skew:{type:Array,default:()=>[0,0]},color:{type:String,default:"#3a7afe"},minWidth:{type:Number,default:-1/0},minHeight:{type:Number,default:-1/0},maxWidth:{type:Number,default:0},maxHeight:{type:Number,default:0},aspectRatio:{type:Number},selected:Boolean,snapToGrid:Boolean,gridX:{type:Number,default:50},gridY:{type:Number,default:50},scaleRatio:{type:Number,default:1},disabledKeyEvent:Boolean,border:{type:Boolean,default:!0},resizeList:{type:Array},equalProportion:{type:Boolean},checkCollision:{type:Boolean},snap:Boolean,snapThreshold:{type:Number,default:10},markline:[Boolean,Function],extraLines:Function};function te(o,a){const e=t=>{a&&a(t),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",e),document.removeEventListener("mouseleave",e),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",e)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",e),document.addEventListener("mouseleave",e),document.addEventListener("touchmove",o),document.addEventListener("touchend",e)}function H(o){let a=0,e=0;if(Ze(o)){const t=o.targetTouches[0];a=t.pageX,e=t.pageY}else a=o.clientX,e=o.clientY;return{clientX:a,clientY:e}}function Ze(o){const a=Object.prototype.toString.call(o);return a.substring(8,a.length-1)==="TouchEvent"}const Q=(o=0)=>parseInt(o+"")+"px",se={n:"top",s:"bottom",e:"right",w:"left",ne:"top-right",nw:"top-left",se:"bottom-right",sw:"bottom-left"},ie=["n","ne","e","se","s","sw","w","nw"],Je={n:0,ne:1,e:2,se:3,s:4,sw:5,w:6,nw:7},et={0:0,1:1,2:2,3:2,4:3,5:4,6:4,7:5,8:6,9:6,10:7,11:8},tt=(o,a)=>{const e=et[Math.floor(o/30)],t=(Je[a]+e)%8;return ie[t]},me=(o=0,a)=>{let e=[];for(let t=0;t<ie.length;t++){const s=ie[t],[n,u]=se[s].split("-"),l=tt(o,s),i={[n]:"0%",cursor:l+"-resize",side:se[s]};if(u)i[u]="0%";else{const c=["top","bottom"].includes(n)?"left":"top";i[c]="50%"}a?a.includes(se[s])&&e.push(i):e.push(i)}return e},de=o=>o*Math.PI/180,at=(o,a)=>Math.sqrt(o*o+a*a),L=o=>Math.cos(de(o)),M=o=>Math.sin(de(o)),ot=(o,a,e,t,s,n,u)=>{let{width:l,height:i,centerX:c,centerY:v,rotateAngle:r}=a;const m=l<0?-1:1,p=i<0?-1:1;if(l=Math.abs(l),i=Math.abs(i),["top-left","top-right","bottom-left","bottom-right"].includes(o)){o==="top-right"?t=-t:o==="bottom-left"?e=-e:o==="top-left"&&(e=-e,t=-t);const f=ne(l,e,n);l=f.width,e=f.deltaW;const d=re(i,t,u);i=d.height,t=d.deltaH,s&&(t=e/s,i=l/s)}switch(o){case"right":{const f=ne(l,e,n);l=f.width,e=f.deltaW,s?(t=e/s,i=l/s,c+=e/2*L(r)-t/2*M(r),v+=e/2*M(r)+t/2*L(r)):(c+=e/2*L(r),v+=e/2*M(r));break}case"top-right":{c+=e/2*L(r)+t/2*M(r),v+=e/2*M(r)-t/2*L(r);break}case"bottom-right":{c+=e/2*L(r)-t/2*M(r),v+=e/2*M(r)+t/2*L(r);break}case"bottom":{const f=re(i,t,u);i=f.height,t=f.deltaH,s?(e=t*s,l=i*s,c+=e/2*L(r)-t/2*M(r),v+=e/2*M(r)+t/2*L(r)):(c-=t/2*M(r),v+=t/2*L(r));break}case"bottom-left":{c-=e/2*L(r)+t/2*M(r),v-=e/2*M(r)-t/2*L(r);break}case"left":{e=-e;const f=ne(l,e,n);l=f.width,e=f.deltaW,s?(i=l/s,t=e/s,c-=e/2*L(r)+t/2*M(r),v-=e/2*M(r)-t/2*L(r)):(c-=e/2*L(r),v-=e/2*M(r));break}case"top-left":{c-=e/2*L(r)-t/2*M(r),v-=e/2*M(r)+t/2*L(r);break}case"top":{t=-t;const f=re(i,t,u);i=f.height,t=f.deltaH,s?(l=i*s,e=t*s,c+=e/2*L(r)+t/2*M(r),v+=e/2*M(r)-t/2*L(r)):(c+=t/2*M(r),v-=t/2*L(r));break}}return{position:{centerX:c,centerY:v},size:{width:l*m,height:i*p}}},re=(o,a,e)=>{const t=o+a;return t>e?o=t:(a=e-o,o=e),{height:o,deltaH:a}},ne=(o,a,e)=>{const t=o+a;return t>e?o=t:(a=e-o,o=e),{width:o,deltaW:a}},lt=({centerX:o,centerY:a,width:e,height:t,angle:s})=>({top:a-t/2,left:o-e/2,width:e,height:t,angle:s}),st=(o,a,e)=>{const{width:t,height:s}=o;return{width:Math.abs(t),height:Math.abs(s),left:a-Math.abs(t)/2,top:e-Math.abs(s)/2}};function J(o,a){const e=Math.abs(o)%a,t=o>0?a:-a;let s=0;return e>a/2?s=t*Math.ceil(Math.abs(o)/a):s=t*Math.floor(Math.abs(o)/a),s}function rt(o,a,e){if(!o||!a)return!1;const t=P(o,e),s=P(a,e);return t.left<s.left+s.width&&t.left+t.width>s.left&&t.top<s.top+s.height&&t.top+t.height>s.top}const P=(o,a)=>{var e=o.getBoundingClientRect();return{...e,left:e.left/a,top:e.top/a,right:e.right/a,bottom:e.bottom/a,width:e.width/a,height:e.height/a}},we=o=>typeof o=="function";function nt(o,a){let e=null,t=null;const s=A(()=>o.value.offsetParent||document.body),n=A(()=>P(s.value,a.scaleRatio)),u=N({x:[],y:[]}),l=()=>{a.markline&&!we(a.markline)&&(e||(e=document.querySelector(".es-drager-markline-x")||ye("x",s.value,a.color)),t||(t=document.querySelector(".es-drager-markline-y")||ye("y",s.value,a.color)))},i=(p={})=>{if(a.markline){if((!e||!t)&&l(),we(a.markline))return a.markline(p);p.left===null?e.style.display="none":(e.style.left=p.left+"px",e.style.backgroundColor=a.color,e.style.display="block"),p.top===null?t.style.display="none":(t.style.top=p.top+"px",t.style.backgroundColor=a.color,t.style.display="block")}},c=()=>{const p=P(o.value,a.scaleRatio),f=Array.from(document.querySelectorAll(".es-drager"));if(a.extraLines){const x=a.extraLines(p)||[];f.push(...x)}const d=[],w=[],y=[];for(let x=0;x<f.length;x++){const b=f[x];b.nodeType===1?b!==o.value&&d.push(P(b,a.scaleRatio)):b.showTop||b.showTop===0?y.push(b):(b.showLeft||b.showLeft===0)&&w.push(b)}u.value=it(d,p),u.value.x.push(...w),u.value.y.push(...y)},v=()=>{const p={top:null,left:null,diffX:0,diffY:0},f=P(o.value,a.scaleRatio);for(let d=0;d<u.value.y.length;d++){const{top:w,showTop:y}=u.value.y[d];if(Math.abs(w-f.top)<a.snapThreshold){p.diffY=w-f.top,p.top=y-n.value.top;break}}for(let d=0;d<u.value.x.length;d++){const{left:w,showLeft:y}=u.value.x[d];if(Math.abs(w-f.left)<a.snapThreshold){p.diffX=w-f.left,p.left=y-n.value.left;break}}return i(p),p},r=()=>{i({left:null,top:null})},m=p=>{if(!(!a.snap&&!a.markline))switch(p){case"drag-start":c();break;case"drag":return v();case"drag-end":r();break}};return Me(()=>{l()}),{marklineEmit:m}}function ye(o="x",a,e=""){const t=document.createElement("div");return t.classList.add(`es-drager-markline-${o}`),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex="9999",t.style.backgroundColor=e,t.style.display="none",o==="x"?(t.style.height="100%",t.style.width="1px"):(t.style.height="1px",t.style.width="100%"),a.appendChild(t),t}function it(o,a){const e={x:[],y:[]},{width:t=0,height:s=0}=a;return o.forEach(n=>{const{top:u,left:l,width:i,height:c}=n;e.y.push({showTop:u,top:u}),e.y.push({showTop:u,top:u-s}),e.y.push({showTop:u+c/2,top:u+c/2-s/2}),e.y.push({showTop:u+c,top:u+c}),e.y.push({showTop:u+c,top:u+c-s}),e.x.push({showLeft:l,left:l}),e.x.push({showLeft:l+i,left:l+i}),e.x.push({showLeft:l+i/2,left:l+i/2-t/2}),e.x.push({showLeft:l+i,left:l+i-t}),e.x.push({showLeft:l,left:l-t})}),e}function dt(o,a,e,{getBoundary:t,fixBoundary:s,checkDragerCollision:n,emit:u}){let l=0,i=0;return{onKeydown:c=>{let{left:v,top:r}=a.value;if(l||(l=v),i||(i=r),["ArrowRight","ArrowLeft"].includes(c.key)){const m=c.key==="ArrowRight";let p=m?1:-1;o.snapToGrid&&(p=m?o.gridX:-o.gridX),v=v+p}else if(["ArrowUp","ArrowDown"].includes(c.key)){const m=c.key==="ArrowDown";let p=m?1:-1;o.snapToGrid&&(p=m?o.gridY:-o.gridY),r=r+p}if(o.boundary){const[m,p,f,d]=t();[v,r]=s(v,r,m,p,f,d)}a.value.left=v,a.value.top=r},onKeyup:c=>{["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"].includes(c.key)&&o.checkCollision&&n()&&(a.value.left=l,a.value.top=i),l=0,i=0}}}function ut(o,a,e){const t=N(!1),s=N(!1),n=N({width:a.width,height:a.height,left:a.left,top:a.top,angle:a.angle,skew:a.skew}),{marklineEmit:u}=nt(o,a),l=new Set;function i(d){if(l.add(d.button),a.disabled)return;t.value=!0,s.value=!0;let{clientX:w,clientY:y}=H(d);const{left:x,top:b}=n.value;let h=0,g=0,k=0,_=0;a.boundary&&([h,g,k,_]=c()),u("drag-start"),e&&e("drag-start",n.value),te(z=>{if(l.size>1)return;const{clientX:Y,clientY:C}=H(z);let E=(Y-w)/a.scaleRatio+x,B=(C-y)/a.scaleRatio+b;if(a.snapToGrid){let{left:X,top:F}=n.value;const ae=E-X,$=B-F;E=X+J(ae,a.gridX),B=F+J($,a.gridY)}a.boundary&&([E,B]=v(E,B,h,g,k,_)),n.value.left=E,n.value.top=B,e&&e("drag",n.value),_e(()=>{const X=u("drag");a.snap&&(X.diffX&&(n.value.left+=X.diffX),X.diffY&&(n.value.top+=X.diffY))})},z=>{a.checkCollision&&r()&&(n.value.top=b,n.value.left=x),l.clear(),t.value=!1,u("drag-end"),e&&e("drag-end",n.value)})}const c=()=>{let d=0,w=0;const{left:y,top:x,height:b,width:h,angle:g}=n.value,k=o.value.offsetParent||document.body,_=P(k,a.scaleRatio);if(g){const C=P(o.value,a.scaleRatio);d=C.left-Math.floor(y-(C.width-h)+_.left),w=C.top-Math.floor(x-(C.height-b)+_.top)}const z=_.width-h,Y=_.height-b;return[d,z-d,w,Y-w,_.width,_.height]},v=(d,w,y,x,b,h)=>(d=d<y?y:d,d=d>x?x:d,w=w<b?b:w,w=w>h?h:w,[d,w]),r=()=>{const d=o.value.offsetParent||document.body,w=Array.from(d.children).filter(y=>y!==o.value&&y.classList.contains("es-drager"));for(let y=0;y<w.length;y++){const x=w[y];if(rt(o.value,x,a.scaleRatio))return!0}},m=()=>{s.value=!1},{onKeydown:p,onKeyup:f}=dt(a,n,s,{getBoundary:c,fixBoundary:v,checkDragerCollision:r,emit:e});return O(s,d=>{d?(e("focus",d),document.addEventListener("click",m,{once:!0})):e("blur",d),!a.disabledKeyEvent&&(d?(document.addEventListener("keydown",p),document.addEventListener("keyup",f)):(document.removeEventListener("keydown",p),document.removeEventListener("keyup",f)))}),Me(()=>{if(o.value){if(!n.value.width&&!n.value.height){const{width:d,height:w}=P(o.value,a.scaleRatio);n.value={...n.value,width:d+2,height:w+2}}if(o.value.addEventListener("mousedown",i),o.value.addEventListener("touchstart",i,{passive:!0}),a.type==="text"){const d=window.getComputedStyle(o.value);n.value.height=parseInt(d.fontSize)}}}),qe(()=>{document.removeEventListener("click",m),document.removeEventListener("keydown",p),document.removeEventListener("keyup",f)}),{isMousedown:t,selected:s,dragData:n,getBoundary:c,checkDragerCollision:r}}const ct=o=>(Ce("data-v-1b6d4877"),o=o(),ze(),o),ht=ct(()=>S("div",{class:"es-drager-rotate-handle"},[S("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[S("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})])],-1)),pt=ee({__name:"rotate",props:{modelValue:{type:Number,default:0},element:{type:Object}},emits:["update:modelValue","rotate","rotate-start","rotate-end"],setup(o,{emit:a}){const e=o,t=a,s=N(null),n=A({get:()=>e.modelValue,set:l=>{t("update:modelValue",l)}});function u(l){if(!e.element)return console.warn("[es-drager] rotate component need drag element property");l.stopPropagation();const{width:i,height:c,left:v,top:r}=e.element.getBoundingClientRect(),m=v+i/2,p=r+c/2;t("rotate-start",n.value),te(f=>{const{clientX:d,clientY:w}=H(f),y=m-d,x=p-w,b=Math.atan2(x,y)*180/Math.PI-90;n.value=(b+360)%360,t("rotate",n.value)},()=>{t("rotate-end",n.value)})}return(l,i)=>(T(),W("div",{ref_key:"rotateRef",ref:s,class:"es-drager-rotate",onMousedown:D(u,["stop"]),onTouchstartPassive:u},[I(l.$slots,"default",{},()=>[ht],!0)],544))}}),Ee=(o,a)=>{const e=o.__vccOpts||o;for(const[t,s]of a)e[t]=s;return e},ft=Ee(pt,[["__scopeId","data-v-1b6d4877"]]),vt=o=>(Ce("data-v-68f41cf2"),o=o(),ze(),o),gt=vt(()=>S("div",{class:"es-drager-skew-handle"},[S("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[S("path",{fill:"currentColor",d:"M870.679273 271.378618L520.946036 65.489455a16.384 16.384 0 0 0-16.644654 0L154.568145 271.378618a16.290909 16.290909 0 0 0 0 28.094837l349.733237 205.889163a16.384 16.384 0 0 0 16.644654 0L870.679273 299.473455a16.290909 16.290909 0 0 0 0-28.094837zM512.623709 452.673164L228.528873 285.426036l284.094836-167.247127 284.094836 167.247127z m-22.574545 71.68L135.521745 322.615855a16.346764 16.346764 0 0 0-24.482909 14.270836l2.485528 405.820509a16.309527 16.309527 0 0 0 8.257163 14.075345l354.518109 201.728a16.346764 16.346764 0 0 0 24.482909-14.270836l-2.485527-405.820509a16.300218 16.300218 0 0 0-8.247854-14.093964z m-326.888728 198.842181l-2.020072-328.927418 287.529891 163.607273 2.020072 328.936727z m725.336437-400.607418L533.969455 524.325236a16.300218 16.300218 0 0 0-8.247855 14.066037l-2.485527 405.820509a16.365382 16.365382 0 0 0 24.4736 14.270836l354.546036-201.728a16.309527 16.309527 0 0 0 8.257164-14.075345l2.485527-405.820509a16.374691 16.374691 0 0 0-24.501527-14.270837z m-41.890909 373.462109L605.016436 838.683927v-57.902545l241.626764-142.671127v57.902545z m0-98.434327L605.016436 740.2496v-57.911855l241.626764-142.63389v57.911854z m0-98.443636L605.016436 641.833891v-57.902546l241.626764-142.63389v57.902545z"})])],-1)),mt=ee({__name:"skew",props:{modelValue:{type:Array,default:()=>[0,0]},element:{type:Object}},emits:["update:modelValue","skew","skew-start","skew-end"],setup(o,{emit:a}){const e=o,t=a,s=N(null),n=A({get:()=>e.modelValue,set:l=>{t("update:modelValue",l)}});function u(l){if(!e.element)return console.warn("[es-drager] skew component need drag element property");l.stopPropagation();const{width:i,height:c}=e.element.getBoundingClientRect(),{clientX:v,clientY:r}=H(l),[m,p]=n.value;t("skew-start",n.value),te(f=>{const{clientX:d,clientY:w}=H(f),y=v-d,x=r-w,b=m+y/i*45,h=p+x/c*45;n.value=[+b.toFixed(2),+h.toFixed(2)],t("skew",n.value)},()=>{t("skew-end",n.value)})}return(l,i)=>(T(),W("div",{ref_key:"skewRef",ref:s,class:"es-drager-skew",onMousedown:u,onTouchstartPassive:u},[I(l.$slots,"default",{},()=>[gt],!0)],544))}}),wt=Ee(mt,[["__scopeId","data-v-68f41cf2"]]),yt=["data-side","onMousedown","onTouchstartPassive"],kt=S("div",{class:"es-drager-dot-handle"},null,-1),ue=ee({__name:"drager",props:Qe,emits:["change","drag","drag-start","drag-end","resize","resize-start","resize-end","rotate","rotate-start","rotate-end","skew","skew-start","skew-end","focus","blur"],setup(o,{emit:a}){const e=o,t=a,s=(h,...g)=>{t(h,...g)},n=N(null),{selected:u,dragData:l,isMousedown:i,getBoundary:c,checkDragerCollision:v}=ut(n,e,s),r=N(me(0,e.resizeList)),m=A(()=>e.resizable&&!e.disabled),p=A(()=>e.rotatable&&!e.disabled&&u.value),f=A(()=>e.skewable&&!e.disabled&&u.value),d=A(()=>e.type!="text"?r.value:r.value.filter(h=>!["top","bottom"].includes(h.side))),w=A(()=>{const{width:h,height:g,left:k,top:_,angle:z,skew:Y}=l.value,C={};h&&(C.width=Q(h)),g&&(e.type==="text"?C.fontSize=g+"px":C.height=Q(g));let E=[`translateX(${Q(k)})`,`translateY(${Q(_)})`,`rotate(${z}deg)`];if(Y&&Y.length){let B=`skewX(${Y[0]}deg)`;B+=` skewY(${Y[1]??0}deg)`,E.push(B)}return{...C,zIndex:e.zIndex,transform:E.join(" "),"--es-drager-color":e.color}});function y(h){n.value||(n.value=h.$el||h)}function x(h){r.value=me(h,e.resizeList),s("rotate-end",l.value)}function b(h,g){if(e.disabled)return;g.stopPropagation();const{clientX:k,clientY:_}=H(g),z=k,Y=_,{width:C,height:E,left:B,top:X}=l.value,F=B+C/2,ae=X+E/2,$={width:C,height:E,centerX:F,centerY:ae,rotateAngle:l.value.angle},q=h.side;let{minWidth:Re,minHeight:Be,aspectRatio:oe,equalProportion:Se}=e;s("resize-start",l.value,q),e.boundary&&c(),["text","image"].includes(e.type)&&q.includes("-")&&(oe=$.width/$.height),te(ce=>{const{clientX:Ye,clientY:Xe}=H(ce);let K=(Ye-z)/e.scaleRatio,G=(Xe-Y)/e.scaleRatio;e.snapToGrid&&(K=J(K,e.gridX),G=J(G,e.gridY));const Ae=Math.atan2(G,K),he=at(K,G),Te=ce.shiftKey,pe=Ae-de($.rotateAngle),Ne=he*Math.cos(pe),$e=he*Math.sin(pe),Pe=(Se||Te)&&!oe?$.width/$.height:oe,{position:{centerX:fe,centerY:ve},size:{width:Ve,height:He}}=ot(q,{...$,rotateAngle:$.rotateAngle},Ne,$e,Pe,Re,Be),Ie=lt({centerX:fe,centerY:ve,width:Ve,height:He,angle:l.value.angle});let j={...l.value,...st(Ie,fe,ve)};e.maxWidth>0&&(j.width=Math.min(j.width,e.maxWidth)),e.maxHeight>0&&(j.height=Math.min(j.height,e.maxHeight)),l.value=j,s("resize",l.value,q)},()=>{e.checkCollision&&v()&&(l.value={...l.value,width:C,height:E,left:B,top:X}),s("resize-end",l.value,q)})}return O(()=>[e.width,e.height,e.left,e.top,e.angle],([h,g,k,_,z],[Y,C,E,B,X])=>{h!==Y&&(l.value.width=h),g!==C&&(l.value.height=g),k!==E&&(l.value.left=k),_!==B&&(l.value.top=_),z!==X&&(l.value.angle=z)}),O(()=>l.value,h=>{t("change",{...h})},{deep:!0}),O(()=>e.skew,(h,g)=>{l.value.skew=h??[]},{deep:!0}),O(()=>e.selected,h=>{u.value=h},{immediate:!0}),(h,g)=>(T(),U(Le(h.tag),{ref:y,class:xe(["es-drager",`es-drager-${h.type}`,{disabled:h.disabled,dragging:R(i),selected:R(u),border:h.border}]),style:Z(w.value),onClick:g[7]||(g[7]=D(()=>{},["stop"])),onMousedown:g[8]||(g[8]=D(()=>{},["stop"]))},{default:V(()=>[I(h.$slots,"default"),m.value?(T(!0),W(ke,{key:0},be(d.value,(k,_)=>(T(),W("div",{key:_,class:"es-drager-dot","data-side":k.side,style:Z({...k}),onMousedown:z=>b(k,z),onTouchstartPassive:z=>b(k,z)},[I(h.$slots,"resize",De(We({side:k.side})),()=>[kt])],44,yt))),128)):le("",!0),p.value?(T(),U(ft,{key:1,modelValue:R(l).angle,"onUpdate:modelValue":g[0]||(g[0]=k=>R(l).angle=k),element:n.value,onRotate:g[1]||(g[1]=k=>s("rotate",R(l))),onRotateStart:g[2]||(g[2]=k=>s("rotate-start",R(l))),onRotateEnd:x},{default:V(()=>[I(h.$slots,"rotate")]),_:3},8,["modelValue","element"])):le("",!0),f.value?(T(),U(wt,{key:2,modelValue:R(l).skew,"onUpdate:modelValue":g[3]||(g[3]=k=>R(l).skew=k),element:n.value,onSkew:g[4]||(g[4]=k=>s("skew",R(l))),onSkewStart:g[5]||(g[5]=k=>s("skew-start",R(l))),onSkewEnd:g[6]||(g[6]=k=>s("skew-end",R(l)))},{default:V(()=>[I(h.$slots,"skew")]),_:3},8,["modelValue","element"])):le("",!0)]),_:3},40,["class","style"]))}}),bt=o=>{o.component("es-drager",ue)};ue.install=bt;const xt={class:"btns"},Lt=["onClick"],Mt=["onClick"],_t=["onClick"],Et=ee({__name:"esDragle",setup(o){const a=je(),e=N(),t=N(),s=Oe({scale:1,thick:20,width:1470,height:700,showShadowText:!0,canvasWidth:1e3,canvasHeight:500,showRuler:!0,palette:{bgColor:"transparent",lineType:"dashed"},isShowReferLine:!0,shadow:{x:0,y:0,width:0,height:0},lines:{h:[300],v:[400]}}),n=N({componentList:[{id:"div1",component:"div",text:"div1",width:100,height:100,left:0,top:0},{id:"div2",component:"div",text:"div2",width:100,height:100,top:100,left:100}]}),u=A(()=>({width:`${s.width}px`,height:`${s.height}px`})),l=A(()=>({width:`${s.canvasWidth}px`,height:`${s.canvasHeight}px`,position:"relative",background:a.isLight?"#eff2f5":"#333333"})),i=(v,r)=>{_e(()=>{s.shadow={x:r.left,y:r.top,width:r.width,height:r.height}}),Object.keys(v).forEach(m=>{r[m]=v[m]})},c=v=>Array.from(document.querySelectorAll(".sketch-ruler .lines .line"));return(v,r)=>(T(),W("div",null,[S("div",{class:xe(["wrapper",[R(a).isLight?"whitewrapper":"blackwrapper"]]),style:Z(u.value)},[Ue(R(Ge),ge({ref_key:"sketchruleRef",ref:e,scale:s.scale,"onUpdate:scale":r[0]||(r[0]=m=>s.scale=m)},s),{default:V(()=>[S("div",{ref_key:"dragParentRef",ref:t,"data-type":"page",style:Z(l.value)},[(T(!0),W(ke,null,be(n.value.componentList,m=>(T(),U(R(ue),ge({ref_for:!0},m,{key:m.id,snap:"","scale-ratio":s.scale,class:"dragerItem","snap-threshold":10,markline:"","extra-lines":c,onChange:p=>i(p,m)}),{default:V(()=>[(T(),U(Le(m.component),null,{default:V(()=>[Fe(Ke(m.text),1)]),_:2},1024))]),_:2},1040,["scale-ratio","onChange"]))),128))],4)]),btn:V(({reset:m,zoomIn:p,zoomOut:f})=>[S("div",xt,[S("button",{onClick:D(m,["stop"])},"还原",8,Lt),S("button",{onClick:D(p,["stop"])},"放大",8,Mt),S("button",{onClick:D(f,["stop"])},"缩小",8,_t)])]),_:1},16,["scale"])],6)]))}});export{Et as default};
