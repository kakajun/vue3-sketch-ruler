import{l as X}from"./8k-DnEl78rB.js";import{p as Y}from"./panzoom-PrllC8h6.js";import{d as B,r as a,c as b,p as D,G as I,b as O,f as u,n as x,u as M,k as q,o as G,_ as N}from"./index-D3Mk6K2d.js";const T=["src"],U=B({__name:"8K",setup(V){const n=a(null),s=a(null),W=a(1),t=a(null),o=a(null),r=a(0),c=a(0),h=a(8800),w=a(5097),E=a(.2),v=a("");let d=0,p=0;const K=b(()=>({background:"#f6f7f9",width:r.value+"px",height:c.value+"px",overflow:"hidden"})),P=b(()=>({width:h.value+"px",height:w.value+"px"})),g=e=>{const{scale:l,dimsOut:i}=e.detail;i&&(W.value=l)},m=e=>{e.ctrlKey&&n.value&&(e.preventDefault(),n.value.zoomWithWheel(e))},y=e=>{e.code==="Space"&&!e.repeat&&n.value&&(e.preventDefault(),v.value="grab",n.value.setOptions({disablePan:!1,cursor:"grab"}))},_=e=>{e.code==="Space"&&n.value&&(v.value="",n.value.setOptions({disablePan:!0,cursor:"default"}))},z=()=>{const e=r.value,l=c.value,i=h.value,k=w.value,H=e*(1-E.value)/i,R=l*(1-E.value)/k,f=Math.min(H,R);return d=(e-i)/2/f,p=(l-k)/2/f,f},S=()=>{o.value?(r.value=o.value.clientWidth,c.value=o.value.clientHeight):(r.value=window.innerWidth,c.value=window.innerHeight)},C=()=>{if(s.value&&(s.value.removeEventListener("panzoomchange",g),s.value.parentElement&&s.value.parentElement.removeEventListener("wheel",m)),n.value?.destroy(),t.value=document.querySelector(".canvasedit"),t.value){S();let e=z();console.log(e,"scale"),n.value=Y(t.value,{startScale:e,smoothScroll:!0,canvas:!0,disablePan:!0,cursor:"default",startX:d,startY:p}),t.value.addEventListener("panzoomchange",g),t.value.parentElement&&t.value.parentElement.addEventListener("wheel",m,{passive:!1}),s.value=t.value}},L=()=>{if(S(),n.value){const e=z();n.value.reset({startScale:e,startX:d,startY:p,animate:!1})}};return D(()=>{C(),window.addEventListener("resize",L),window.addEventListener("keydown",y),window.addEventListener("keyup",_)}),I(()=>{window.removeEventListener("resize",L),window.removeEventListener("keydown",y),window.removeEventListener("keyup",_),t.value&&t.value.parentElement&&t.value.parentElement.removeEventListener("wheel",m)}),(e,l)=>(G(),O("div",{class:"wrapper",ref_key:"wrapperRef",ref:o},[l[0]||(l[0]=u("div",{class:"description"},"说明: 该案例展示了大分辨率8K大屏(8800*5097)上使用simple-panzoom插件, 依然能做到上下左右居中正确",-1)),u("div",{class:q(["canvasedit-parent",v.value]),style:x(K.value)},[u("div",{class:"canvasedit big-screen-demo",style:x(P.value),ref_key:"elem",ref:t},[u("img",{style:{width:"100%",height:"100%"},src:M(X),alt:"Left Screen"},null,8,T)],4)],6)],512))}}),J=N(U,[["__scopeId","data-v-c66c0662"]]);export{J as default};
