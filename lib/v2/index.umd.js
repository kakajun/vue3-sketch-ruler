var be=Object.defineProperty;var V=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var I=(f,o,m)=>o in f?be(f,o,{enumerable:!0,configurable:!0,writable:!0,value:m}):f[o]=m,$=(f,o)=>{for(var m in o||(o={}))me.call(o,m)&&I(f,m,o[m]);if(V)for(var m of V(o))pe.call(o,m)&&I(f,m,o[m]);return f};/*!
* vue2 v1.3.4
* 2022年6月Tue Jun 14 2022 16:25:57 GMT+0800 (中国标准时间)
* 制作
(function(f,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue-demi")):typeof define=="function"&&define.amd?define(["exports","vue-demi"],o):(f=typeof globalThis!="undefined"?globalThis:f||self,o(f.SketchRuler={},f.vueDemi))})(this,function(f,o){"use strict";*/var m=o.defineComponent({name:"LineRuler",props:{scale:Number,thick:Number,palette:Object,index:Number,start:Number,vertical:Boolean,value:Number,isShowReferLine:Boolean},emits:["onMouseDown","onRelease","onRemove"],setup(e,{emit:a}){const n=o.ref(0),i=o.ref(!0);o.onMounted(()=>{n.value=e.value});const c=r=>{i.value=r>=0},h=o.computed(()=>{const r=(n.value-e.start)*e.scale;c(r);const s=r+"px";return e.vertical?{top:s}:{left:s}}),v=o.computed(()=>{var b;const r=`1px solid ${(b=e.palette)==null?void 0:b.lineColor}`,s=e.vertical?{borderTop:r}:{borderLeft:r},u=e.isShowReferLine?e.vertical?"ns-resize":"ew-resize":"none";return $({cursor:u},s)}),d=o.computed(()=>e.vertical?{left:e.thick+"px"}:{top:e.thick+"px"});return{startValue:n,showLine:i,offset:h,borderCursor:v,actionStyle:d,handleDown:r=>{const s=e.vertical?r.clientY:r.clientX,u=n.value;a("onMouseDown");const b=A=>{const w=e.vertical?A.clientY:A.clientX,S=Math.round(u+(w-s)/e.scale);n.value=S},_=()=>{a("onRelease",n.value,e.index),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",b),document.addEventListener("mouseup",_)},handleRemove:()=>{a("onRemove",e.index)}}}}),F=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.showLine,expression:"showLine"}],staticClass:"line",style:[e.offset,e.borderCursor],on:{mousedown:e.handleDown}},[n("div",{staticClass:"action",style:e.actionStyle},[n("span",{staticClass:"del",on:{click:e.handleRemove}},[e._v("\xD7")]),n("span",{staticClass:"value"},[e._v(e._s(e.startValue))])])])},M=[],we=(()=>`.line[data-v-493b3718]{pointer-events:auto;position:absolute}.line .action[data-v-493b3718]{position:absolute;display:flex;justify-content:center;align-items:center}.line .value[data-v-493b3718]{pointer-events:none;transform:scale(.83)}.line .del[data-v-493b3718]{padding:3px 5px;cursor:pointer;visibility:hidden}.line:hover .del[data-v-493b3718]{visibility:visible}
`)();function R(e,a,n,i,c,h,v,d){var l=typeof e=="function"?e.options:e;a&&(l.render=a,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),h&&(l._scopeId="data-v-"+h);var t;if(v?(t=function(u){u=u||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!u&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(u=__VUE_SSR_CONTEXT__),c&&c.call(this,u),u&&u._registeredComponents&&u._registeredComponents.add(v)},l._ssrRegister=t):c&&(t=d?function(){c.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:c),t)if(l.functional){l._injectStyles=t;var r=l.render;l.render=function(b,_){return t.call(_),r(b,_)}}else{var s=l.beforeCreate;l.beforeCreate=s?[].concat(s,t):[t]}return{exports:e,options:l}}const N={};var Q=R(m,F,M,!1,z,"493b3718",null,null);function z(e){for(let a in N)this[a]=N[a]}var K=function(){return Q.exports}();const Y=e=>e<=.25?40:e<=.5?20:e<=1?10:e<=2?5:e<=4?2:1,E=.83,P=(e,a,n,i,c,h)=>{const{scale:v,width:d,height:l,ratio:t,palette:r}=c,{bgColor:s,fontColor:u,shadowColor:b,longfgColor:_,shortfgColor:A}=r;if(e.scale(t,t),e.clearRect(0,0,d,l),e.fillStyle=s,e.fillRect(0,0,d,l),i){const g=(n-a)*v,C=i*v;e.fillStyle=b,h?e.fillRect(g,0,C,l*3/8):e.fillRect(0,g,d*3/8,C)}const w=Y(v),S=w*v,y=w*10,U=y*v,O=Math.floor(a/w)*w,T=Math.floor(a/y)*y,ve=(O-a)/w*S,fe=(T-a)/y*U,X=a+Math.ceil((h?d:l)/v);e.beginPath(),e.fillStyle=u,e.strokeStyle=_;for(let g=T,C=0;g<X;g+=y,C++){const p=fe+C*U+.5;h?e.moveTo(p,0):e.moveTo(0,p),e.save(),h?e.translate(p,l*.4):e.translate(d*.4,p),h||e.rotate(-Math.PI/2),e.scale(E/t,E/t),e.fillText(g.toString(),4*t,7*t),e.restore(),h?e.lineTo(p,l*9/16):e.lineTo(d*9/16,p)}e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle=A;for(let g=O,C=0;g<X;g+=w,C++){const p=ve+C*S+.5;h?e.moveTo(p,0):e.moveTo(0,p),g%y!==0&&(h?e.lineTo(p,l*1/4):e.lineTo(d*1/4,p))}e.stroke(),e.closePath(),e.setTransform(1,0,0,1,0,0)};var W=o.defineComponent({name:"CanvasRuler",props:{showIndicator:Boolean,valueNum:Number,scale:Number,ratio:Number,palette:Object,vertical:Boolean,start:Number,width:Number,height:Number,selectStart:Number,selectLength:Number},emits:["onAddLine","update:showIndicator","update:valueNum"],setup(e,{emit:a}){const n=o.reactive({canvasContext:null});let i=1;const c=o.ref(null);o.onMounted(()=>{i=e.ratio||window.devicePixelRatio||1,h(),v(i),d(i)});const h=()=>{n.canvasContext=c.value&&c.value.getContext("2d")},v=t=>{if(c.value){c.value.width=e.width*t,c.value.height=e.height*t;const r=n.canvasContext;r&&(r.font=`${12*t}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,r.lineWidth=1,r.textBaseline="middle")}},d=t=>{const r={scale:e.scale,width:e.width,height:e.height,palette:e.palette,ratio:t};n.canvasContext&&P(n.canvasContext,e.start,e.selectStart,e.selectLength,r,!e.vertical)};return o.watch(()=>e.start,()=>d(i)),o.watch([()=>e.width,()=>e.height],()=>{v(i),d(i)}),{handle:(t,r)=>{const s=(_,A,w)=>Math.round(A+_/w),u=e.vertical?t.offsetY:t.offsetX,b=s(u,e.start,e.scale);switch(r){case"click":a("onAddLine",b);break;case"enter":a("update:valueNum",b),a("update:showIndicator",!0);break;default:a("update:valueNum",b);break}},canvas:c}}}),q=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("canvas",{ref:"canvas",staticClass:"ruler",on:{click:function(i){return e.handle(i,"click")},mouseenter:function(i){return e.handle(i,"enter")},mousemove:function(i){return e.handle(i,"move")},mouseleave:function(i){return e.$emit("update:showIndicator",!1)}}})},G=[];const B={};var H=R(W,q,G,!1,j,null,null,null);function j(e){for(let a in B)this[a]=B[a]}var Z=function(){return H.exports}();const D={scale:Number,ratio:Number,thick:Number,palette:Object,vertical:{type:Boolean,default:!0},width:{type:Number,default:200},height:{type:Number,default:200},start:{type:Number,default:0},lines:{type:Array,default:()=>[]},selectStart:{type:Number},selectLength:{type:Number},isShowReferLine:{type:Boolean}};var J=o.defineComponent({name:"RulerWrapper",components:{CanvasRuler:Z,RulerLine:K},props:D,setup(e){const a=o.ref(!1),n=o.ref(0),i=o.computed(()=>e.vertical?"v-container":"h-container"),c=o.computed(()=>{const t={width:`calc(100% - ${e.thick}px)`,height:`${e.thick+1}px`,left:`${e.thick}px`},r={width:`${e.thick&&e.thick+1}px`,height:`calc(100% - ${e.thick}px)`,top:`${e.thick}px`};return e.vertical?r:t}),h=o.computed(()=>{var u;const t=(n.value-e.start)*e.scale;let r="top",s="borderLeft";return r=e.vertical?"top":"left",s=e.vertical?"borderBottom":"borderLeft",{[r]:t+"px",[s]:`1px solid ${(u=e.palette)==null?void 0:u.lineColor}`}}),v=t=>{e.lines.push(t)},d=(t,r)=>{const s=t-e.start,u=(e.vertical?e.height:e.width)/e.scale;s<0||s>u?l(r):e.lines[r]=t},l=t=>{e.lines.splice(t,1)};return{showIndicator:a,valueNum:n,rwClassName:i,rwStyle:c,indicatorStyle:h,handleNewLine:v,handleLineRelease:d,handleLineRemove:l}}}),ee=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{class:e.rwClassName,style:e.rwStyle},[n("CanvasRuler",{attrs:{vertical:e.vertical,scale:e.scale,width:e.width,height:e.height,start:e.start,ratio:e.ratio,"select-start":e.selectStart,"select-length":e.selectLength,palette:e.palette},on:{onAddLine:e.handleNewLine},model:{value:e.showIndicator,callback:function(i){e.showIndicator=i},expression:"showIndicator"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowReferLine,expression:"isShowReferLine"}],staticClass:"lines"},e._l(e.lines,function(i,c){return n("RulerLine",{key:i+c,attrs:{index:c,value:i>>0,scale:e.scale,start:e.start,thick:e.thick,palette:e.palette,vertical:e.vertical,"is-show-refer-line":e.isShowReferLine},on:{onRemove:e.handleLineRemove,onRelease:e.handleLineRelease}})}),1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicator,expression:"showIndicator"}],staticClass:"indicator",style:e.indicatorStyle},[n("div",{staticClass:"value"},[e._v(e._s(e.valueNum))])])],1)},te=[],ge=(()=>`.line[data-v-3718ebb4],.h-container[data-v-3718ebb4],.v-container[data-v-3718ebb4]{position:absolute}.h-container .lines[data-v-3718ebb4],.v-container .lines[data-v-3718ebb4]{pointer-events:none}.h-container:hover .lines[data-v-3718ebb4],.v-container:hover .lines[data-v-3718ebb4]{pointer-events:auto}.h-container[data-v-3718ebb4]{top:0}.h-container .line[data-v-3718ebb4]{top:0;height:100vh;padding-left:5px}.h-container .line .action[data-v-3718ebb4]{transform:translate(-24px)}.h-container .line .action .value[data-v-3718ebb4]{margin-left:4px}.h-container .indicator[data-v-3718ebb4]{top:0;height:100vw}.h-container .indicator .value[data-v-3718ebb4]{width:auto;padding:0 2px;margin-top:4px;margin-left:4px}.v-container[data-v-3718ebb4]{left:0}.v-container .line[data-v-3718ebb4]{left:0;width:100vw;padding-top:5px}.v-container .line .action[data-v-3718ebb4]{transform:translateY(-24px);flex-direction:column}.v-container .line .action .value[data-v-3718ebb4]{margin-top:4px}.v-container .indicator[data-v-3718ebb4]{width:100vw}.v-container .indicator .value[data-v-3718ebb4]{left:0;width:auto;padding:0 2px;margin-top:-5px;margin-left:2px;transform:rotate(-90deg);transform-origin:0 0}
`)();const x={};var ne=R(J,ee,te,!1,ae,"3718ebb4",null,null);function ae(e){for(let a in x)this[a]=x[a]}var oe=function(){return ne.exports}();const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAopJREFUOE/FlE9IVEEcx7+/N9ouds1Mu0QUSFZYdIgoUqQoKPBQHsKozpXE7jbTO/U8xLJvn6usBHWQ6hBFXupSkQeVbh0KJEPp0sH+eLGTsKs77xcj78m0ax0E8cHjzZv5zef3/c33xxA24KENYGJzoEEQbNNaN4Zh2OQ4znwYhr9c1/39vwrXVDo0NNS0tLR0GYB5D64BmAMwzMyvlFKz1es10Hw+f4mZ7wHYBeA9gNdENFepVOaEEM3M3OI4Thczn41gt6WUgQ3+C+r7/h0AWQD3mXnYqPA8L9nQ0HCemduIaFpKOWoAhUJhT6VSuQXgOjP3K6W8GLwKzeVyp4jonR0QBEErM48w8zFLyayUsjX+z+VyHhHdZebTSqkxM78CHRgYOKS1/ghgVErZY214RkQ7ADyRUj72ff8qgCtmXUrZGcf5vv8CwEUhxOF0Ov1pBRpla5dSdseBhUJhpznH6tIsZb1KqacW+BGArUaUXX63UuplHJTNZjuEEONSyhozfd/n6mQ1RkXZL2itz7mu+80EDA4ONi8vL/8AcM2UbikyR2BU9cSmmTU70YqKIAj2hWFo2uenlHK/BRg3Y2aeNO5GyU8S0ZbFxcUuz/NKEXAGQKPjOCcymcyX1dIi8DSAiWQyeaavr68cbSgCuBknYubnQoj+TCYzUywWE6VS6S2ADsdx2gxw1X3L7SNENMbMnwE8qK+vf5NKpRaMaeVyeW8ikfiaSqW+R7BuZr5BRMe11p2u607U9Gk8kc/ntzPzQwCmExYATDLzVBiGE0KIowAOADDf3QA+aK2VDaxRajto3K+rq+tl5nYAzQBamHmeiOYBTGmtR6ph/1Rqg9c73pz7dD1qN0TpHyNQRCUDJXrAAAAAAElFTkSuQmCC",ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAjtJREFUOE/NlD9oFEEUxn9v9ghC0hpRUogIAUmniGAT/5Q2FrETPSNRJILg7RwimI0ox85eQFCEBGIUO1PYpFM0jSConQoBEZGgGPsgl+w+2eM2bC57SopAFqYZ3v7m+977ZoQt+GQLmGxPaBiGgYiMWWvXBHZUGoZhH3BERPYC+4F+4Keq/urt7b1RLpf/ZEBVHa9Wq0HWyg3QKIoGVPU8cA7wgK/pUtXPQJ8xZk+pVBpuNBqXUoUiEvi+P56fzTpo6+SbwHNg1lo7WzTITGEKXFlZeeB53tVCpa3CK8AFa+1cBgvD8LKIXAQOJkkyICJDeYVBEJS6u7s/qeoLa+1o+l9TqXNuBLhmjDlbqVQ+5ICjInIfOBPH8W9jzGCR5YmJiRNxHM+papgqzqDvgSlr7VTernPuO3An3c9bBt74vv+yrdaKyLDv+/1Sq9UGPc97nY9EVuycU2AQOA7cAm4Dr4D5TvVxHB9rKo2iaEFVp621Ln96FEUngaOqGmSxabVqsh3a2h+x1h5qQjNrae/yE4+iaCwDJkky73neTuBZe129Xk+H+BS4l7ZqLVIZ2BhzuFKpvMsDVXXWGPMxFdAedOfcKeCRqj7MYrUhpz09PfXl5eXrectFWXXODQHpOq2qd/95o/JXr6ura3J1dXU6SZIfwKKIHAD2tVYMPBGRx77vN10UXtO85fTkmZmZHUtLSzUR2QXsBhaAL6r6DXhbrVYXi1yss59GqOgub/bN3Z7v6X/tb9Zmp/q/kN8s+lJb8oEAAAAASUVORK5CYII=",le={eyeIcon:{type:String},closeEyeIcon:{type:String},scale:{type:Number,default:1},ratio:{type:Number},thick:{type:Number,default:16},palette:Object,startX:{type:Number},startY:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},shadow:{type:Object,default:()=>({x:0,y:0,width:0,height:0})},lines:{type:Object,default:()=>({h:[],v:[]})},cornerActive:{type:Boolean,default:!1},isShowReferLine:{type:Boolean,default:!0}};var se=o.defineComponent({name:"SketchRule",components:{RulerWrapper:oe},props:le,emits:["onCornerClick","handleLine"],setup(e,{emit:a}){let n=o.ref(!0);n.value=e.isShowReferLine;const i=o.computed(()=>{function d(t,r){return Object.keys(t).forEach(s=>{s&&t.hasOwnProperty(s)&&(typeof r.key=="object"?t[s]=d(t[s],r[s]):r.hasOwnProperty(s)&&(t[s]=r[s]))}),t}return d({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#EB5648",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},e.palette||{})}),c=o.computed(()=>e.cornerActive?" active":""),h=o.computed(()=>({backgroundImage:n.value?`url(${e.eyeIcon||re})`:`url(${e.closeEyeIcon||ie})`,width:e.thick+"px",height:e.thick+"px",borderRight:`1px solid ${i.value.borderColor}`,borderBottom:`1px solid ${i.value.borderColor}`}));return{showReferLine:n,paletteCpu:i,cornerActiveClass:c,cornerStyle:h,onCornerClick:d=>{n.value=!n.value,a("onCornerClick",d)}}}}),ce=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"style-ruler mb-ruler",attrs:{id:"mb-ruler"}},[n("RulerWrapper",{attrs:{vertical:!1,width:e.width,height:e.thick,"is-show-refer-line":e.showReferLine,thick:e.thick,ratio:e.ratio,start:e.startX,lines:e.lines.h,"select-start":e.shadow.x,"select-length":e.shadow.width,scale:e.scale,palette:e.paletteCpu}}),n("RulerWrapper",{attrs:{vertical:!0,width:e.thick,height:e.height,"is-show-refer-line":e.showReferLine,thick:e.thick,ratio:e.ratio,start:e.startY,lines:e.lines.v,"select-start":e.shadow.y,"select-length":e.shadow.height,scale:e.scale,palette:e.paletteCpu}}),n("a",{staticClass:"corner",class:e.cornerActiveClass,style:e.cornerStyle,on:{click:e.onCornerClick}})],1)},ue=[],_e=(()=>`@charset "UTF-8";.style-ruler{position:absolute;z-index:3;width:100%;height:100%;overflow:hidden;font-size:12px;pointer-events:none}.style-ruler span{line-height:1}.corner{position:absolute;top:0;left:0;pointer-events:auto;cursor:pointer;box-sizing:content-box;transition:all .2s ease-in-out}.indicator{position:absolute;pointer-events:none}.indicator .value{position:absolute;background:white}.ruler{width:100%;height:100%;pointer-events:auto}
`)();const k={};var de=R(se,ce,ue,!1,he,null,null,null);function he(e){for(let a in k)this[a]=k[a]}var L=function(){return de.exports}();f.SketchRule=L,f.default=L,Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
