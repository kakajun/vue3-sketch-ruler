var me=Object.defineProperty;var I=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var x=(v,r,_)=>r in v?me(v,r,{enumerable:!0,configurable:!0,writable:!0,value:_}):v[r]=_,$=(v,r)=>{for(var _ in r||(r={}))_e.call(r,_)&&x(v,_,r[_]);if(I)for(var _ of I(r))Ce.call(r,_)&&x(v,_,r[_]);return v};/*!
* vue2 v1.3.5
* 2022年8月Tue Aug 30 2022 22:27:29 GMT+0800 (中国标准时间)
* 制作
*/(function(v,r){typeof exports=="object"&&typeof module!="undefined"?r(exports,require("vue-demi")):typeof define=="function"&&define.amd?define(["exports","vue-demi"],r):(v=typeof globalThis!="undefined"?globalThis:v||self,r(v.SketchRuler={},v.vueDemi))})(this,function(v,r){"use strict";var _=r.defineComponent({name:"LineRuler",props:{scale:Number,thick:Number,palette:Object,index:Number,start:Number,vertical:Boolean,value:Number,isShowReferLine:Boolean},emits:["onMouseDown","onRelease","onRemove"],setup(e,{emit:n}){const t=r.ref(0),i=r.ref(!0);r.onMounted(()=>{t.value=e.value});const s=a=>{i.value=a>=0},h=r.computed(()=>{const a=(t.value-e.start)*e.scale;s(a);const d=a+"px";return e.vertical?{top:d}:{left:d}}),u=r.computed(()=>{var m;const a=`1px solid ${(m=e.palette)==null?void 0:m.lineColor}`,d=e.vertical?{borderTop:a}:{borderLeft:a},c=e.isShowReferLine?e.vertical?"ns-resize":"ew-resize":"none";return $({cursor:c},d)}),f=r.computed(()=>e.vertical?{left:e.thick+"px"}:{top:e.thick+"px"});return{startValue:t,showLine:i,offset:h,borderCursor:u,actionStyle:f,handleDown:a=>{const d=e.vertical?a.clientY:a.clientX,c=t.value;n("onMouseDown");const m=R=>{const w=e.vertical?R.clientY:R.clientX,S=Math.round(c+(w-d)/e.scale);t.value=S},A=()=>{n("onRelease",t.value,e.index),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",A)},handleRemove:()=>{n("onRemove",e.index)}}}}),F=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.showLine,expression:"showLine"}],staticClass:"line",style:[e.offset,e.borderCursor],on:{mousedown:e.handleDown}},[t("div",{staticClass:"action",style:e.actionStyle},[t("span",{staticClass:"del",on:{click:e.handleRemove}},[e._v("\xD7")]),t("span",{staticClass:"value"},[e._v(e._s(e.startValue))])])])},M=[],we="";function p(e,n,t,i,s,h,u,f){var l=typeof e=="function"?e.options:e;n&&(l.render=n,l.staticRenderFns=t,l._compiled=!0),i&&(l.functional=!0),h&&(l._scopeId="data-v-"+h);var o;if(u?(o=function(c){c=c||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!c&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(c=__VUE_SSR_CONTEXT__),s&&s.call(this,c),c&&c._registeredComponents&&c._registeredComponents.add(u)},l._ssrRegister=o):s&&(o=f?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),o)if(l.functional){l._injectStyles=o;var a=l.render;l.render=function(m,A){return o.call(A),a(m,A)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,o):[o]}return{exports:e,options:l}}const N={};var Q=p(_,F,M,!1,K,"493b3718",null,null);function K(e){for(let n in N)this[n]=N[n]}var Y=function(){return Q.exports}();const z=e=>e<=.25?40:e<=.5?20:e<=1?10:e<=2?5:e<=4?2:1,E=.83,P=(e,n,t,i,s,h)=>{const{scale:u,width:f,height:l,ratio:o,palette:a}=s,{bgColor:d,fontColor:c,shadowColor:m,longfgColor:A,shortfgColor:R}=a;if(e.scale(o,o),e.clearRect(0,0,f,l),e.fillStyle=d,e.fillRect(0,0,f,l),i){const g=(t-n)*u,b=i*u;e.fillStyle=m,h?e.fillRect(g,0,b,l*3/8):e.fillRect(0,g,f*3/8,b)}const w=z(u),S=w*u,y=w*10,O=y*u,X=Math.floor(n/w)*w,T=Math.floor(n/y)*y,fe=(X-n)/w*S,ve=(T-n)/y*O,V=n+Math.ceil((h?f:l)/u);e.beginPath(),e.fillStyle=c,e.strokeStyle=A;for(let g=T,b=0;g<V;g+=y,b++){const C=ve+b*O+.5;h?e.moveTo(C,0):e.moveTo(0,C),e.save(),h?e.translate(C,l*.4):e.translate(f*.4,C),h||e.rotate(-Math.PI/2),e.scale(E/o,E/o),e.fillText(g.toString(),4*o,7*o),e.restore(),h?e.lineTo(C,l*9/16):e.lineTo(f*9/16,C)}e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle=R;for(let g=X,b=0;g<V;g+=w,b++){const C=fe+b*S+.5;h?e.moveTo(C,0):e.moveTo(0,C),g%y!=0&&(h?e.lineTo(C,l*1/4):e.lineTo(f*1/4,C))}e.stroke(),e.closePath(),e.setTransform(1,0,0,1,0,0)};var W=r.defineComponent({name:"CanvasRuler",props:{showIndicator:Boolean,valueNum:Number,scale:Number,ratio:Number,palette:Object,vertical:Boolean,start:Number,width:Number,height:Number,selectStart:Number,selectLength:Number},emits:["onAddLine","update:showIndicator","update:valueNum"],setup(e,{emit:n}){const t=r.reactive({canvasContext:null});let i=1;const s=r.ref(null);r.onMounted(()=>{i=e.ratio||window.devicePixelRatio||1,h(),u(i),f(i)});const h=()=>{t.canvasContext=s.value&&s.value.getContext("2d")},u=o=>{if(s.value){s.value.width=e.width*o,s.value.height=e.height*o;const a=t.canvasContext;a&&(a.font=`${12*o}px -apple-system,
                "Helvetica Neue", ".SFNSText-Regular",
                "SF UI Text", Arial, "PingFang SC", "Hiragino Sans GB",
                "Microsoft YaHei", "WenQuanYi Zen Hei", sans-serif`,a.lineWidth=1,a.textBaseline="middle")}},f=o=>{const a={scale:e.scale,width:e.width,height:e.height,palette:e.palette,ratio:o};t.canvasContext&&P(t.canvasContext,e.start,e.selectStart,e.selectLength,a,!e.vertical)};return r.watch(()=>e.start,()=>f(i)),r.watch([()=>e.width,()=>e.height],()=>{u(i),f(i)}),{handle:(o,a)=>{const d=(A,R,w)=>Math.round(R+A/w),c=e.vertical?o.offsetY:o.offsetX,m=d(c,e.start,e.scale);switch(a){case"click":n("onAddLine",m);break;case"enter":n("update:valueNum",m),n("update:showIndicator",!0);break;default:n("update:valueNum",m);break}},canvas:s}}}),q=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("canvas",{ref:"canvas",staticClass:"ruler",on:{click:function(i){return e.handle(i,"click")},mouseenter:function(i){return e.handle(i,"enter")},mousemove:function(i){return e.handle(i,"move")},mouseleave:function(i){return e.$emit("update:showIndicator",!1)}}})},G=[];const B={};var H=p(W,q,G,!1,Z,null,null,null);function Z(e){for(let n in B)this[n]=B[n]}var j=function(){return H.exports}();const D={scale:Number,ratio:Number,thick:Number,palette:Object,vertical:{type:Boolean,default:!0},width:{type:Number,default:200},height:{type:Number,default:200},start:{type:Number,default:0},lines:{type:Array,default:()=>[]},selectStart:{type:Number},selectLength:{type:Number},isShowReferLine:{type:Boolean}};var J=r.defineComponent({name:"RulerWrapper",components:{CanvasRuler:j,RulerLine:Y},props:D,setup(e){const n=r.ref(!1),t=r.ref(0),i=r.computed(()=>e.vertical?"v-container":"h-container"),s=r.computed(()=>{const o={width:`calc(100% - ${e.thick}px)`,height:`${e.thick+1}px`,left:`${e.thick}px`},a={width:`${e.thick&&e.thick+1}px`,height:`calc(100% - ${e.thick}px)`,top:`${e.thick}px`};return e.vertical?a:o}),h=r.computed(()=>{var c;const o=(t.value-e.start)*e.scale;let a="top",d="borderLeft";return a=e.vertical?"top":"left",d=e.vertical?"borderBottom":"borderLeft",{[a]:o+"px",[d]:`1px solid ${(c=e.palette)==null?void 0:c.lineColor}`}}),u=o=>{e.lines.push(o)},f=(o,a)=>{const d=o-e.start,c=(e.vertical?e.height:e.width)/e.scale;d<0||d>c?l(a):e.lines[a]=o},l=o=>{e.lines.splice(o,1)};return{showIndicator:n,valueNum:t,rwClassName:i,rwStyle:s,indicatorStyle:h,handleNewLine:u,handleLineRelease:f,handleLineRemove:l}}}),ee=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{class:e.rwClassName,style:e.rwStyle},[t("CanvasRuler",{attrs:{vertical:e.vertical,scale:e.scale,width:e.width,height:e.height,start:e.start,ratio:e.ratio,"select-start":e.selectStart,"select-length":e.selectLength,palette:e.palette},on:{onAddLine:e.handleNewLine},model:{value:e.showIndicator,callback:function(i){e.showIndicator=i},expression:"showIndicator"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowReferLine,expression:"isShowReferLine"}],staticClass:"lines"},e._l(e.lines,function(i,s){return t("RulerLine",{key:i+s,attrs:{index:s,value:i>>0,scale:e.scale,start:e.start,thick:e.thick,palette:e.palette,vertical:e.vertical,"is-show-refer-line":e.isShowReferLine},on:{onRemove:e.handleLineRemove,onRelease:e.handleLineRelease}})}),1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showIndicator,expression:"showIndicator"}],staticClass:"indicator",style:e.indicatorStyle},[t("div",{staticClass:"value"},[e._v(e._s(e.valueNum))])])],1)},te=[],ge="";const k={};var ne=p(J,ee,te,!1,oe,"3718ebb4",null,null);function oe(e){for(let n in k)this[n]=k[n]}var ae=function(){return ne.exports}();const re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAopJREFUOE/FlE9IVEEcx7+/N9ouds1Mu0QUSFZYdIgoUqQoKPBQHsKozpXE7jbTO/U8xLJvn6usBHWQ6hBFXupSkQeVbh0KJEPp0sH+eLGTsKs77xcj78m0ax0E8cHjzZv5zef3/c33xxA24KENYGJzoEEQbNNaN4Zh2OQ4znwYhr9c1/39vwrXVDo0NNS0tLR0GYB5D64BmAMwzMyvlFKz1es10Hw+f4mZ7wHYBeA9gNdENFepVOaEEM3M3OI4Thczn41gt6WUgQ3+C+r7/h0AWQD3mXnYqPA8L9nQ0HCemduIaFpKOWoAhUJhT6VSuQXgOjP3K6W8GLwKzeVyp4jonR0QBEErM48w8zFLyayUsjX+z+VyHhHdZebTSqkxM78CHRgYOKS1/ghgVErZY214RkQ7ADyRUj72ff8qgCtmXUrZGcf5vv8CwEUhxOF0Ov1pBRpla5dSdseBhUJhpznH6tIsZb1KqacW+BGArUaUXX63UuplHJTNZjuEEONSyhozfd/n6mQ1RkXZL2itz7mu+80EDA4ONi8vL/8AcM2UbikyR2BU9cSmmTU70YqKIAj2hWFo2uenlHK/BRg3Y2aeNO5GyU8S0ZbFxcUuz/NKEXAGQKPjOCcymcyX1dIi8DSAiWQyeaavr68cbSgCuBknYubnQoj+TCYzUywWE6VS6S2ADsdx2gxw1X3L7SNENMbMnwE8qK+vf5NKpRaMaeVyeW8ikfiaSqW+R7BuZr5BRMe11p2u607U9Gk8kc/ntzPzQwCmExYATDLzVBiGE0KIowAOADDf3QA+aK2VDaxRajto3K+rq+tl5nYAzQBamHmeiOYBTGmtR6ph/1Rqg9c73pz7dD1qN0TpHyNQRCUDJXrAAAAAAElFTkSuQmCC",le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAjtJREFUOE/NlD9oFEEUxn9v9ghC0hpRUogIAUmniGAT/5Q2FrETPSNRJILg7RwimI0ox85eQFCEBGIUO1PYpFM0jSConQoBEZGgGPsgl+w+2eM2bC57SopAFqYZ3v7m+977ZoQt+GQLmGxPaBiGgYiMWWvXBHZUGoZhH3BERPYC+4F+4Keq/urt7b1RLpf/ZEBVHa9Wq0HWyg3QKIoGVPU8cA7wgK/pUtXPQJ8xZk+pVBpuNBqXUoUiEvi+P56fzTpo6+SbwHNg1lo7WzTITGEKXFlZeeB53tVCpa3CK8AFa+1cBgvD8LKIXAQOJkkyICJDeYVBEJS6u7s/qeoLa+1o+l9TqXNuBLhmjDlbqVQ+5ICjInIfOBPH8W9jzGCR5YmJiRNxHM+papgqzqDvgSlr7VTernPuO3An3c9bBt74vv+yrdaKyLDv+/1Sq9UGPc97nY9EVuycU2AQOA7cAm4Dr4D5TvVxHB9rKo2iaEFVp621Ln96FEUngaOqGmSxabVqsh3a2h+x1h5qQjNrae/yE4+iaCwDJkky73neTuBZe129Xk+H+BS4l7ZqLVIZ2BhzuFKpvMsDVXXWGPMxFdAedOfcKeCRqj7MYrUhpz09PfXl5eXrectFWXXODQHpOq2qd/95o/JXr6ura3J1dXU6SZIfwKKIHAD2tVYMPBGRx77vN10UXtO85fTkmZmZHUtLSzUR2QXsBhaAL6r6DXhbrVYXi1yss59GqOgub/bN3Z7v6X/tb9Zmp/q/kN8s+lJb8oEAAAAASUVORK5CYII=",ie={eyeIcon:{type:String},closeEyeIcon:{type:String},scale:{type:Number,default:1},ratio:{type:Number},thick:{type:Number,default:16},palette:Object,startX:{type:Number},startY:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},shadow:{type:Object,default:()=>({x:0,y:0,width:0,height:0})},lines:{type:Object,default:()=>({h:[],v:[]})},isShowReferLine:{type:Boolean,default:!0}};var se=r.defineComponent({name:"SketchRule",components:{RulerWrapper:ae},props:ie,emits:["onCornerClick","handleLine"],setup(e,{emit:n}){let t=r.ref(!0);t.value=e.isShowReferLine;const i=r.computed(()=>{function u(l,o){return Object.keys(l).forEach(a=>{a&&l.hasOwnProperty(a)&&(typeof o.key=="object"?l[a]=u(l[a],o[a]):o.hasOwnProperty(a)&&(l[a]=o[a]))}),l}return u({bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#EB5648",borderColor:"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)",menu:{bgColor:"#fff",dividerColor:"#DBDBDB",listItem:{textColor:"#415058",hoverTextColor:"#298DF8",disabledTextColor:"rgba(65, 80, 88, 0.4)",bgColor:"#fff",hoverBgColor:"#F2F2F2"}}},e.palette||{})}),s=r.computed(()=>({backgroundImage:t.value?`url(${e.eyeIcon||re})`:`url(${e.closeEyeIcon||le})`,width:e.thick+"px",height:e.thick+"px",borderRight:`1px solid ${i.value.borderColor}`,borderBottom:`1px solid ${i.value.borderColor}`}));return{showReferLine:t,paletteCpu:i,cornerStyle:s,onCornerClick:u=>{t.value=!t.value,n("handleCornerClick",t.value)}}}}),ce=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"style-ruler mb-ruler",attrs:{id:"mb-ruler"}},[t("RulerWrapper",{attrs:{vertical:!1,width:e.width,height:e.thick,"is-show-refer-line":e.showReferLine,thick:e.thick,ratio:e.ratio,start:e.startX,lines:e.lines.h,"select-start":e.shadow.x,"select-length":e.shadow.width,scale:e.scale,palette:e.paletteCpu}}),t("RulerWrapper",{attrs:{vertical:!0,width:e.thick,height:e.height,"is-show-refer-line":e.showReferLine,thick:e.thick,ratio:e.ratio,start:e.startY,lines:e.lines.v,"select-start":e.shadow.y,"select-length":e.shadow.height,scale:e.scale,palette:e.paletteCpu}}),t("a",{staticClass:"corner",style:e.cornerStyle,on:{click:e.onCornerClick}})],1)},ue=[],Ae="";const L={};var de=p(se,ce,ue,!1,he,null,null,null);function he(e){for(let n in L)this[n]=L[n]}var U=function(){return de.exports}();v.SketchRule=U,v.default=U,Object.defineProperties(v,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
